import setConfigs from"@gitlab/ui/dist/config";import Vue from"vue";import{getLocation,sizeToParent}from"~/jira_connect/utils";import GlFeatureFlagsPlugin from"~/vue_shared/gl_feature_flags_plugin";import Translate from"~/vue_shared/translate";import JiraConnectApp from"./components/app.vue";import createStore from"./store";const store=createStore(),updateSignInLinks=async()=>{const t=await getLocation();Array.from(document.querySelectorAll(".js-jira-connect-sign-in")).forEach(e=>{const r=`${e.getAttribute("href")}?return_to=${t}`;e.setAttribute("href",r)})};export async function initJiraConnect(){await updateSignInLinks();const t=document.querySelector(".js-jira-connect-app");if(!t)return null;setConfigs(),Vue.use(Translate),Vue.use(GlFeatureFlagsPlugin);const{groupsPath:e,subscriptions:r,subscriptionsPath:n,usersPath:o}=t.dataset;return sizeToParent(),new Vue({el:t,store:store,provide:{groupsPath:e,subscriptions:JSON.parse(r),subscriptionsPath:n,usersPath:o},render:t=>t(JiraConnectApp)})}document.addEventListener("DOMContentLoaded",initJiraConnect);