(this.webpackJsonp=this.webpackJsonp||[]).push([[465],{"5v28":function(e,t,n){"use strict";n.r(t),n.d(t,"fetchPolicies",(function(){return I}));n("S26F"),n("pBsb");var o=n("gr1B"),r=n("pvem"),i=n("KeHV"),s=n("5lEE"),c=n("M/w7"),a=n("VoMd"),l=n("e0vG"),u=n("scFH"),h=n("qDEO");const d=function(){return(new Date).getTime()},p=function(e){return(d()-e)/1e3};class f{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=d(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),h.logger.log("ConnectionMonitor started. stale threshold = ".concat(this.constructor.staleThreshold," s")))}stop(){this.isRunning()&&(this.stoppedAt=d(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),h.logger.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=d()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,h.logger.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=d(),h.logger.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){var e=this;this.pollTimeout=setTimeout((function(){e.reconnectIfStale(),e.poll()}),this.getPollInterval())}getPollInterval(){const{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor;return 1e3*e*(1+t)**Math.min(this.reconnectAttempts,10)*(1+(0===this.reconnectAttempts?1:t)*Math.random())}reconnectIfStale(){this.connectionIsStale()&&(h.logger.log("ConnectionMonitor detected stale connection. reconnectAttempts = ".concat(this.reconnectAttempts,", time stale = ").concat(p(this.refreshedAt)," s, stale threshold = ").concat(this.constructor.staleThreshold," s")),this.reconnectAttempts+=1,this.disconnectedRecently()?h.logger.log("ConnectionMonitor skipping reopening recent disconnect. time disconnected = ".concat(p(this.disconnectedAt)," s")):(h.logger.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return p(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&p(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){var e=this;"visible"===document.visibilityState&&setTimeout((function(){!e.connectionIsStale()&&e.connection.isOpen()||(h.logger.log("ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ".concat(document.visibilityState)),e.connection.reopen())}),200)}}f.staleThreshold=6,f.reconnectionBackoffRate=.15;var g=f;const b=Object(h.createConsumer)();b.connection&&(b.connection.monitor=new g(b.connection));var v=b,m=n("WelT");class y extends i.ApolloLink{request(e){return new l.a((function(t){const n=v.subscriptions.create({channel:"GraphqlChannel",query:e.query?Object(u.a)(e.query):null,variables:e.variables,operationName:e.operationName,nonce:Object(m.a)()[0]},{received(e){e.errors?t.error(e.errors):e.result&&t.next(e.result),e.more||t.complete()}});return{unsubscribe(){n.unsubscribe()}}}))}}n("QzWB"),n("TXLM"),n("jaBk");const w=new i.ApolloLink((function(e,t){return t(e).flatMap((function(o){const{errors:r=[]}=o,i=r.find((function(e){var t;return null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.needs_captcha_response}));if(i){const o=i.extensions.captcha_site_key,r=i.extensions.spam_log_id;return new l.a((function(i){Promise.all([n.e(52),n.e(457)]).then(n.bind(null,"aG+H")).then((function(e){let{waitForCaptchaToBeSolved:t}=e;return t(o)})).then((function(n){e.setContext({headers:{"X-GitLab-Captcha-Response":n,"X-GitLab-Spam-Log-Id":r}}),t(e).subscribe(i)})).catch((function(e){i.error(e),i.complete()}))}))}return l.a.of(o)}))}));n("Tznw"),n("6yen"),n("OeRx"),n("l/dT"),n("RqS2"),n("Zy7a"),n("cjZU"),n("OAhk"),n("X42P"),n("mHhP"),n("fn0I"),n("UB/6"),n("imhG"),n("orcL");var C=n("osXd"),A=n.n(C),O=n("VNnR"),P=n.n(O),R=n("VvTQ");const j=function(e){return A()(e,(function(e){return void 0!==e}))},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return P()(j(e),j(t))};class q extends i.ApolloLink{constructor(){var e;super(),this.startupCalls=new Map,this.parseStartupCalls((null===(e=window.gl)||void 0===e?void 0:e.startup_graphql_calls)||[])}parseStartupCalls(e){var t=this;e.forEach((function(e){var n,o,r,i;const{query:s,variables:c,fetchCall:a}=e,l=null===(n=Object(R.a)(s))||void 0===n?void 0:null===(o=n.definitions)||void 0===o?void 0:null===(r=o.find((function(e){return"OperationDefinition"===e.kind})))||void 0===r?void 0:null===(i=r.name)||void 0===i?void 0:i.value;l&&t.startupCalls.set(l,{variables:c,fetchCall:a})}))}disable(){this.request=q.noopRequest,this.startupCalls=null}request(e,t){if(this.startupCalls&&0===this.startupCalls.size)return this.disable(),t(e);const{operationName:n}=e;if(!this.startupCalls.has(n))return t(e);const{variables:o,fetchCall:r}=this.startupCalls.get(n);return this.startupCalls.delete(n),k(o,e.variables)?new l.a((function(n){r.then((function(t){if(!t.ok)throw new Error("fetchCall failed");return e.setContext({response:t}),t.json()})).then((function(e){if(e&&(e.errors||!e.data))throw new Error("Received GraphQL error");n.next(e),n.complete()})).catch((function(){t(e).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:n.complete.bind(n)})}))})):t(e)}}var x,T,L;L=function(e,t){return t(e)},(T="noopRequest")in(x=q)?Object.defineProperty(x,T,{value:L,enumerable:!0,configurable:!0,writable:!0}):x[T]=L;var D=n("Qhxq"),M=n("hamy");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I={CACHE_FIRST:"cache-first",CACHE_AND_NETWORK:"cache-and-network",NETWORK_ONLY:"network-only",NO_CACHE:"no-cache",CACHE_ONLY:"cache-only"};t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{assumeImmutableResults:n,baseUrl:l,batchMax:u=10,cacheConfig:h,fetchPolicy:d=I.CACHE_FIRST,typeDefs:p,path:f="/api/graphql",useGet:g=!1}=t;let b="".concat(gon.relative_url_root||"").concat(f);l&&(b="".concat(l).concat(b).replace(/\/{3,}/g,"/"));const v={uri:b,headers:{[D.a.headerKey]:D.a.token},credentials:"same-origin",batchMax:u},m=new i.ApolloLink((function(e,t){return window.pendingApolloRequests=window.pendingApolloRequests||0,window.pendingApolloRequests+=1,t(e).map((function(e){return window.pendingApolloRequests-=1,e}))})),C=i.ApolloLink.split((function(e){return e.getContext().hasUpload||e.getContext().isSingleRequest}),Object(a.createUploadLink)(v),g?Object(c.a)(v):new s.a(v)),A=new i.ApolloLink((function(e,t){return t(e).map((function(t){const n=e.getContext().response;return M.a.interceptor&&M.a.interceptor({config:{url:n.url},headers:{"x-request-id":n.headers.get("x-request-id"),"x-gitlab-from-cache":n.headers.get("x-gitlab-from-cache")}}),t}))})),O=function(e){let{query:{definitions:t}}=e;return t.some((function(e){let{kind:t,operation:n}=e;return"OperationDefinition"===t&&"subscription"===n}))},P=i.ApolloLink.split(O,new y,i.ApolloLink.from([m,A,new q,w,C]));return new r.a({typeDefs:p,link:P,cache:new o.a(E(E({},h),{},{freezeResults:n})),resolvers:e,assumeImmutableResults:n,defaultOptions:{query:{fetchPolicy:d}}})}},WelT:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("C0ry"),n("orcL");var o=n("lx39"),r=n.n(o),i=n("iGym"),s=n("xjzK"),c=n.n(s),a=n("iPR/");function l(){let e;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=n.length?function(e){return e.reduce((function(t,n,o){let i=0;return Number.isInteger(n)?i=n:r()(n)&&(i=c()(n)),t+(e.length-o)*i}),0)}(n):Math.floor(1e15*Math.random()),new i.a(e)}function u(e){const t=[];for(let n=0;n<=3;n+=1){const n=new ArrayBuffer(4),o=new DataView(n);o.setUint32(0,e.randomNumber()),t.push(o.getUint8(0),o.getUint8(1),o.getUint8(2),o.getUint8(3))}return t}function h(){let{seeds:e=[],count:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=l(...e);return Array(t).fill(0).map((function(){return Object(a.a)({random:u(n)})}))}},hamy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("orcL");var o,r,i,s=n("NmEs"),c=n("2ibD");class a{static fetchRequestDetails(e,t){return c.a.get(e,{params:{request_id:t}})}static registerInterceptor(e,t){return a.interceptor=function(n){const[o,r,i]=a.callbackParams(n,e);return o&&t(r,i),n},c.a.interceptors.response.use(a.interceptor)}static removeInterceptor(){c.a.interceptors.response.eject(a.interceptor),a.interceptor=null}static callbackParams(e,t){var n;const o=e.headers&&e.headers["x-request-id"],r=null===(n=e.config)||void 0===n?void 0:n.url,i=e.headers&&Object(s.K)(e.headers["x-gitlab-from-cache"]);return[r!==t&&Boolean(o)&&!i,o,r]}}i=null,(r="interceptor")in(o=a)?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i}}]);
//# sourceMappingURL=465.c47ec097.chunk.js.map