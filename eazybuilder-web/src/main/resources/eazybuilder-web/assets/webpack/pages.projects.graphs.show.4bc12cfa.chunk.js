(this.webpackJsonp=this.webpackJsonp||[]).push([[320],{149:function(t,n,e){e("HVBj"),e("gjpc"),t.exports=e("CrRL")},"9RX+":function(t,n){t.exports=function(t){return t!=t}},CrRL:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"fetchChartData",(function(){return S}));var a={};e.r(a),e.d(a,"showChart",(function(){return T})),e.d(a,"parsedData",(function(){return E}));var i=e("jB52"),o=(e("orcL"),e("d+lS")),s=e.n(o),c=e("Tmea"),u=e.n(c),h=e("FkSe"),l=e("mlng"),d=e("yi8e"),f=e("bOix"),m=e("bO+A"),p=e("/lV4"),g=e("8WOL");const C=function(t){const n=new Date(t),e=n.getUTCMonth(),r=n.getUTCFullYear();return 0===e?"".concat(r):Object(f.p)(!0)[e]},b=function(t){const n=t.getUTCFullYear(),e=t.getUTCMonth(),r=t.getUTCDate();return"".concat(n,"-").concat("0".concat(e+1).slice(-2),"-").concat("0".concat(r).slice(-2))};function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function O(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach((function(n){D(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function D(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var x={components:{GlAreaChart:l.a,GlLoadingIcon:h.a,ResizableChartContainer:g.a},props:{endpoint:{type:String,required:!0},branch:{type:String,required:!0}},data:()=>({masterChart:null,individualCharts:[],svgs:{},masterChartHeight:264,individualChartHeight:216}),computed:O(O(O({},Object(d.f)(["chartData","loading"])),Object(d.d)(["showChart","parsedData"])),{},{masterChartData(){var t=this;const n={};return this.xAxisRange.forEach((function(e){n[e]=t.parsedData.total[e]||0})),[{name:Object(p.a)("Commits"),data:Object.entries(n)}]},masterChartOptions(){return O(O({},this.getCommonChartOptions(!0)),{},{yAxis:{name:Object(p.a)("Number of commits")},grid:{bottom:64,left:64,right:20,top:20}})},individualChartsData(){var t=this;return Object.keys(this.parsedData.byAuthorEmail).map((function(n){const e=t.parsedData.byAuthorEmail[n];return{name:e.name,email:n,commits:e.commits,dates:[{name:Object(p.a)("Commits"),data:t.xAxisRange.map((function(t){return[t,e.dates[t]||0]}))}]}})).sort((function(t,n){return n.commits-t.commits})).slice(0,100)},individualChartOptions(){return O(O({},this.getCommonChartOptions(!1)),{},{yAxis:{name:Object(p.a)("Commits"),max:this.individualChartYAxisMax},grid:{bottom:27,left:64,right:20,top:8}})},individualChartYAxisMax(){return this.individualChartsData.reduce((function(t,n){const e=n.dates[0].data.map((function(t){return t[1]}));return Math.max(t,...e)}),0)},xAxisRange(){const t=Object.keys(this.parsedData.total).sort((function(t,n){return new Date(t)-new Date(n)})),n=new Date(t[0]),e=new Date(t[t.length-1]);return Object(f.m)(n,e,b)},firstContributionDate(){return this.xAxisRange[0]},lastContributionDate(){return this.xAxisRange[this.xAxisRange.length-1]},charts(){return s()(this.individualCharts)}}),mounted(){this.fetchChartData(this.endpoint)},methods:O(O({},Object(d.c)(["fetchChartData"])),{},{getCommonChartOptions(t){return{xAxis:{type:"time",name:"",data:this.xAxisRange,axisLabel:{formatter:C,showMaxLabel:!1,showMinLabel:!1},boundaryGap:!1,splitNumber:t?24:18,minInterval:24192e5,min:this.firstContributionDate,max:this.lastContributionDate}}},setSvg(t){var n=this;return Object(m.a)(t).then((function(e){e&&n.$set(n.svgs,t,"path://".concat(e))})).catch((function(){}))},onMasterChartCreated(t){var n=this;this.masterChart=t,this.setSvg("scroll-handle").then((function(){n.masterChart.setOption({dataZoom:[{type:"slider",handleIcon:n.svgs["scroll-handle"]}]})})).catch((function(){})),this.masterChart.on("datazoom",u()(this.setIndividualChartsZoom,200))},onIndividualChartCreated(t){this.individualCharts.push(t)},setIndividualChartsZoom(t){this.charts.forEach((function(n){return n.setOption({dataZoom:{start:t.start,end:t.end,show:!1}},{lazyUpdate:!0})}))}})},_=e("tBpV"),j=Object(_.a)(x,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.loading?e("div",{staticClass:"contributors-loader text-center"},[e("gl-loading-icon",{attrs:{inline:!0,size:"xl"}})],1):t.showChart?e("div",{staticClass:"contributors-charts"},[e("h4",{staticClass:"gl-mb-2 gl-mt-5"},[t._v(t._s(t.__("Commits to"))+" "+t._s(t.branch))]),t._v(" "),e("span",[t._v(t._s(t.__("Excluding merge commits. Limited to 6,000 commits.")))]),t._v(" "),e("resizable-chart-container",{scopedSlots:t._u([{key:"default",fn:function(n){var r=n.width;return e("gl-area-chart",{staticClass:"gl-mb-5",attrs:{width:r,data:t.masterChartData,option:t.masterChartOptions,height:t.masterChartHeight},on:{created:t.onMasterChartCreated}})}}])}),t._v(" "),e("div",{staticClass:"row"},t._l(t.individualChartsData,(function(n,r){return e("div",{key:r,staticClass:"col-lg-6 col-12 gl-my-5"},[e("h4",{staticClass:"gl-mb-2 gl-mt-0"},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"gl-mb-3"},[t._v("\n          "+t._s(t.n__("%d commit","%d commits",n.commits))+" ("+t._s(n.email)+")\n        ")]),t._v(" "),e("resizable-chart-container",{scopedSlots:t._u([{key:"default",fn:function(r){var a=r.width;return e("gl-area-chart",{attrs:{width:a,data:n.dates,option:t.individualChartOptions,height:t.individualChartHeight},on:{created:t.onIndividualChartCreated}})}}],null,!0)})],1)})),0)],1):t._e()])}),[],!1,null,null,null).exports,A=e("XRO8"),w=e("2ibD"),y={fetchChartData:t=>w.a.get(t)};const S=function(t,n){let{commit:e}=t;return e("SET_LOADING_STATE",!0),y.fetchChartData(n).then((function(t){return t.data})).then((function(t){e("SET_CHART_DATA",t),e("SET_LOADING_STATE",!1)})).catch((function(){return Object(A.c)(Object(p.a)("An error occurred while loading chart data"))}))},T=function(t){return Boolean(!t.loading&&t.chartData)},E=function(t){const n={},e={};return t.chartData.forEach((function(t){let{date:r,author_name:a,author_email:i}=t;e[r]=e[r]?e[r]+1:1;const o=n[i];o?(o.commits+=1,o.dates[r]=o.dates[r]?o.dates[r]+1:1):n[i]={name:a,commits:1,dates:{[r]:1}}})),{total:e,byAuthorEmail:n}};e("EWC9");var P={SET_LOADING_STATE(t,n){t.loading=n},SET_CHART_DATA(t,n){Object.assign(t,{chartData:n})},SET_ACTIVE_BRANCH(t,n){Object.assign(t,{branch:n})}};i.default.use(d.b);const L=function(t){return new d.b.Store({actions:r,mutations:P,getters:a,state:(n=t,{loading:!1,chartData:null,branch:n})});var n};document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".js-contributors-graph");if(!t)return null;const{projectGraphPath:n,projectBranch:e,defaultBranch:r}=t.dataset,a=L(r);return new i.default({el:t,store:a,render:t=>t(j,{props:{endpoint:n,branch:e}})})}))},GY8p:function(t,n){t.exports=function(t,n,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(e(n,t[r]))return!0;return!1}},KZGt:function(t,n){t.exports=function(){}},P9pc:function(t,n){t.exports=function(t,n,e){for(var r=e-1,a=t.length;++r<a;)if(t[r]===n)return r;return-1}},QPL1:function(t,n,e){var r=e("pFYY"),a=e("KZGt"),i=e("1XSk"),o=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:a;t.exports=o},QPeP:function(t,n,e){var r=e("q+Dt");t.exports=function(t,n){return!!(null==t?0:t.length)&&r(t,n,0)>-1}},"bO+A":function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e("htNe"),a=e.n(r),i=e("2ibD");const o=a()((function(){return i.a.get(gon.sprite_icons).then((function(t){let{data:n}=t;return(new DOMParser).parseFromString(n,"text/xml")})).catch((function(t){throw o.cache.clear(),t}))})),s=function(t){return o().then((function(n){return n.querySelector("#".concat(t," path")).getAttribute("d")})).catch((function(){return null}))}},"d+lS":function(t,n,e){var r=e("dA+0");t.exports=function(t){return t&&t.length?r(t):[]}},"dA+0":function(t,n,e){var r=e("4O6w"),a=e("QPeP"),i=e("GY8p"),o=e("5PFN"),s=e("QPL1"),c=e("1XSk"),u=200;t.exports=function(t,n,e){var h=-1,l=a,d=t.length,f=!0,m=[],p=m;if(e)f=!1,l=i;else if(d>=u){var g=n?null:s(t);if(g)return c(g);f=!1,l=o,p=new r}else p=n?[]:m;t:for(;++h<d;){var C=t[h],b=n?n(C):C;if(C=e||0!==C?C:0,f&&b==b){for(var v=p.length;v--;)if(p[v]===b)continue t;n&&p.push(b),m.push(C)}else l(p,b,e)||(p!==m&&p.push(b),m.push(C))}return m}},"q+Dt":function(t,n,e){var r=e("sjqF"),a=e("9RX+"),i=e("P9pc");t.exports=function(t,n,e){return n==n?i(t,n,e):r(t,a,e)}},sjqF:function(t,n){t.exports=function(t,n,e,r){for(var a=t.length,i=e+(r?1:-1);r?i--:++i<a;)if(n(t[i],i,t))return i;return-1}}},[[149,1,0,23,2,3,4,5,25,118]]]);
//# sourceMappingURL=pages.projects.graphs.show.4bc12cfa.chunk.js.map