(this.webpackJsonp=this.webpackJsonp||[]).push([[61],{"++NP":function(e,t,i){"use strict";var n=i("XBTk"),a=i("4lAS"),s=i("BXQK"),r=i("Pyw5"),o=i.n(r);const l={name:"GlBanner",components:{GlButton:a.a,GlCard:s.a},props:{title:{type:String,required:!0},buttonText:{type:String,required:!0},buttonLink:{type:String,required:!1,default:null},svgPath:{type:String,required:!1,default:null},variant:{type:String,required:!1,default:n.j[0],validator:function(e){return n.j.includes(e)}}},computed:{isIntroducing:function(){return this.variant===n.j[1]}},methods:{handleClose:function(){this.$emit("close")}}};const c=o()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gl-card",{staticClass:"gl-px-8 gl-py-6 gl-line-height-20",class:{"gl-banner-introduction":e.isIntroducing},attrs:{"body-class":"gl-display-flex gl-p-0!"}},[e.svgPath?i("div",{staticClass:"gl-banner-illustration"},[i("img",{attrs:{src:e.svgPath,alt:"",role:"presentation"}})]):e._e(),e._v(" "),i("div",{staticClass:"gl-banner-content"},[i("h1",{staticClass:"gl-banner-title"},[e._v(e._s(e.title))]),e._v(" "),e._t("default"),e._v(" "),i("gl-button",{attrs:{variant:"confirm",category:"primary","data-testid":"gl-banner-primary-button",href:e.buttonLink},on:{click:function(t){return e.$emit("primary")}}},[e._v(e._s(e.buttonText))]),e._v(" "),e._t("actions")],2),e._v(" "),i("gl-button",{staticClass:"gl-banner-close",attrs:{variant:e.isIntroducing?"confirm":"default",category:"tertiary",size:"small",icon:"close","aria-label":"Close banner"},on:{click:e.handleClose}})],1)},staticRenderFns:[]},void 0,l,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=c},"708Y":function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissPipelineGraphCallout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"featureName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCalloutCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"featureName"},value:{kind:"Variable",name:{kind:"Name",value:"featureName"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:139}};i.loc.source={body:"mutation DismissPipelineGraphCallout($featureName: String!) {\n  userCalloutCreate(input: { featureName: $featureName }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.DismissPipelineGraphCallout=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"DismissPipelineGraphCallout")},"A/CH":function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"LinkedPipelineData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Pipeline"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"status"},name:{kind:"Name",value:"detailedStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sourceJob"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"project"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getPipelineDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pipeline"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"complete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"usesNeeds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downstream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LinkedPipelineData"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"upstream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LinkedPipelineData"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"status"},name:{kind:"Name",value:"detailedStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"status"},name:{kind:"Name",value:"detailedStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"jobs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scheduledAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"needs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"status"},name:{kind:"Name",value:"detailedStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tooltip"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasDetails"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:2019}};i.loc.source={body:"fragment LinkedPipelineData on Pipeline {\n  __typename\n  id\n  iid\n  path\n  status: detailedStatus {\n    __typename\n    group\n    label\n    icon\n  }\n  sourceJob {\n    __typename\n    name\n  }\n  project {\n    __typename\n    name\n    fullPath\n  }\n}\n\nquery getPipelineDetails($projectPath: ID!, $iid: ID!) {\n  project(fullPath: $projectPath) {\n    __typename\n    pipeline(iid: $iid) {\n      __typename\n      id\n      iid\n      complete\n      usesNeeds\n      downstream {\n        __typename\n        nodes {\n          ...LinkedPipelineData\n        }\n      }\n      upstream {\n        ...LinkedPipelineData\n      }\n      stages {\n        __typename\n        nodes {\n          __typename\n          name\n          status: detailedStatus {\n            __typename\n            action {\n              __typename\n              icon\n              path\n              title\n            }\n          }\n          groups {\n            __typename\n            nodes {\n              __typename\n              status: detailedStatus {\n                __typename\n                label\n                group\n                icon\n              }\n              name\n              size\n              jobs {\n                __typename\n                nodes {\n                  __typename\n                  name\n                  scheduledAt\n                  needs {\n                    __typename\n                    nodes {\n                      __typename\n                      name\n                    }\n                  }\n                  status: detailedStatus {\n                    __typename\n                    icon\n                    tooltip\n                    hasDetails\n                    detailsPath\n                    group\n                    action {\n                      __typename\n                      buttonTitle\n                      icon\n                      path\n                      title\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getPipelineDetails=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getPipelineDetails")},Arra:function(e,t,i){"use strict";i.r(t);var n={};i.r(n),i.d(n,"fetchSummary",(function(){return Kt})),i.d(n,"fetchTestSuite",(function(){return Xt})),i.d(n,"setPage",(function(){return Yt})),i.d(n,"setSelectedSuiteIndex",(function(){return Zt})),i.d(n,"removeSelectedSuiteIndex",(function(){return ei})),i.d(n,"toggleLoading",(function(){return ti}));var a={};i.r(a),i.d(a,"getTestSuites",(function(){return si})),i.d(a,"getSelectedSuite",(function(){return ri})),i.d(a,"getSuiteTests",(function(){return oi})),i.d(a,"getSuiteTestCount",(function(){return li}));i("jaBk");var s=i("jB52"),r=i("XRO8"),o=i("NmEs"),l=i("/lV4"),c=i("0KyK"),d=i("8RpP"),u=i.n(d),p=i("G3fq"),m=i.n(p),h=i("FkSe"),g={methods:{getExpandedPipelines(e){var t=this;this.mediator.service.getPipeline(this.mediator.getExpandedParameters()).then((function(i){t.mediator.store.toggleLoading(e),t.mediator.store.storePipeline(i.data),t.mediator.poll.enable({data:t.mediator.getExpandedParameters()})})).catch((function(){t.mediator.store.toggleLoading(e),Object(r.c)(Object(l.a)("An error occurred while fetching the pipeline."))}))},clickPipeline(e,t,i){e.isExpanded?(this.mediator.store[i](e),this.mediator.poll.stop(),this.mediator.poll.enable({data:this.mediator.getExpandedParameters()})):(this.mediator.store[t](e),this.mediator.store.toggleLoading(e),this.mediator.poll.stop(),this.getExpandedPipelines(e))},resetDownstreamPipelines(e,t){this.mediator.store.resetTriggeredPipelines(e,t)},clickUpstreamPipeline(e){this.clickPipeline(e,"openPipeline","closePipeline")},clickDownstreamPipeline(e){this.clickPipeline(e,"openPipeline","closePipeline")},requestRefreshPipelineGraph(){this.mediator.refreshPipeline().catch((function(){return Object(r.c)(Object(l.a)("An error occurred while making the request."))}))}}},v=i("71Sp"),f=i("pq95"),b={components:{LinkedPipeline:i("B045").a},props:{columnTitle:{type:String,required:!0},linkedPipelines:{type:Array,required:!0},type:{type:String,required:!0},projectId:{type:Number,required:!0}},computed:{columnClass(){return"graph-position-".concat(this.graphPosition," ").concat({right:"gl-ml-11",left:"gl-mr-7"}[this.graphPosition])},graphPosition(){return this.isUpstream?"left":"right"},isExpanded(){var e;return(null===(e=this.pipeline)||void 0===e?void 0:e.isExpanded)||!1},isUpstream(){return this.type===f.k}},errorCaptured(e,t,i){Object(v.d)("linked_pipelines_column_legacy","error: ".concat(e,", info: ").concat(i))},methods:{onPipelineClick(e,t,i){this.$emit("linkedPipelineClick",t,i,e)},onDownstreamHovered(e){this.$emit("downstreamHovered",e)},onPipelineExpandToggle(e,t){this.isUpstream||this.$emit("pipelineExpandToggle",e,t)}}},y=i("tBpV"),k=Object(y.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"stage-column linked-pipelines-column",class:e.columnClass},[i("div",{staticClass:"stage-name linked-pipelines-column-title"},[e._v(e._s(e.columnTitle))]),e._v(" "),e.isUpstream?i("div",{staticClass:"cross-project-triangle"}):e._e(),e._v(" "),i("ul",e._l(e.linkedPipelines,(function(t,n){return i("li",{key:t.id},[i("linked-pipeline",{class:{active:t.isExpanded,"left-connector":t.isExpanded&&"left"===e.graphPosition},attrs:{pipeline:t,"column-title":e.columnTitle,"project-id":e.projectId,type:e.type,expanded:e.isExpanded},on:{pipelineClicked:function(i){return e.onPipelineClick(i,t,n)},downstreamHovered:e.onDownstreamHovered,pipelineExpandToggle:e.onPipelineExpandToggle}})],1)})),0)])}),[],!1,null,null,null).exports,_=i("Q33P"),w=i.n(_),S={props:{hasUpstream:{type:Boolean,required:!1,default:!1}},methods:{buildConnnectorClass(e){return 0!==e||this.isFirstColumn&&!this.hasUpstream?"":"left-connector"}}},j=i("jltb"),P=i("S4Ah"),O={components:{JobItem:i("PvM2").a,JobGroupDropdown:P.a,ActionComponent:j.a},mixins:[S],props:{title:{type:String,required:!0},groups:{type:Array,required:!0},isFirstColumn:{type:Boolean,required:!1,default:!1},stageConnectorClass:{type:String,required:!1,default:""},action:{type:Object,required:!1,default:function(){return{}}},jobHovered:{type:String,required:!1,default:""},pipelineExpanded:{type:Object,required:!1,default:function(){return{}}}},computed:{hasAction(){return!w()(this.action)}},errorCaptured(e,t,i){Object(v.d)("stage_column_component_legacy","error: ".concat(e,", info: ").concat(i))},methods:{groupId:e=>"ci-badge-".concat(m()(e.name)),pipelineActionRequestComplete(){this.$emit("refreshPipelineGraph")}}},C=Object(y.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"stage-column",class:e.stageConnectorClass},[i("div",{staticClass:"stage-name position-relative",attrs:{"data-testid":"stage-column-title"}},[e._v("\n    "+e._s(e.title)+"\n    "),e.hasAction?i("action-component",{staticClass:"js-stage-action stage-action rounded",attrs:{"action-icon":e.action.icon,"tooltip-text":e.action.title,link:e.action.path},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}}):e._e()],1),e._v(" "),i("div",{staticClass:"builds-container"},[i("ul",e._l(e.groups,(function(t,n){return i("li",{key:t.id,staticClass:"build",class:e.buildConnnectorClass(n),attrs:{id:e.groupId(t)}},[i("div",{staticClass:"curve"}),e._v(" "),1===t.size?i("job-item",{attrs:{job:t.jobs[0],"job-hovered":e.jobHovered,"pipeline-expanded":e.pipelineExpanded,"css-class-job-name":"build-content"},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}}):e._e(),e._v(" "),t.size>1?i("job-group-dropdown",{attrs:{group:t},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}}):e._e()],1)})),0)])])}),[],!1,null,null,null).exports,x={name:"PipelineGraphLegacy",components:{GlLoadingIcon:h.a,LinkedPipelinesColumnLegacy:k,StageColumnComponentLegacy:C},mixins:[g],props:{isLoading:{type:Boolean,required:!0},pipeline:{type:Object,required:!0},isLinkedPipeline:{type:Boolean,required:!1,default:!1},mediator:{type:Object,required:!0},type:{type:String,required:!1,default:f.f}},upstream:f.k,downstream:f.a,data:()=>({downstreamMarginTop:null,jobName:null,pipelineExpanded:{jobName:"",expanded:!1}}),computed:{graph(){var e;return null===(e=this.pipeline.details)||void 0===e?void 0:e.stages},hasUpstream(){return this.type!==this.$options.downstream&&this.upstreamPipelines&&null!==this.pipeline.triggered_by},upstreamPipelines(){return this.pipeline.triggered_by},hasDownstream(){return this.type!==this.$options.upstream&&this.downstreamPipelines&&this.pipeline.triggered.length>0},downstreamPipelines(){return this.pipeline.triggered},expandedUpstream(){return this.pipeline.triggered_by&&Array.isArray(this.pipeline.triggered_by)&&this.pipeline.triggered_by.find((function(e){return e.isExpanded}))},expandedDownstream(){return this.pipeline.triggered&&this.pipeline.triggered.find((function(e){return e.isExpanded}))},pipelineTypeUpstream(){return this.type!==this.$options.downstream&&this.expandedUpstream},pipelineTypeDownstream(){return this.type!==this.$options.upstream&&this.expandedDownstream},pipelineProjectId(){return this.pipeline.project.id}},errorCaptured(e,t,i){Object(v.d)(this.$options.name,"error: ".concat(e,", info: ").concat(i))},methods:{capitalizeStageName(e){const t=m()(e);return u()(t)},isFirstColumn:e=>0===e,stageConnectorClass(e,t){let i;return this.isFirstColumn(e)&&1===t.groups.length?i="no-margin":e>0&&(i="left-margin"),i},refreshPipelineGraph(){this.$emit("refreshPipelineGraph")},shouldAddRightMargin(e){return!(e===this.graph.length-1)},handleClickedDownstream(e,t,i){var n;this.downstreamMarginTop=this.calculateMarginTop(i,15),(null===(n=this.expandedDownstream)||void 0===n?void 0:n.id)!==e.id&&this.$emit("onResetDownstream",this.pipeline,e),this.$emit("onClickDownstreamPipeline",e)},calculateMarginTop:(e,t)=>"".concat(e.offsetTop-e.offsetParent.offsetTop-t,"px"),hasOnlyOneJob:e=>1===e.groups.length,hasUpstreamColumn(e){return 0===e&&this.hasUpstream},setJob(e){this.jobName=e},setPipelineExpanded(e,t){this.pipelineExpanded=t?{jobName:e,expanded:t}:{expanded:t,jobName:""}}}},N=Object(y.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"build-content middle-block js-pipeline-graph"},[i("div",{staticClass:"pipeline-visualization pipeline-graph",class:{"pipeline-tab-content":!e.isLinkedPipeline}},[i("div",{staticClass:"gl-w-full"},[i("div",{staticClass:"container-fluid container-limited"},[e.isLoading?i("gl-loading-icon",{staticClass:"m-auto",attrs:{size:"lg"}}):e._e(),e._v(" "),e.pipelineTypeUpstream?i("pipeline-graph-legacy",{staticClass:"d-inline-block upstream-pipeline",class:"js-upstream-pipeline-"+e.expandedUpstream.id,attrs:{type:e.$options.upstream,"is-loading":!1,pipeline:e.expandedUpstream,"is-linked-pipeline":!0,mediator:e.mediator},on:{onClickUpstreamPipeline:e.clickUpstreamPipeline,refreshPipelineGraph:e.requestRefreshPipelineGraph}}):e._e(),e._v(" "),e.hasUpstream?i("linked-pipelines-column-legacy",{attrs:{type:e.$options.upstream,"linked-pipelines":e.upstreamPipelines,"column-title":e.__("Upstream"),"project-id":e.pipelineProjectId},on:{linkedPipelineClick:function(t){return e.$emit("onClickUpstreamPipeline",t)}}}):e._e(),e._v(" "),e.isLoading?e._e():i("ul",{staticClass:"stage-column-list align-top",class:{"inline js-has-linked-pipelines":e.hasDownstream||e.hasUpstream}},e._l(e.graph,(function(t,n){return i("stage-column-component-legacy",{key:t.name,class:{"has-upstream gl-ml-11":e.hasUpstreamColumn(n),"has-only-one-job":e.hasOnlyOneJob(t),"gl-mr-26":e.shouldAddRightMargin(n)},attrs:{title:e.capitalizeStageName(t.name),groups:t.groups,"stage-connector-class":e.stageConnectorClass(n,t),"is-first-column":e.isFirstColumn(n),"has-upstream":e.hasUpstream,action:t.status.action,"job-hovered":e.jobName,"pipeline-expanded":e.pipelineExpanded},on:{refreshPipelineGraph:e.refreshPipelineGraph}})})),1),e._v(" "),e.hasDownstream?i("linked-pipelines-column-legacy",{attrs:{type:e.$options.downstream,"linked-pipelines":e.downstreamPipelines,"column-title":e.__("Downstream"),"project-id":e.pipelineProjectId},on:{linkedPipelineClick:e.handleClickedDownstream,downstreamHovered:e.setJob,pipelineExpandToggle:e.setPipelineExpanded}}):e._e(),e._v(" "),e.pipelineTypeDownstream?i("pipeline-graph-legacy",{staticClass:"d-inline-block",class:"js-downstream-pipeline-"+e.expandedDownstream.id,style:{"margin-top":e.downstreamMarginTop},attrs:{type:e.$options.downstream,"is-loading":!1,pipeline:e.expandedDownstream,"is-linked-pipeline":!0,mediator:e.mediator},on:{onClickDownstreamPipeline:e.clickDownstreamPipeline,refreshPipelineGraph:e.requestRefreshPipelineGraph}}):e._e()],1)])])])}),[],!1,null,null,null).exports,T=i("yi8e"),E=i("dsLq"),D=i("qLpH");var I={i18n:{noTestsButton:Object(l.e)("TestReports|Learn more about pipeline test reports"),noTestsDescription:Object(l.e)("TestReports|No test cases were found in the test report."),noTestsTitle:Object(l.e)("TestReports|There are no tests to display"),noReportsButton:Object(l.e)("TestReports|Learn how to upload pipeline test reports"),noReportsDescription:Object(l.e)("TestReports|You can configure your job to use unit test reports, and GitLab displays a report here and in the related merge request."),noReportsTitle:Object(l.e)("TestReports|There are no test reports for this pipeline")},components:{GlEmptyState:E.a},inject:{emptyStateImagePath:{default:""},hasTestReport:{default:!1}},computed:{emptyStateText(){return this.hasTestReport?{button:this.$options.i18n.noTestsButton,description:this.$options.i18n.noTestsDescription,title:this.$options.i18n.noTestsTitle}:{button:this.$options.i18n.noReportsButton,description:this.$options.i18n.noReportsDescription,title:this.$options.i18n.noReportsTitle}},testReportDocPath:()=>Object(D.a)("ci/unit_test_reports")}},L=Object(y.a)(I,(function(){var e=this.$createElement;return(this._self._c||e)("gl-empty-state",{attrs:{title:this.emptyStateText.title,description:this.emptyStateText.description,"svg-path":this.emptyStateImagePath,"primary-button-link":this.testReportDocPath,"primary-button-text":this.emptyStateText.button}})}),[],!1,null,null,null).exports,F=i("s1D3"),A=i("gMZC"),q=i.n(A);function $(e){return function(e){if(Array.isArray(e))return e}(e)||R(e)||B(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e){return function(e){if(Array.isArray(e))return V(e)}(e)||R(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function B(e,t){if(e){if("string"==typeof e)return V(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var U=q()((function(e,t){var i=$(t),n=i[0],a=i.slice(1),s="function"==typeof e?e:function(){return e};return[n].concat(G(a.flatMap((function(e){return[s(),e]}),a)))})),M=(q()((function(e,t,i){return[].concat(G(i.slice(0,e)),[t],G(i.slice(e)))})),i("Pyw5"));const H={functional:!0,props:{text:{type:String,required:!0},symbols:{type:Array,required:!1,default:function(){return["/"]}}},render:function(e,t){var i=t.props,n=i.symbols,a=i.text,s=function(e,t){var i=[],n=0;if(0===t.length)return[t];for(var a=0;a<t.length;){for(var s=!1,r=0;r<e.length;r+=1){var o=e[r];if(o&&(s=t.slice(a,a+o.length)===o)){var l=a+o.length,c=t.slice(n,l);i.push(c),a=n=l;break}}s||(a+=1)}var d=t.slice(n);return d&&i.push(d),i}(n,null!=a?a:""),r=U((function(){return e("wbr")}),s);return e("span",{class:"text-break"},r)}};var J=i.n(M)()({},void 0,H,void 0,void 0,void 0,!1,void 0,void 0,void 0),z=i("MV2A"),W=i("4lAS"),Q=i("qVG1"),K=i("LLbv"),X=i("XqDB"),Y=i("Lzak"),Z=i("1cpz"),ee={name:"TestCaseDetails",components:{CodeBlock:i("OgoU").a,GlBadge:Y.a,GlFriendlyWrap:J,GlLink:z.a,GlModal:Z.a},props:{modalId:{type:String,required:!0},testCase:{type:Object,required:!0}},computed:{failureHistoryMessage(){return this.hasRecentFailures?Object(l.f)(Object(l.d)("Reports|Failed %{count} time in %{baseBranch} in the last 14 days","Reports|Failed %{count} times in %{baseBranch} in the last 14 days",this.recentFailures.count),{count:this.recentFailures.count,baseBranch:this.recentFailures.base_branch}):null},hasRecentFailures(){return Boolean(this.recentFailures)},recentFailures(){return this.testCase.recent_failures}},text:{name:Object(l.a)("Name"),duration:Object(l.a)("Execution time"),history:Object(l.a)("History"),trace:Object(l.a)("System output"),attachment:Object(l.e)("TestReports|Attachment")},modalCloseButton:{text:Object(l.a)("Close"),attributes:[{variant:"info"}]}},te=Object(y.a)(ee,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gl-modal",{attrs:{"modal-id":e.modalId,title:e.testCase.classname,"action-primary":e.$options.modalCloseButton}},[i("div",{staticClass:"gl-display-flex gl-flex-wrap gl-mx-n4 gl-my-3"},[i("strong",{staticClass:"gl-text-right col-sm-3"},[e._v(e._s(e.$options.text.name))]),e._v(" "),i("div",{staticClass:"col-sm-9",attrs:{"data-testid":"test-case-name"}},[e._v("\n      "+e._s(e.testCase.name)+"\n    ")])]),e._v(" "),i("div",{staticClass:"gl-display-flex gl-flex-wrap gl-mx-n4 gl-my-3"},[i("strong",{staticClass:"gl-text-right col-sm-3"},[e._v(e._s(e.$options.text.duration))]),e._v(" "),i("div",{staticClass:"col-sm-9",attrs:{"data-testid":"test-case-duration"}},[e._v("\n      "+e._s(e.testCase.formattedTime)+"\n    ")])]),e._v(" "),e.testCase.recent_failures?i("div",{staticClass:"gl-display-flex gl-flex-wrap gl-mx-n4 gl-my-3"},[i("strong",{staticClass:"gl-text-right col-sm-3"},[e._v(e._s(e.$options.text.history))]),e._v(" "),i("div",{staticClass:"col-sm-9",attrs:{"data-testid":"test-case-recent-failures"}},[i("gl-badge",{attrs:{variant:"warning"}},[e._v(e._s(e.failureHistoryMessage))])],1)]):e._e(),e._v(" "),e.testCase.attachment_url?i("div",{staticClass:"gl-display-flex gl-flex-wrap gl-mx-n4 gl-my-3"},[i("strong",{staticClass:"gl-text-right col-sm-3"},[e._v(e._s(e.$options.text.attachment))]),e._v(" "),i("gl-link",{staticClass:"col-sm-9",attrs:{href:e.testCase.attachment_url,target:"_blank","data-testid":"test-case-attachment-url"}},[i("gl-friendly-wrap",{attrs:{symbols:e.$options.wrapSymbols,text:e.testCase.attachment_url}})],1)],1):e._e(),e._v(" "),e.testCase.system_output?i("div",{staticClass:"gl-display-flex gl-flex-wrap gl-mx-n4 gl-my-3",attrs:{"data-testid":"test-case-trace"}},[i("strong",{staticClass:"gl-text-right col-sm-3"},[e._v(e._s(e.$options.text.trace))]),e._v(" "),i("div",{staticClass:"col-sm-9"},[i("code-block",{attrs:{code:e.testCase.system_output}})],1)]):e._e()])}),[],!1,null,null,null).exports;function ie(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ne(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(i),!0).forEach((function(t){ae(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ie(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var se={name:"TestsSuiteTable",components:{GlIcon:F.a,GlFriendlyWrap:J,GlLink:z.a,GlButton:W.a,GlPagination:Q.a,TestCaseDetails:te},directives:{GlTooltip:K.a,GlModalDirective:X.a},props:{heading:{type:String,required:!1,default:Object(l.a)("Tests")}},computed:ne(ne(ne({},Object(T.f)(["pageInfo"])),Object(T.d)(["getSuiteTests","getSuiteTestCount"])),{},{hasSuites(){return this.getSuiteTests.length>0}}),methods:ne({},Object(T.c)(["setPage"])),wrapSymbols:["::","#",".","_","-","/","\\"]},re=Object(y.a)(se,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row gl-mt-3"},[i("div",{staticClass:"col-12"},[i("h4",[e._v(e._s(e.heading))])])]),e._v(" "),e.hasSuites?i("div",{staticClass:"test-reports-table gl-mb-3 js-test-cases-table"},[i("div",{staticClass:"gl-responsive-table-row table-row-header font-weight-bold fgray",attrs:{role:"row"}},[i("div",{staticClass:"table-section section-20",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Suite"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-40",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Name"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Filename"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Status"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Duration"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Details"))+"\n      ")])]),e._v(" "),e._l(e.getSuiteTests,(function(t,n){return i("div",{key:n,staticClass:"gl-responsive-table-row rounded align-items-md-start mt-xs-3 js-case-row"},[i("div",{staticClass:"table-section section-20 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.__("Suite")))]),e._v(" "),i("div",{staticClass:"table-mobile-content gl-md-pr-2 gl-overflow-wrap-break"},[i("gl-friendly-wrap",{attrs:{symbols:e.$options.wrapSymbols,text:t.classname}})],1)]),e._v(" "),i("div",{staticClass:"table-section section-40 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.__("Name")))]),e._v(" "),i("div",{staticClass:"table-mobile-content gl-md-pr-2 gl-overflow-wrap-break"},[i("gl-friendly-wrap",{attrs:{symbols:e.$options.wrapSymbols,text:t.name}})],1)]),e._v(" "),i("div",{staticClass:"table-section section-10 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.__("Filename")))]),e._v(" "),i("div",{staticClass:"table-mobile-content gl-md-pr-2 gl-overflow-wrap-break"},[t.file?i("gl-link",{attrs:{href:t.filePath,target:"_blank"}},[i("gl-friendly-wrap",{attrs:{symbols:e.$options.wrapSymbols,text:t.file}})],1):e._e(),e._v(" "),t.file?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{size:"small",category:"tertiary",icon:"copy-to-clipboard",title:e.__("Copy to clipboard"),"data-clipboard-text":t.file,"aria-label":e.__("Copy to clipboard")}}):e._e()],1)]),e._v(" "),i("div",{staticClass:"table-section section-10 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.__("Status")))]),e._v(" "),i("div",{staticClass:"table-mobile-content text-center"},[i("div",{staticClass:"ci-status-icon d-flex align-items-center justify-content-end justify-content-md-center",class:"ci-status-icon-"+t.status},[i("gl-icon",{attrs:{size:24,name:t.icon}})],1)])]),e._v(" "),i("div",{staticClass:"table-section section-10 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Duration"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content pr-sm-1"},[e._v("\n          "+e._s(t.formattedTime)+"\n        ")])]),e._v(" "),i("div",{staticClass:"table-section section-10 section-wrap"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.__("Details")))]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[i("gl-button",{directives:[{name:"gl-modal-directive",rawName:"v-gl-modal-directive",value:"test-case-details-"+n,expression:"`test-case-details-${index}`"}]},[e._v(e._s(e.__("View details")))]),e._v(" "),i("test-case-details",{attrs:{"modal-id":"test-case-details-"+n,"test-case":t}})],1)])])})),e._v(" "),i("gl-pagination",{staticClass:"gl-display-flex gl-justify-content-center",attrs:{"per-page":e.pageInfo.perPage,"total-items":e.getSuiteTestCount},on:{input:e.setPage},model:{value:e.pageInfo.page,callback:function(t){e.$set(e.pageInfo,"page",t)},expression:"pageInfo.page"}})],2):i("div",[i("p",{staticClass:"js-no-test-cases"},[e._v(e._s(e.s__("TestReports|There are no test cases to display.")))])])])}),[],!1,null,null,null).exports,oe=(i("MoW5"),i("J6+Z")),le=(i("S26F"),i("k4Ha"));function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function de(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(i),!0).forEach((function(t){ue(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pe(e){switch(e){case le.s.SUCCESS:return"status_success";case le.s.FAILED:return"status_failed";case le.s.ERROR:return"status_warning";case le.s.SKIPPED:return"status_skipped";case le.s.UNKNOWN:default:return"status_notfound"}}const me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<1){const t=1e3*e;return Object(l.f)(Object(l.a)("%{milliseconds}ms"),{milliseconds:t.toFixed(2)})}return Object(l.f)(Object(l.a)("%{seconds}s"),{seconds:e.toFixed(2)})},he=function(e){return de(de({},e),{},{icon:pe(e.status),formattedTime:me(e.execution_time)})};var ge={name:"TestSummary",components:{GlButton:W.a,GlProgressBar:oe.a},props:{report:{type:Object,required:!0},showBack:{type:Boolean,required:!1,default:!1}},computed:{heading(){return this.report.name||Object(l.a)("Summary")},successPercentage(){const e=this.report.total_count-this.report.skipped_count;return e>0?Number((this.report.success_count/e*100||0).toFixed(2)):0},formattedDuration(){return me(this.report.total_time)},progressBarVariant(){return this.successPercentage<33?"danger":this.successPercentage>=33&&this.successPercentage<66?"warning":this.successPercentage>=66&&this.successPercentage<90?"primary":"success"}},methods:{onBackClick(){this.$emit("on-back-click")}}},ve=Object(y.a)(ge,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 d-flex gl-mt-3 align-items-center"},[e.showBack?i("gl-button",{staticClass:"gl-mr-3 js-back-button",attrs:{size:"small",icon:"angle-left","aria-label":e.__("Go back")},on:{click:e.onBackClick}}):e._e(),e._v(" "),i("h4",[e._v(e._s(e.heading))])],1)]),e._v(" "),i("div",{staticClass:"row mt-2"},[i("div",{staticClass:"col-4 col-md"},[i("span",{staticClass:"js-total-tests"},[e._v(e._s(e.sprintf(e.s__("TestReports|%{count} tests"),{count:e.report.total_count})))])]),e._v(" "),i("div",{staticClass:"col-4 col-md text-center text-md-center"},[i("span",{staticClass:"js-failed-tests"},[e._v(e._s(e.sprintf(e.s__("TestReports|%{count} failures"),{count:e.report.failed_count})))])]),e._v(" "),i("div",{staticClass:"col-4 col-md text-right text-md-center"},[i("span",{staticClass:"js-errored-tests"},[e._v(e._s(e.sprintf(e.s__("TestReports|%{count} errors"),{count:e.report.error_count})))])]),e._v(" "),i("div",{staticClass:"col-6 mt-3 col-md mt-md-0 text-md-center"},[i("span",{staticClass:"js-success-rate"},[e._v(e._s(e.sprintf(e.s__("TestReports|%{rate}%{sign} success rate"),{rate:e.successPercentage,sign:"%"})))])]),e._v(" "),i("div",{staticClass:"col-6 mt-3 col-md mt-md-0 text-right"},[i("span",{staticClass:"js-duration"},[e._v(e._s(e.formattedDuration))])])]),e._v(" "),i("div",{staticClass:"row mt-3"},[i("div",{staticClass:"col-12"},[i("gl-progress-bar",{attrs:{value:e.successPercentage,variant:e.progressBarVariant,height:"10px"}})],1)])])}),[],!1,null,null,null).exports;function fe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function be(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(i),!0).forEach((function(t){ye(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ke={name:"TestsSummaryTable",components:{GlIcon:F.a},directives:{GlTooltip:K.a},props:{heading:{type:String,required:!1,default:Object(l.e)("TestReports|Jobs")}},computed:be(be({},Object(T.d)(["getTestSuites"])),{},{hasSuites(){return this.getTestSuites.length>0}}),methods:{tableRowClick(e){this.$emit("row-click",e)}}},_e=Object(y.a)(ke,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row gl-mt-3"},[i("div",{staticClass:"col-12"},[i("h4",[e._v(e._s(e.heading))])])]),e._v(" "),e.hasSuites?i("div",{staticClass:"test-reports-table gl-mb-3 js-test-suites-table"},[i("div",{staticClass:"gl-responsive-table-row table-row-header font-weight-bold",attrs:{role:"row"}},[i("div",{staticClass:"table-section section-25 pl-3",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Job"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-25",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Duration"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Failed"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Errors"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Skipped"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Passed"))+"\n      ")]),e._v(" "),i("div",{staticClass:"table-section section-10 pr-3 text-right",attrs:{role:"rowheader"}},[e._v("\n        "+e._s(e.__("Total"))+"\n      ")])]),e._v(" "),e._l(e.getTestSuites,(function(t,n){return i("div",{key:n,staticClass:"gl-responsive-table-row test-reports-summary-row rounded js-suite-row",class:{"gl-responsive-table-row-clickable cursor-pointer":!t.suite_error},attrs:{role:"row"},on:{click:function(t){return e.tableRowClick(n)}}},[i("div",{staticClass:"table-section section-25"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Suite"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content underline cgray pl-3"},[e._v("\n          "+e._s(t.name)+"\n          "),t.suite_error?i("gl-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"suiteErrorIcon",refInFor:!0,staticClass:"vertical-align-middle",attrs:{name:"error",title:t.suite_error}}):e._e()],1)]),e._v(" "),i("div",{staticClass:"table-section section-25"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Duration"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content text-md-left"},[e._v("\n          "+e._s(t.formattedTime)+"\n        ")])]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Failed"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e._v(e._s(t.failed_count))])]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Errors"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e._v(e._s(t.error_count))])]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Skipped"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e._v(e._s(t.skipped_count))])]),e._v(" "),i("div",{staticClass:"table-section section-10 text-center"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Passed"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e._v(e._s(t.success_count))])]),e._v(" "),i("div",{staticClass:"table-section section-10 text-right pr-md-3"},[i("div",{staticClass:"table-mobile-header font-weight-bold",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(e.__("Total"))+"\n        ")]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e._v(e._s(t.total_count))])])])}))],2):i("div",[i("p",{staticClass:"js-no-tests-suites"},[e._v(e._s(e.s__("TestReports|There are no test suites to show.")))])])])}),[],!1,null,null,null).exports;function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Se(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?we(Object(i),!0).forEach((function(t){je(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Pe={name:"TestReports",components:{EmptyState:L,GlLoadingIcon:h.a,TestSuiteTable:re,TestSummary:ve,TestSummaryTable:_e},computed:Se(Se(Se({},Object(T.f)(["isLoading","selectedSuiteIndex","testReports"])),Object(T.d)(["getSelectedSuite"])),{},{showSuite(){return null!==this.selectedSuiteIndex},showTests(){const{test_suites:e=[]}=this.testReports;return e.length>0}}),created(){this.fetchSummary()},methods:Se(Se({},Object(T.c)(["fetchTestSuite","fetchSummary","setSelectedSuiteIndex","removeSelectedSuiteIndex"])),{},{summaryBackClick(){this.removeSelectedSuiteIndex()},summaryTableRowClick(e){this.setSelectedSuiteIndex(e),this.fetchTestSuite(e)},beforeEnterTransition(){document.documentElement.style.overflowX="hidden"},afterLeaveTransition(){document.documentElement.style.overflowX=""}})},Oe=Object(y.a)(Pe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isLoading?i("div",[i("gl-loading-icon",{staticClass:"gl-mt-3",attrs:{size:"lg"}})],1):!e.isLoading&&e.showTests?i("div",{ref:"container",staticClass:"position-relative",attrs:{"data-testid":"tests-detail"}},[i("transition",{attrs:{name:"slide"},on:{"before-enter":e.beforeEnterTransition,"after-leave":e.afterLeaveTransition}},[e.showSuite?i("div",{key:"detail",staticClass:"w-100 slide-enter-to-element"},[i("test-summary",{attrs:{report:e.getSelectedSuite,"show-back":""},on:{"on-back-click":e.summaryBackClick}}),e._v(" "),i("test-suite-table")],1):i("div",{key:"summary",staticClass:"w-100 slide-enter-from-element"},[i("test-summary",{attrs:{report:e.testReports}}),e._v(" "),i("test-summary-table",{on:{"row-click":e.summaryTableRowClick}})],1)])],1):i("empty-state")}),[],!1,null,null,null).exports,Ce=i("GiFX"),xe=(i("eTVF"),i("Z/0p"),i("dsWN")),Ne=i("30su"),Te=i("5v28"),Ee=i("uwV0"),De=i.n(Ee),Ie=i("kNKy");const Le="dag-highlighted";var Fe={name:"DagAnnotations",components:{GlButton:W.a},props:{annotations:{type:Object,required:!0}},data:()=>({showList:!0}),computed:{linkText(){return this.showList?Object(l.a)("Hide list"):Object(l.a)("Show list")},shouldShowLink(){return Object.keys(this.annotations).length>1},wrapperClasses:()=>["gl-display-flex","gl-flex-direction-column","gl-fixed","gl-right-1","gl-top-66vh","gl-w-max-content","gl-px-5","gl-py-4","gl-rounded-base","gl-bg-white"].join(" ")},methods:{toggleList(){this.showList=!this.showList}}},Ae=Object(y.a)(Fe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.wrapperClasses},[e.showList?i("div",e._l(e.annotations,(function(t){return i("div",{key:t.uid,staticClass:"gl-display-flex gl-align-items-center"},[i("div",{staticClass:"gl-w-6 gl-h-5",style:{background:"linear-gradient(0.25turn, "+t.source.color+" 40%, "+t.target.color+" 60%)"},attrs:{"data-testid":"dag-color-block"}}),e._v(" "),i("div",{staticClass:"gl-px-2 gl-font-base gl-align-items-center",attrs:{"data-testid":"dag-note-text"}},[e._v("\n        "+e._s(t.source.name)+" → "+e._s(t.target.name)+"\n      ")])])})),0):e._e(),e._v(" "),e.shouldShowLink?i("gl-button",{attrs:{variant:"link"},on:{click:e.toggleList}},[e._v(e._s(e.linkText))]):e._e()],1)}),[],!1,null,null,null).exports,qe=i("o4PY"),$e=i.n(qe),Ge=i("LVcV"),Re=i("pMmk");i("QzWB"),i("TXLM"),i("gNBD"),i("orcL");const Be=function(e,t){return Ge.select(t[e])},Ve=function(){return Ge.selectAll(".".concat("dag-link",".").concat(Le))},Ue=function(){return Ge.selectAll(".".concat("dag-link",":not(.").concat(Le,")"))},Me=function(){return Ge.selectAll(".".concat("dag-node",":not(.").concat(Le,")"))},He=function(){return Object.fromEntries(Ve().data().map((function(e){return[e.uid,e]})))},Je=function(e,t){return Be(e,t).classed(Le)},ze=function(e){return e.style("stroke-opacity",.2)},We=function(e){return e.attr("stroke","#f2f2f2")},Qe=function(e){return e.style("stroke-opacity",1)},Ke=function(e){return e.attr("stroke",(function(e){return e.color}))},Xe=function(e,t){return e.style("stroke-opacity",t)},Ye=function(e){return e.attr("stroke",(function(e){return e.color}))},Ze=function(e,t){ze(Ue()),We(Me()),e.forEach((function(e){let{uid:t}=e;Qe(Ge.select("#".concat(t))).classed(Le,!0)})),t.forEach((function(e){Ke(Ge.select("#".concat(e))).classed(Le,!0)}))},et=function(){Ve().each((function(e){Ke(Ge.select("#".concat(e.source.uid))).classed(Le,!0),Ke(Ge.select("#".concat(e.target.uid))).classed(Le,!0)}))},tt=function(e,t,i){if(e.forEach((function(e){let{uid:t}=e;Xe(Ge.select("#".concat(t)),i).classed(Le,!1)})),t.forEach((function(e){Ge.select("#".concat(e)).classed(Le,!1)})),Ge.selectAll(".".concat(Le)).empty())return Xe(Ue(),i),void Ye(Me());ze(Ue()),We(Me()),et()};function it(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function nt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?it(Object(i),!0).forEach((function(t){at(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function at(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var st={viewOptions:{baseHeight:300,baseWidth:1e3,minNodeHeight:60,nodeWidth:16,nodePadding:25,paddingForLabels:100,labelMargin:8,baseOpacity:.8,containerClasses:["dag-graph-container","gl-display-flex","gl-flex-direction-column"].join(" "),hoverFadeClasses:["gl-cursor-pointer","gl-transition-duration-slow","gl-transition-timing-function-ease"].join(" ")},gitLabColorRotation:["#e17223","#83ab4a","#5772ff","#b24800","#25d2d2","#006887","#487900","#d84280","#3547de","#6f3500","#006887","#275600","#b31756"],props:{graphData:{type:Object,required:!0}},data:()=>({color:function(){},height:0,width:0}),mounted(){let e;try{e=this.transformData(this.graphData)}catch(e){return void this.$emit("on-failure",le.n)}this.drawGraph(e)},methods:{addSvg(){return Ge.select(".dag-graph-container").append("svg").attr("viewBox",[0,0,this.width,this.height]).attr("width",this.width).attr("height",this.height)},appendLinks(e){var t=this;return e.append("path").attr("d",(function(e,i){return Object(Re.b)(e,i,t.$options.viewOptions.nodeWidth)})).attr("stroke",(function(e){let{gradId:t}=e;return"url(#".concat(t,")")})).style("stroke-linejoin","round").attr("stroke-width",(function(e){let{width:t}=e;return Math.max(1,t-2)})).attr("clip-path",(function(e){let{clipId:t}=e;return"url(#".concat(t,")")}))},appendLinkInteractions(e){var t=this;const{baseOpacity:i}=this.$options.viewOptions;return e.on("mouseover",(function(e,i,n){Je(i,n)||(t.$emit("update-annotation",{type:"add",data:e}),function(e,t,i){const n=Be(t,i),a=Ge.select("#".concat(e.source.uid)),s=Ge.select("#".concat(e.target.uid));ze(Ue()),Qe(n),We(Me()),Ke(a),Ke(s)}(e,i,n))})).on("mouseout",(function(e,n,a){Je(n,a)||(t.$emit("update-annotation",{type:"remove",data:e}),function(e){if(Ge.selectAll(".".concat(Le)).empty())return Xe(Ge.selectAll(".".concat("dag-link")),e),void Ye(Ge.selectAll(".".concat("dag-node")));ze(Ue()),We(Me())}(i))})).on("click",(function(e,n,a){!function(e,t,i,n){if(Je(i,n))return tt([t],[t.source.uid,t.target.uid],e),void et();Ze([t],[t.source.uid,t.target.uid])}(i,e,n,a),t.$emit("update-annotation",{type:"replace",data:He()})}))},appendNodeInteractions(e){var t=this;return e.on("click",(function(e,i,n){!function(e,t,i,n){const a=function e(t){return t.targetLinks?t.targetLinks.flatMap((function(t){return[t,...e(t.source)]})):[]}(t),s=function e(t){let i=[];return t.targetLinks&&(i=t.targetLinks.flatMap((function(t){return e(t.source)}))),[...i,t.uid]}(t),r=Be(i,n);if(Je(i,n))return r.classed(Le,!1),void tt(a,s,e);Ze(a,s)}(t.$options.viewOptions.baseOpacity,e,i,n),t.$emit("update-annotation",{type:"replace",data:He()})}))},appendLabelAsForeignObject(e,t,i){const n=i[t],{height:a,wrapperWidth:s,width:r,x:o,y:l,textAlign:c}=Object(Re.d)(e,nt(nt({},this.$options.viewOptions),{},{width:this.width})),d=["gl-display-flex","gl-pointer-events-none","gl-flex-direction-column","gl-justify-content-center","gl-overflow-wrap-break"].join(" ");return Ge.select(n).attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").attr("height",a).attr("width",s||r).attr("x",o).attr("y",l).classed("gl-overflow-visible",!0).append("xhtml:div").classed(d,!0).style("height",a).style("width",r).style("text-align",c).text((function(e){let{name:t}=e;return t}))},createAndAssignId(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=$e()(i);return e[t]=n,n},createClip(e){var t=this;return e.append("clipPath").attr("id",(function(e){return t.createAndAssignId(e,"clipId","dag-clip")})).append("path").attr("d",Re.a)},createGradient(e){var t=this;const i=e.append("linearGradient").attr("id",(function(e){return t.createAndAssignId(e,"gradId","dag-grad")})).attr("gradientUnits","userSpaceOnUse").attr("x1",(function(e){let{source:t}=e;return t.x1})).attr("x2",(function(e){let{target:t}=e;return t.x0}));i.append("stop").attr("offset","0%").attr("stop-color",(function(e){let{source:i}=e;return t.color(i)})),i.append("stop").attr("offset","100%").attr("stop-color",(function(e){let{target:i}=e;return t.color(i)}))},createLinks(e,t){const i=this.generateLinks(e,t);this.createGradient(i),this.createClip(i),this.appendLinks(i),this.appendLinkInteractions(i)},createNodes(e,t){const i=this.generateNodes(e,t);this.labelNodes(e,t),this.appendNodeInteractions(i)},drawGraph(e){let{maxNodesPerLayer:t,linksAndNodes:i}=e;const{baseWidth:n,baseHeight:a,minNodeHeight:s,nodeWidth:r,nodePadding:o,paddingForLabels:l}=this.$options.viewOptions;this.width=n,this.height=a+t*s,this.color=this.initColors();const{links:c,nodes:d}=Object(Re.c)({width:this.width,height:this.height,nodeWidth:r,nodePadding:o,paddingForLabels:l})(i),u=this.addSvg();this.createLinks(u,c),this.createNodes(u,d)},generateLinks(e,t){var i=this;return e.append("g").attr("fill","none").attr("stroke-opacity",this.$options.viewOptions.baseOpacity).selectAll(".".concat("dag-link")).data(t).enter().append("g").attr("id",(function(e){return i.createAndAssignId(e,"uid","dag-link")})).classed("".concat("dag-link"," gl-transition-property-stroke-opacity ").concat(this.$options.viewOptions.hoverFadeClasses),!0)},generateNodes(e,t){var i=this;const{nodeWidth:n}=this.$options.viewOptions;return e.append("g").selectAll(".".concat("dag-node")).data(t).enter().append("line").classed("".concat("dag-node"," gl-transition-property-stroke ").concat(this.$options.viewOptions.hoverFadeClasses),!0).attr("id",(function(e){return i.createAndAssignId(e,"uid","dag-node")})).attr("stroke",(function(e){const t=i.color(e);return e.color=t,t})).attr("stroke-width",n).attr("stroke-linecap","round").attr("x1",(function(e){return Math.floor((e.x1+e.x0)/2)})).attr("x2",(function(e){return Math.floor((e.x1+e.x0)/2)})).attr("y1",(function(e){return e.y0+4})).attr("y2",(function(e){return e.y1-4}))},initColors(){const e=Ge.scaleOrdinal(this.$options.gitLabColorRotation);return function(t){let{name:i}=t;return e(i)}},labelNodes(e,t){return e.append("g").classed("gl-font-sm",!0).selectAll("text").data(t).enter().append("foreignObject").each(this.appendLabelAsForeignObject)},transformData(e){const t=Object(Re.c)()(e),i=Object(Ie.f)(t.nodes);return{maxNodesPerLayer:Object(Ie.c)(i),linksAndNodes:{links:e.links,nodes:i}}}}};function rt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ot(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(i),!0).forEach((function(t){lt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function lt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ct={name:"Dag",components:{DagAnnotations:Ae,DagGraph:Object(y.a)(st,(function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.$options.viewOptions.containerClasses,attrs:{"data-testid":"dag-graph-container"}})}),[],!1,null,null,null).exports,GlAlert:xe.a,GlButton:W.a,GlEmptyState:E.a,GlLink:z.a,GlSprintf:Ne.a},inject:{aboutDagDocPath:{default:null},dagDocPath:{default:null},emptySvgPath:{default:""},pipelineIid:{default:""},pipelineProjectPath:{default:""}},apollo:{graphData:{fetchPolicy:Te.fetchPolicies.CACHE_AND_NETWORK,query:De.a,variables(){return{projectPath:this.pipelineProjectPath,iid:this.pipelineIid}},update(e){var t;if(!(null==e?void 0:null===(t=e.project)||void 0===t?void 0:t.pipeline))return this.graphData;const{stages:{nodes:i}}=e.project.pipeline;return i.map((function(e){let{name:t,groups:{nodes:i}}=e;return i.map((function(e){return ot({category:t},e)}))})).flat(2).map((function(e){const t=e.jobs.nodes.map((function(e){let{name:t,needs:i}=e;return{name:t,needs:i.nodes.map((function(e){return e.name}))}}));return ot(ot({},e),{},{jobs:t})}))},error(){this.reportFailure(le.m)}}},data:()=>({annotationsMap:{},failureType:null,graphData:null,showFailureAlert:!1,hasNoDependentJobs:!1}),errorTexts:{[le.m]:Object(l.a)("We are currently unable to fetch data for this graph."),[le.n]:Object(l.a)("There was an error parsing the data for this graph."),[le.t]:Object(l.a)("DAG visualization requires at least 3 dependent jobs."),[le.d]:Object(l.a)("An unknown error occurred while loading this graph.")},emptyStateTexts:{title:Object(l.a)("Speed up your pipelines with Needs relationships"),firstDescription:Object(l.a)("Using the %{codeStart}needs%{codeEnd} keyword makes jobs run before their stage is reached. Jobs run as soon as their %{codeStart}needs%{codeEnd} relationships are met, which speeds up your pipelines."),secondDescription:Object(l.a)("If you add %{codeStart}needs%{codeEnd} to jobs in your pipeline you'll be able to view the %{codeStart}needs%{codeEnd} relationships between jobs in this tab as a %{linkStart}Directed Acyclic Graph (DAG)%{linkEnd}."),button:Object(l.a)("Learn more about Needs relationships")},computed:{failure(){switch(this.failureType){case le.m:return{text:this.$options.errorTexts[le.m],variant:"danger"};case le.n:return{text:this.$options.errorTexts[le.n],variant:"danger"};case le.t:return{text:this.$options.errorTexts[le.t],variant:"info"};default:return{text:this.$options.errorTexts[le.d],variant:"danger"}}},processedData(){return this.processGraphData(this.graphData)},shouldDisplayAnnotations(){return!w()(this.annotationsMap)},shouldDisplayGraph(){return Boolean(!this.showFailureAlert&&!this.hasNoDependentJobs&&this.graphData)}},methods:{addAnnotationToMap(e){let{uid:t,source:i,target:n}=e;this.$set(this.annotationsMap,t,{source:i,target:n})},processGraphData(e){let t;try{t=Object(Ie.e)(e)}catch(e){return this.reportFailure(le.n),{}}return 1===t.links.length?(this.reportFailure(le.t),{}):0===t.links.length?(this.hasNoDependentJobs=!0,{}):t},hideAlert(){this.showFailureAlert=!1},removeAnnotationFromMap(e){let{uid:t}=e;this.$delete(this.annotationsMap,t)},reportFailure(e){this.showFailureAlert=!0,this.failureType=e},updateAnnotation(e){let{type:t,data:i}=e;switch(t){case"add":this.addAnnotationToMap(i);break;case"remove":this.removeAnnotationFromMap(i);break;case"replace":this.annotationsMap=i}}}},dt=Object(y.a)(ct,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.showFailureAlert?i("gl-alert",{attrs:{variant:e.failure.variant},on:{dismiss:e.hideAlert}},[e._v("\n    "+e._s(e.failure.text)+"\n  ")]):e._e(),e._v(" "),i("div",{staticClass:"gl-relative"},[e.shouldDisplayAnnotations?i("dag-annotations",{attrs:{annotations:e.annotationsMap}}):e._e(),e._v(" "),e.shouldDisplayGraph?i("dag-graph",{attrs:{"graph-data":e.processedData},on:{onFailure:e.reportFailure,"update-annotation":e.updateAnnotation}}):e.hasNoDependentJobs?i("gl-empty-state",{attrs:{"svg-path":e.emptySvgPath,title:e.$options.emptyStateTexts.title},scopedSlots:e._u([{key:"description",fn:function(){return[i("div",{staticClass:"gl-text-left"},[i("p",[i("gl-sprintf",{attrs:{message:e.$options.emptyStateTexts.firstDescription},scopedSlots:e._u([{key:"code",fn:function(t){var n=t.content;return[i("code",[e._v(e._s(n))])]}}])})],1),e._v(" "),i("p",[i("gl-sprintf",{attrs:{message:e.$options.emptyStateTexts.secondDescription},scopedSlots:e._u([{key:"code",fn:function(t){var n=t.content;return[i("code",[e._v(e._s(n))])]}},{key:"link",fn:function(t){var n=t.content;return[i("gl-link",{attrs:{href:e.aboutDagDocPath}},[e._v(e._s(n))])]}}])})],1)])]},proxy:!0},e.dagDocPath?{key:"actions",fn:function(){return[i("gl-button",{attrs:{href:e.dagDocPath,target:"__blank",variant:"success"}},[e._v("\n          "+e._s(e.$options.emptyStateTexts.button)+"\n        ")])]},proxy:!0}:null],null,!0)}):e._e()],1)],1)}),[],!1,null,null,null).exports;s.default.use(Ce.default);var ut=function(e){const t=document.querySelector("#js-pipeline-dag-vue");if(!t)return;const{aboutDagDocPath:i,dagDocPath:n,emptySvgPath:a,pipelineProjectPath:r,pipelineIid:o}=null==t?void 0:t.dataset;new s.default({el:t,components:{Dag:dt},apolloProvider:e,provide:{aboutDagDocPath:i,dagDocPath:n,emptySvgPath:a,pipelineProjectPath:r,pipelineIid:o},render:e=>e("dag",{})})},pt=(i("QifN"),i("A/CH")),mt=i.n(pt),ht=i("CqXh"),gt=i("sHIo"),vt=i("708Y"),ft=i.n(vt),bt=i("r5Yj"),yt=i.n(bt),kt=i("aQQL"),_t=i("MOnn"),wt=i("j00k"),St={name:"GraphViewSelector",components:{GlAlert:xe.a,GlLoadingIcon:h.a,GlSegmentedControl:_t.a,GlToggle:wt.a},props:{showLinks:{type:Boolean,required:!0},tipPreviouslyDismissed:{type:Boolean,required:!0},type:{type:String,required:!0}},data(){return{hoverTipDismissed:!1,isToggleLoading:!1,isSwitcherLoading:!1,segmentSelectedType:this.type,showLinksActive:!1}},i18n:{hoverTipText:Object(l.a)("Tip: Hover over a job to see the jobs it depends on to run."),linksLabelText:Object(l.a)("Show dependencies"),viewLabelText:Object(l.a)("Group jobs by")},views:{[f.j]:{type:f.j,text:{primary:Object(l.a)("Stage")}},[f.e]:{type:f.e,text:{primary:Object(l.a)("Job dependencies")}}},computed:{showLinksToggle(){return this.segmentSelectedType===f.e},showTip(){return this.showLinks&&this.showLinksActive&&!this.tipPreviouslyDismissed&&!this.hoverTipDismissed},viewTypesList(){var e=this;return Object.keys(this.$options.views).map((function(t){return{value:t,text:e.$options.views[t].text.primary}}))}},watch:{showLinks(){this.isToggleLoading=!1},type(){this.isSwitcherLoading=!1}},methods:{dismissTip(){this.hoverTipDismissed=!0,this.$emit("dismissHoverTip")},toggleView(e){var t=this;this.isSwitcherLoading=!0,setTimeout((function(){t.$emit("updateViewType",e)}))},toggleShowLinksActive(e){var t=this;this.isToggleLoading=!0,setTimeout((function(){t.$emit("updateShowLinksState",e)}))}}},jt=Object(y.a)(St,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"gl-relative gl-display-flex gl-align-items-center gl-w-max-content gl-my-4"},[e.isSwitcherLoading?i("gl-loading-icon",{staticClass:"gl-absolute gl-w-full gl-bg-white gl-opacity-5 gl-z-index-2",attrs:{"data-testid":"switcher-loading-state",size:"lg"}}):e._e(),e._v(" "),i("span",{staticClass:"gl-font-weight-bold"},[e._v(e._s(e.$options.i18n.viewLabelText))]),e._v(" "),i("gl-segmented-control",{staticClass:"gl-mx-4",attrs:{options:e.viewTypesList,disabled:e.isSwitcherLoading,"data-testid":"pipeline-view-selector"},on:{input:e.toggleView},model:{value:e.segmentSelectedType,callback:function(t){e.segmentSelectedType=t},expression:"segmentSelectedType"}}),e._v(" "),e.showLinksToggle?i("div",{staticClass:"gl-display-flex gl-align-items-center"},[i("gl-toggle",{staticClass:"gl-mx-4",attrs:{"data-testid":"show-links-toggle",label:e.$options.i18n.linksLabelText,"is-loading":e.isToggleLoading,"label-position":"left"},on:{change:e.toggleShowLinksActive},model:{value:e.showLinksActive,callback:function(t){e.showLinksActive=t},expression:"showLinksActive"}})],1):e._e()],1),e._v(" "),e.showTip?i("gl-alert",{staticClass:"gl-my-5",attrs:{variant:"tip"},on:{dismiss:e.dismissTip}},[e._v("\n    "+e._s(e.$options.i18n.hoverTipText)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,Pt=i("Sfue");const Ot="pipeline_needs_hover_tip".toUpperCase();var Ct={name:"PipelineGraphWrapper",components:{GlAlert:xe.a,GlLoadingIcon:h.a,GraphViewSelector:jt,LocalStorageSync:ht.a,PipelineGraph:kt.default},mixins:[Object(gt.a)()],inject:{graphqlResourceEtag:{default:""},metricsPath:{default:""},pipelineIid:{default:""},pipelineProjectPath:{default:""}},data:()=>({alertType:null,callouts:[],currentViewType:f.j,pipeline:null,pipelineLayers:null,showAlert:!1,showLinks:!1}),errorTexts:{[le.f]:Object(l.a)("An error occurred while drawing job relationship links."),[f.c]:Object(l.a)("The data in this pipeline is too old to be rendered as a graph. Please check the Jobs tab to access historical data."),[le.m]:Object(l.a)("We are currently unable to fetch data for this pipeline."),[le.d]:Object(l.a)("An unknown error occurred while loading this graph.")},apollo:{callouts:{query:yt.a,update(e){var t,i;return(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:null===(i=t.callouts)||void 0===i?void 0:i.nodes.map((function(e){return e.featureName})))||[]},error(e){Object(v.d)(this.$options.name,"type: callout_load_failure, info: ".concat(Object(Pt.b)(e)))}},pipeline:{context(){return Object(Pt.a)(this.graphqlResourceEtag)},query:mt.a,pollInterval:1e4,variables(){return{projectPath:this.pipelineProjectPath,iid:this.pipelineIid}},skip(){return!(this.pipelineProjectPath&&this.pipelineIid)},update(e){var t;return(null==e?void 0:null===(t=e.project)||void 0===t?void 0:t.pipeline)?Object(Pt.d)(this.pipelineProjectPath,e):this.pipeline},error(e){var t,i,n,a;this.reportFailure({type:le.m,skipSentry:!0}),Object(v.c)(this.$options.name,"| type: ".concat(le.m," , info: ").concat(Object(Pt.b)(e)),{projectPath:this.projectPath,pipelineIid:this.pipelineIid,pipelineStages:(null===(t=this.pipeline)||void 0===t?void 0:null===(i=t.stages)||void 0===i?void 0:i.length)||0,nbOfDownstreams:(null===(n=this.pipeline)||void 0===n?void 0:null===(a=n.downstream)||void 0===a?void 0:a.length)||0})},result(e){let{error:t}=e;t||this.alertType!==le.m||this.hideAlert()}}},computed:{alert(){switch(this.alertType){case le.f:return{text:this.$options.errorTexts[le.f],variant:"danger"};case f.c:return{text:this.$options.errorTexts[f.c],variant:"info"};case le.m:return{text:this.$options.errorTexts[le.m],variant:"danger"};default:return{text:this.$options.errorTexts[le.d],variant:"danger"}}},configPaths(){return{graphqlResourceEtag:this.graphqlResourceEtag,metricsPath:this.metricsPath}},graphViewType(){return this.showGraphViewSelector?this.currentViewType:f.j},hoverTipPreviouslyDismissed(){return this.callouts.includes(Ot)},showLoadingIcon(){return this.$apollo.queries.pipeline.loading&&!this.pipeline},showGraphViewSelector(){var e;return Boolean(this.glFeatures.pipelineGraphLayersView&&(null===(e=this.pipeline)||void 0===e?void 0:e.usesNeeds))}},mounted(){this.pipelineIid||this.reportFailure({type:f.c,skipSentry:!0}),Object(Pt.c)(this.$apollo.queries.pipeline)},errorCaptured(e,t,i){Object(v.d)(this.$options.name,"error: ".concat(e,", info: ").concat(i))},methods:{getPipelineLayers(){return this.currentViewType!==f.e||this.pipelineLayers||(this.pipelineLayers=Object(Ie.d)(this.pipeline)),this.pipelineLayers},handleTipDismissal(){try{this.$apollo.mutate({mutation:ft.a,variables:{featureName:"pipeline_needs_hover_tip"}})}catch(e){Object(v.d)(this.$options.name,"type: callout_dismiss_failure, info: ".concat(e))}},hideAlert(){this.showAlert=!1,this.alertType=null},refreshPipelineGraph(){this.$apollo.queries.pipeline.refetch()},reportFailure(e){let{type:t,err:i="No error string passed.",skipSentry:n=!1}=e;this.showAlert=!0,this.alertType=t,n||Object(v.d)(this.$options.name,"type: ".concat(t,", info: ").concat(i))},updateShowLinksState(e){this.showLinks=e},updateViewType(e){this.currentViewType=e}},viewTypeKey:f.l},xt=Object(y.a)(Ct,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.showAlert?i("gl-alert",{attrs:{variant:e.alert.variant},on:{dismiss:e.hideAlert}},[e._v("\n    "+e._s(e.alert.text)+"\n  ")]):e._e(),e._v(" "),i("local-storage-sync",{attrs:{"storage-key":e.$options.viewTypeKey,value:e.currentViewType},on:{input:e.updateViewType}},[e.showGraphViewSelector?i("graph-view-selector",{attrs:{type:e.graphViewType,"show-links":e.showLinks,"tip-previously-dismissed":e.hoverTipPreviouslyDismissed},on:{dismissHoverTip:e.handleTipDismissal,updateViewType:e.updateViewType,updateShowLinksState:e.updateShowLinksState}}):e._e()],1),e._v(" "),e.showLoadingIcon?i("gl-loading-icon",{staticClass:"gl-mx-auto gl-my-4",attrs:{size:"lg"}}):e._e(),e._v(" "),e.pipeline?i("pipeline-graph",{attrs:{"config-paths":e.configPaths,pipeline:e.pipeline,"pipeline-layers":e.getPipelineLayers(),"show-links":e.showLinks,"view-type":e.graphViewType},on:{error:e.reportFailure,refreshPipelineGraph:e.refreshPipelineGraph}}):e._e()],1)}),[],!1,null,null,null).exports;s.default.use(Ce.default);const Nt=function(e,t){let{pipelineProjectPath:i,pipelineIid:n,metricsPath:a,graphqlResourceEtag:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};new s.default({el:e,components:{PipelineGraphWrapper:xt},apolloProvider:t,provide:{metricsPath:a,pipelineProjectPath:i,pipelineIid:n,graphqlResourceEtag:r,dataMethod:f.b},errorCaptured(e,t,i){Object(v.d)("pipeline_details_graph","error: ".concat(e,", info: ").concat(i))},render:e=>e(xt)})};var Tt=i("3twG"),Et=i("qKWp"),Dt=i("SVV+"),It=i.n(Dt),Lt=i("KAZC"),Ft=i.n(Lt),At=i("rlkI"),qt=i.n(At),$t=i("CqsY"),Gt=i.n($t);var Rt={name:"PipelineHeaderSection",pipelineCancel:"pipelineCancel",pipelineRetry:"pipelineRetry",finishedStatuses:["FAILED","SUCCESS","CANCELED"],components:{ciHeader:Et.a,GlAlert:xe.a,GlButton:W.a,GlLoadingIcon:h.a,GlModal:Z.a},directives:{GlModal:X.a},errorTexts:{[le.m]:Object(l.a)("We are currently unable to fetch data for the pipeline header."),[le.o]:Object(l.a)("An error occurred while making the request."),[le.e]:Object(l.a)("An error occurred while deleting the pipeline."),[le.d]:Object(l.a)("An unknown error occurred.")},inject:{graphqlResourceEtag:{default:""},paths:{default:{}},pipelineId:{default:""},pipelineIid:{default:""}},apollo:{pipeline:{context(){return Object(Pt.a)(this.graphqlResourceEtag)},query:Gt.a,variables(){return{fullPath:this.paths.fullProject,iid:this.pipelineIid}},update:function(e){return e.project.pipeline},error(){this.reportFailure(le.m)},pollInterval:1e4,watchLoading(e){e||(this.isCanceling=!1,this.isRetrying=!1)}}},data:()=>({pipeline:null,failureType:null,isCanceling:!1,isRetrying:!1,isDeleting:!1}),computed:{deleteModalConfirmationText:()=>Object(l.a)("Are you sure you want to delete this pipeline? Doing so will expire all pipeline caches and delete all related objects, such as builds, logs, artifacts, and triggers. This action cannot be undone."),hasError(){return this.failureType},hasPipelineData(){return Boolean(this.pipeline)},isLoadingInitialQuery(){return this.$apollo.queries.pipeline.loading&&!this.hasPipelineData},status(){var e;return null===(e=this.pipeline)||void 0===e?void 0:e.status},isFinished(){return this.$options.finishedStatuses.includes(this.status)},shouldRenderContent(){return!this.isLoadingInitialQuery&&this.hasPipelineData},failure(){switch(this.failureType){case le.m:return{text:this.$options.errorTexts[le.m],variant:"danger"};case le.o:return{text:this.$options.errorTexts[le.o],variant:"danger"};case le.e:return{text:this.$options.errorTexts[le.e],variant:"danger"};default:return{text:this.$options.errorTexts[le.d],variant:"danger"}}}},watch:{isFinished(e){e&&this.$apollo.queries.pipeline.stopPolling()}},methods:{reportFailure(e){this.failureType=e},async postPipelineAction(e,t){try{const{data:{[e]:{errors:i}}}=await this.$apollo.mutate({mutation:t,variables:{id:this.pipeline.id}});i.length>0?this.reportFailure(le.o):(await this.$apollo.queries.pipeline.refetch(),this.isFinished||this.$apollo.queries.pipeline.startPolling(1e4))}catch(e){this.reportFailure(le.o)}},cancelPipeline(){this.isCanceling=!0,this.postPipelineAction(this.$options.pipelineCancel,It.a)},retryPipeline(){this.isRetrying=!0,this.postPipelineAction(this.$options.pipelineRetry,qt.a)},async deletePipeline(){this.isDeleting=!0,this.$apollo.queries.pipeline.stopPolling();try{const{data:{pipelineDestroy:{errors:e}}}=await this.$apollo.mutate({mutation:Ft.a,variables:{id:this.pipeline.id}});e.length>0?(this.reportFailure(le.e),this.isDeleting=!1):Object(Tt.t)(Object(Tt.x)(this.paths.pipelinesPath,"delete_success"))}catch(e){this.$apollo.queries.pipeline.startPolling(1e4),this.reportFailure(le.e),this.isDeleting=!1}}},DELETE_MODAL_ID:"pipeline-delete-modal"},Bt=Object(y.a)(Rt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pipeline-header-container"},[e.hasError?i("gl-alert",{attrs:{variant:e.failure.variant}},[e._v(e._s(e.failure.text))]):e._e(),e._v(" "),e.shouldRenderContent?i("ci-header",{attrs:{status:e.pipeline.detailedStatus,time:e.pipeline.createdAt,user:e.pipeline.user,"item-id":Number(e.pipelineId),"item-name":"Pipeline"}},[e.pipeline.retryable?i("gl-button",{staticClass:"js-retry-button",attrs:{loading:e.isRetrying,disabled:e.isRetrying,category:"secondary",variant:"info","data-testid":"retryPipeline"},on:{click:function(t){return e.retryPipeline()}}},[e._v("\n      "+e._s(e.__("Retry"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.cancelable?i("gl-button",{staticClass:"gl-ml-3",attrs:{loading:e.isCanceling,disabled:e.isCanceling,variant:"danger","data-testid":"cancelPipeline"},on:{click:function(t){return e.cancelPipeline()}}},[e._v("\n      "+e._s(e.__("Cancel running"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.userPermissions.destroyPipeline?i("gl-button",{directives:[{name:"gl-modal",rawName:"v-gl-modal",value:e.$options.DELETE_MODAL_ID,expression:"$options.DELETE_MODAL_ID"}],staticClass:"gl-ml-3",attrs:{loading:e.isDeleting,disabled:e.isDeleting,variant:"danger",category:"secondary","data-testid":"deletePipeline"}},[e._v("\n      "+e._s(e.__("Delete"))+"\n    ")]):e._e()],1):e._e(),e._v(" "),e.isLoadingInitialQuery?i("gl-loading-icon",{staticClass:"gl-mt-3 gl-mb-3",attrs:{size:"lg"}}):e._e(),e._v(" "),i("gl-modal",{attrs:{"modal-id":e.$options.DELETE_MODAL_ID,title:e.__("Delete pipeline"),"ok-title":e.__("Delete pipeline"),"ok-variant":"danger"},on:{ok:function(t){return e.deletePipeline()}}},[i("p",[e._v("\n      "+e._s(e.deleteModalConfirmationText)+"\n    ")])])],1)}),[],!1,null,null,null).exports;s.default.use(Ce.default);const Vt=function(e,t,i){const n=document.querySelector(e);if(!n)return;const{fullPath:a,pipelineId:r,pipelineIid:o,pipelinesPath:l}=null==n?void 0:n.dataset;new s.default({el:n,components:{pipelineHeader:Bt},apolloProvider:t,provide:{paths:{fullProject:a,graphqlResourceEtag:i,pipelinesPath:l},pipelineId:r,pipelineIid:o},render:e=>e("pipeline-header",{})})};var Ut=i("++NP");const Mt="pipeline_needs_banner".toUpperCase();var Ht={i18n:{title:Object(l.a)("View job dependencies in the pipeline graph!"),description:Object(l.a)("You can now group jobs in the pipeline graph based on which jobs are configured to run first, if you use the %{codeStart}needs:%{codeEnd} keyword to establish job dependencies in your CI/CD pipelines. %{linkStart}Learn how to speed up your pipeline with needs.%{linkEnd}"),buttonText:Object(l.a)("Provide feedback")},components:{GlBanner:Ut.a,GlLink:z.a,GlSprintf:Ne.a},apollo:{callouts:{query:yt.a,update(e){var t,i;return null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:null===(i=t.callouts)||void 0===i?void 0:i.nodes.map((function(e){return e.featureName}))},error(){this.hasError=!0}}},inject:["dagDocPath"],data:()=>({callouts:[],dismissedAlert:!1,hasError:!1}),computed:{showBanner(){var e;return!((null===(e=this.$apollo.queries.callouts)||void 0===e?void 0:e.loading)||this.hasError||this.dismissedAlert||this.callouts.includes(Mt))}},methods:{handleClose(){this.dismissedAlert=!0;try{this.$apollo.mutate({mutation:ft.a,variables:{featureName:"pipeline_needs_banner"}})}catch(e){Object(r.b)(Object(l.a)("There was a problem dismissing this notification."))}}}},Jt=Object(y.a)(Ht,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showBanner?i("gl-banner",{attrs:{title:e.$options.i18n.title,"button-text":e.$options.i18n.buttonText,"button-link":"https://gitlab.com/gitlab-org/gitlab/-/issues/327688",variant:"introduction"},on:{close:e.handleClose}},[i("p",[i("gl-sprintf",{attrs:{message:e.$options.i18n.description},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[i("gl-link",{attrs:{href:e.dagDocPath,target:"_blank"}},[e._v(" "+e._s(n))])]}},{key:"code",fn:function(t){var n=t.content;return[i("code",[e._v(e._s(n))])]}}],null,!1,60843844)})],1)]):e._e()}),[],!1,null,null,null).exports;s.default.use(Ce.default);const zt=function(e,t){const i=document.querySelector(e);if(!i)return;const{dagDocPath:n}=null==i?void 0:i.dataset;new s.default({el:i,components:{PipelineNotification:Jt},provide:{dagDocPath:n},apolloProvider:t,render:e=>e("pipeline-notification")})},Wt=new Ce.default({defaultClient:Object(Te.default)({},{useGet:!0})});i("KcQl");var Qt=i("2ibD");const Kt=function(e){let{state:t,commit:i,dispatch:n}=e;return n("toggleLoading"),Qt.a.get(t.summaryEndpoint).then((function(e){let{data:t}=e;i("SET_SUMMARY",t)})).catch((function(){Object(r.c)(Object(l.e)("TestReports|There was an error fetching the summary."))})).finally((function(){n("toggleLoading")}))},Xt=function(e,t){var i,n,a,s;let{state:o,commit:c,dispatch:d}=e;const{hasFullSuite:u}=(null===(i=o.testReports)||void 0===i?void 0:null===(n=i.test_suites)||void 0===n?void 0:n[t])||{};if(u)return Promise.resolve();d("toggleLoading");const{build_ids:p=[]}=(null===(a=o.testReports)||void 0===a?void 0:null===(s=a.test_suites)||void 0===s?void 0:s[t])||{};return Qt.a.get(o.suiteEndpoint,{params:{build_ids:p}}).then((function(e){let{data:i}=e;return c("SET_SUITE",{suite:i,index:t})})).catch((function(){Object(r.c)(Object(l.e)("TestReports|There was an error fetching the test suite."))})).finally((function(){d("toggleLoading")}))},Yt=function(e,t){let{commit:i}=e;return i("SET_PAGE",t)},Zt=function(e,t){let{commit:i}=e;return i("SET_SELECTED_SUITE_INDEX",t)},ei=function(e){let{commit:t}=e;return t("SET_SELECTED_SUITE_INDEX",null)},ti=function(e){let{commit:t}=e;return t("TOGGLE_LOADING")};function ii(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ni(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(i),!0).forEach((function(t){ai(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ii(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ai(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const si=function(e){const{test_suites:t=[]}=e.testReports;return t.map((function(e){return ni(ni({},e),{},{formattedTime:me(e.total_time)})}))},ri=function(e){var t,i;return(null===(t=e.testReports)||void 0===t?void 0:null===(i=t.test_suites)||void 0===i?void 0:i[e.selectedSuiteIndex])||{}},oi=function(e){const{test_cases:t=[]}=ri(e),{page:i,perPage:n}=e.pageInfo,a=(i-1)*n;return t.map((function(t){return ni(ni({},t),{},{classname:t.classname||"",name:t.name||"",filePath:t.file?"".concat(e.blobPath,"/").concat((i=t.file,i.replace(/^\.?\/*/,""))):null});var i})).map(he).slice(a,a+n)},li=function(e){var t,i;return(null===(t=ri(e))||void 0===t?void 0:null===(i=t.test_cases)||void 0===i?void 0:i.length)||0};i("EWC9");function ci(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function di(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(i),!0).forEach((function(t){ui(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ci(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ui(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var pi={SET_PAGE(e,t){Object.assign(e,{pageInfo:Object.assign(e.pageInfo,{page:t})})},SET_SUITE(e,t){let{suite:i={},index:n=null}=t;e.testReports.test_suites[n]=di(di({},i),{},{hasFullSuite:!0})},SET_SELECTED_SUITE_INDEX(e,t){Object.assign(e,{selectedSuiteIndex:t})},SET_SUMMARY(e,t){const{total:i}=t;e.testReports=di(di({},t),{},{total_time:i.time,total_count:i.count,success_count:i.success,failed_count:i.failed,skipped_count:i.skipped,error_count:i.error})},TOGGLE_LOADING(e){Object.assign(e,{isLoading:!e.isLoading})}},mi=function(e){let{blobPath:t="",summaryEndpoint:i="",suiteEndpoint:n=""}=e;return{blobPath:t,summaryEndpoint:i,suiteEndpoint:n,testReports:{},selectedSuiteIndex:null,isLoading:!1,pageInfo:{page:1,perPage:20}}};s.default.use(T.b);s.default.use(c.a);const hi={PIPELINE_DETAILS:".js-pipeline-details-vue",PIPELINE_GRAPH:"#js-pipeline-graph-vue",PIPELINE_HEADER:"#js-pipeline-header-vue",PIPELINE_NOTIFICATION:"#js-pipeline-notification",PIPELINE_TESTS:"#js-pipeline-tests-detail"},gi=function(e){document.querySelector(hi.PIPELINE_GRAPH)&&new s.default({el:hi.PIPELINE_GRAPH,components:{PipelineGraphLegacy:N},mixins:[g],data:()=>({mediator:e}),errorCaptured(e,t,i){Object(v.d)("pipeline_details_bundle_legacy_details","error: ".concat(e,", info: ").concat(i))},render(e){var t=this;return e("pipeline-graph-legacy",{props:{isLoading:this.mediator.state.isLoading,pipeline:this.mediator.store.state.pipeline,mediator:this.mediator},on:{refreshPipelineGraph:this.requestRefreshPipelineGraph,onResetDownstream:function(e,i){return t.resetDownstreamPipelines(e,i)},onClickUpstreamPipeline:function(e){return t.clickUpstreamPipeline(e)},onClickDownstreamPipeline:function(e){return t.clickDownstreamPipeline(e)}}})}})},vi=function(){const e=document.querySelector(hi.PIPELINE_TESTS),{blobPath:t,emptyStateImagePath:i,hasTestReport:r,summaryEndpoint:l,suiteEndpoint:c}=(null==e?void 0:e.dataset)||{},d=(u={blobPath:t,summaryEndpoint:l,suiteEndpoint:c},new T.b.Store({actions:n,getters:a,mutations:pi,state:mi(u)}));var u;new s.default({el:e,components:{TestReports:Oe},provide:{emptyStateImagePath:i,hasTestReport:Object(o.K)(r)},store:d,render:e=>e("test-reports")})};var fi=i("sxGh"),bi=i("SQid");const yi=function(e){return Qt.a.get(e).then((function(e){let{data:t}=e;return t&&t.favicon?Object(bi.b)(t.favicon):Object(bi.a)()})).catch((function(e){throw Object(bi.a)(),e}))};class ki{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.initTabs&&e.tabsOptions&&new fi.a(e.tabsOptions),e.pipelineStatusUrl&&yi(e.pipelineStatusUrl)}}!function(){const e=document.querySelector(".js-toggle-mr-list"),t=document.querySelector(".js-truncated-mr-list"),i=document.querySelector(".js-full-mr-list");e&&e.addEventListener("click",(function(e){e.preventDefault(),t.classList.toggle("hide"),i.classList.toggle("hide")}));const n=document.querySelector(".js-pipeline-tab-link a"),{controllerAction:a}=document.querySelector(".js-pipeline-container").dataset;if(n){const e="".concat(n.getAttribute("href"),"/status.json");new ki({initTabs:!0,pipelineStatusUrl:e,tabsOptions:{action:a,defaultAction:"pipelines",parentEl:".pipelines-tabs"}})}}(),async function(){const e=gon.features.graphqlPipelineDetails||gon.features.graphqlPipelineDetailsUsers,{dataset:t}=document.querySelector(hi.PIPELINE_DETAILS);try{Vt(hi.PIPELINE_HEADER,Wt,t.graphqlResourceEtag)}catch(e){Object(r.c)(Object(l.a)("An error occurred while loading a section of this page."))}if(gon.features.pipelineGraphLayersView)try{zt(hi.PIPELINE_NOTIFICATION,Wt)}catch(e){Object(r.c)(Object(l.a)("An error occurred while loading a section of this page."))}if(e)try{Nt(hi.PIPELINE_GRAPH,Wt,t)}catch(e){Object(r.c)(Object(l.a)("An error occurred while loading the pipeline."))}else{const{default:e}=await i.e(148).then(i.bind(null,"ja7t")),n=new e({endpoint:t.endpoint});n.fetchPipeline(),gi(n)}ut(Wt),vi()}()},B045:function(e,t,i){"use strict";var n=i("LLbv"),a=i("4lAS"),s=i("MV2A"),r=i("FkSe"),o=i("Lzak"),l=i("GuZl"),c=i("/lV4"),d=i("8zNS"),u=i("71Sp"),p=i("mELm"),m=i("pq95"),h={directives:{GlTooltip:n.a},components:{CiStatus:d.a,GlButton:a.a,GlLink:s.a,GlLoadingIcon:r.a,GlBadge:o.a},inject:{dataMethod:{default:m.h}},props:{columnTitle:{type:String,required:!0},expanded:{type:Boolean,required:!0},pipeline:{type:Object,required:!0},type:{type:String,required:!0},isLoading:{type:Boolean,required:!1,default:!1},projectId:{type:Number,required:!1,default:-1}},computed:{tooltipText(){return"".concat(this.downstreamTitle," #").concat(this.pipeline.id," - ").concat(this.pipelineStatus.label,"\n      ").concat(this.sourceJobInfo)},buttonId(){return"js-linked-pipeline-".concat(this.pipeline.id)},pipelineStatus(){return Object(p.a)(this.dataMethod,"pipelineStatus",this.pipeline)},projectName(){return this.pipeline.project.name},downstreamTitle(){return this.childPipeline?Object(c.a)("child-pipeline"):this.pipeline.project.name},parentPipeline(){return this.isUpstream&&this.isSameProject},childPipeline(){return this.isDownstream&&this.isSameProject},label(){return this.parentPipeline?Object(c.a)("Parent"):this.childPipeline?Object(c.a)("Child"):Object(c.a)("Multi-project")},pipelineIsLoading(){return Boolean(this.isLoading||this.pipeline.isLoading)},isDownstream(){return this.type===m.a},isUpstream(){return this.type===m.k},isSameProject(){return this.projectId>-1?this.projectId===this.pipeline.project.id:!this.pipeline.multiproject},sourceJobName(){return Object(p.a)(this.dataMethod,"sourceJob",this.pipeline)},sourceJobInfo(){return this.isDownstream?Object(c.f)(Object(c.a)("Created by %{job}"),{job:this.sourceJobName}):""},expandedIcon(){return this.isUpstream?this.expanded?"angle-right":"angle-left":this.expanded?"angle-left":"angle-right"},expandButtonPosition(){return this.isUpstream?"gl-left-0 gl-border-r-1!":"gl-right-0 gl-border-l-1!"}},errorCaptured(e,t,i){Object(u.d)("linked_pipeline","error: ".concat(e,", info: ").concat(i))},methods:{onClickLinkedPipeline(){this.hideTooltips(),this.$emit("pipelineClicked",this.$refs.linkedPipeline),this.$emit("pipelineExpandToggle",this.sourceJobName,!this.expanded)},hideTooltips(){this.$root.$emit(l.b)},onDownstreamHovered(){this.$emit("downstreamHovered",this.sourceJobName)},onDownstreamHoverLeave(){this.$emit("downstreamHovered","")}}},g=i("tBpV"),v=Object(g.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"linkedPipeline",staticClass:"linked-pipeline build gl-pipeline-job-width",class:{"downstream-pipeline":e.isDownstream},attrs:{title:e.tooltipText,"data-qa-selector":"child_pipeline"},on:{mouseover:e.onDownstreamHovered,mouseleave:e.onDownstreamHoverLeave}},[i("div",{staticClass:"gl-relative gl-bg-white gl-p-3 gl-border-solid gl-border-gray-100 gl-border-1",class:{"gl-pl-9":e.isUpstream}},[i("div",{staticClass:"gl-display-flex"},[e.pipelineIsLoading?i("div",{staticClass:"gl-pr-2"},[i("gl-loading-icon",{attrs:{inline:""}})],1):i("ci-status",{attrs:{status:e.pipelineStatus,size:24,"css-classes":"gl-top-0 gl-pr-2"}}),e._v(" "),i("div",{staticClass:"gl-display-flex gl-flex-direction-column gl-w-13"},[i("span",{staticClass:"gl-text-truncate"},[e._v("\n          "+e._s(e.downstreamTitle)+"\n        ")]),e._v(" "),i("div",{staticClass:"gl-text-truncate"},[i("gl-link",{staticClass:"gl-text-blue-500!",attrs:{href:e.pipeline.path,"data-testid":"pipelineLink"}},[e._v("#"+e._s(e.pipeline.id))])],1)])],1),e._v(" "),i("div",{staticClass:"gl-pt-2"},[i("gl-badge",{attrs:{size:"sm",variant:"info","data-testid":"downstream-pipeline-label"}},[e._v("\n        "+e._s(e.label)+"\n      ")])],1),e._v(" "),i("gl-button",{staticClass:"gl-absolute gl-top-0 gl-bottom-0 gl-shadow-none! gl-rounded-0!",class:"js-pipeline-expand-"+e.pipeline.id+" "+e.expandButtonPosition,attrs:{id:e.buttonId,icon:e.expandedIcon,"aria-label":e.__("Expand pipeline"),"data-testid":"expand-pipeline-button","data-qa-selector":"expand_pipeline_button"},on:{click:e.onClickLinkedPipeline}})],1)])}),[],!1,null,null,null);t.a=v.exports},CqsY:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getPipelineHeaderData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"retryable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cancelable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"destroyPipeline"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"detailedStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"detailsPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoji"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:499}};i.loc.source={body:"query getPipelineHeaderData($fullPath: ID!, $iid: ID!) {\n  project(fullPath: $fullPath) {\n    pipeline(iid: $iid) {\n      id\n      iid\n      status\n      retryable\n      cancelable\n      userPermissions {\n        destroyPipeline\n      }\n      detailedStatus {\n        detailsPath\n        icon\n        group\n        text\n      }\n      createdAt\n      user {\n        name\n        webPath\n        email\n        avatarUrl\n        status {\n          message\n          emoji\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getPipelineHeaderData=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getPipelineHeaderData")},"Fsq/":function(e,t,i){"use strict";var n=i("LLbv"),a=i("5QKO"),s=(i("bOix"),{directives:{GlTooltip:n.a},mixins:[a.a],props:{time:{type:[String,Number],required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}},computed:{timeAgo(){return this.timeFormatted(this.time)}}}),r=i("tBpV"),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:e.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:e.cssClass,attrs:{title:e.tooltipTitle(e.time),datetime:e.time}},[e._t("default",[e._v(e._s(e.timeAgo))],{timeAgo:e.timeAgo})],2)}),[],!1,null,null,null);t.a=o.exports},HVP3:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("0zRR"),a=i("/Szx"),s=i("DXSV"),r=i("Vxxt"),o=i("SGKy"),l=i("6nFr"),c=i("NSGy"),d=i("EQ0+"),u=i("rPnh"),p=i("MUaa"),m=i("nq4Y"),h={mixins:[d.a],model:{prop:"checked",event:"input"},props:{validated:{type:Boolean,default:!1},ariaInvalid:{type:[Boolean,String],default:!1},stacked:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},buttons:{type:Boolean,default:!1},buttonVariant:{type:String,default:"secondary"}},computed:{inline:function(){return!this.stacked},groupName:function(){return this.name||this.safeId()},groupClasses:function(){return this.buttons?["btn-group-toggle",this.inline?"btn-group":"btn-group-vertical",this.size?"btn-group-".concat(this.size):"",this.validated?"was-validated":""]:[this.validated?"was-validated":""]},computedAriaInvalid:function(){var e=this.ariaInvalid;return!0===e||"true"===e||""===e?"true":!1===this.computedState?"true":null}},watch:{checked:function(e){Object(c.a)(e,this.localChecked)||(this.localChecked=e)},localChecked:function(e,t){Object(c.a)(e,t)||this.$emit("input",e)}},render:function(e){var t=this,i=this.formOptions.map((function(i,n){var a="BV_option_".concat(n);return e(t.isRadioGroup?m.a:p.a,{props:{id:t.safeId(a),value:i.value,disabled:i.disabled||!1},key:a},[e("span",{domProps:Object(u.a)(i.html,i.text)})])}));return e("div",{class:[this.groupClasses,"bv-no-focus-ring"],attrs:{id:this.safeId(),role:this.isRadioGroup?"radiogroup":"group",tabindex:"-1","aria-required":this.required?"true":null,"aria-invalid":this.computedAriaInvalid}},[this.normalizeSlot(l.e),i,this.normalizeSlot()])}},g=i("Tu1i"),v=i("QlUp"),f=a.a.extend({name:n.E,mixins:[s.a,r.a,h,o.a,g.a,v.a],provide:function(){return{bvRadioGroup:this}},props:{checked:{default:null}},data:function(){return{localChecked:this.checked}},computed:{isRadioGroup:function(){return!0}}})},HXu9:function(e,t,i){"use strict";var n=i("bOix");t.a={data:()=>({remainingTime:Object(n.j)(0),remainingTimeIntervalId:null}),mounted(){this.startRemainingTimeInterval()},beforeDestroy(){this.remainingTimeIntervalId&&clearInterval(this.remainingTimeIntervalId)},computed:{isDelayedJob(){var e,t;return(null===(e=this.job)||void 0===e?void 0:e.scheduled)||(null===(t=this.job)||void 0===t?void 0:t.scheduledAt)},scheduledTime(){return this.job.scheduled_at||this.job.scheduledAt}},watch:{isDelayedJob(){this.startRemainingTimeInterval()}},methods:{startRemainingTimeInterval(){var e=this;this.remainingTimeIntervalId&&clearInterval(this.remainingTimeIntervalId),this.isDelayedJob&&(this.updateRemainingTime(),this.remainingTimeIntervalId=setInterval((function(){return e.updateRemainingTime()}),1e3))},updateRemainingTime(){const e=Object(n.c)(this.scheduledTime);this.remainingTime=Object(n.j)(e)}}}},"J6+Z":function(e,t,i){"use strict";var n=i("0zRR"),a=i("/Szx"),s=i("t8l0"),r=i("EQ0+"),o=i("rPnh"),l=i("BrvI"),c=i("9aS3"),d=i("Ddgg"),u=i("bvam"),p=a.a.extend({name:n.nb,mixins:[r.a],inject:{bvProgress:{default:function(){return{}}}},props:{value:{type:[Number,String],default:0},label:{type:String},labelHtml:{type:String},max:{type:[Number,String],default:null},precision:{type:[Number,String],default:null},variant:{type:String,default:function(){return Object(s.b)(n.nb,"variant")}},striped:{type:Boolean,default:null},animated:{type:Boolean,default:null},showProgress:{type:Boolean,default:null},showValue:{type:Boolean,default:null}},computed:{progressBarClasses:function(){return[this.computedVariant?"bg-".concat(this.computedVariant):"",this.computedStriped||this.computedAnimated?"progress-bar-striped":"",this.computedAnimated?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return Object(d.b)(this.value,0)},computedMax:function(){var e=Object(d.b)(this.max)||Object(d.b)(this.bvProgress.max,0);return e>0?e:100},computedPrecision:function(){return Object(c.b)(Object(d.c)(this.precision,Object(d.c)(this.bvProgress.precision,0)),0)},computedProgress:function(){var e=this.computedPrecision,t=Object(c.d)(10,e);return Object(d.a)(100*t*this.computedValue/this.computedMax/t,e)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return Object(l.b)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(l.b)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(l.b)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(l.b)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(e){var t,i=this.label,n=this.labelHtml,a=this.computedValue,s=this.computedPrecision,r={};return this.hasNormalizedSlot()?t=this.normalizeSlot():i||n?r=Object(o.a)(n,i):this.computedShowProgress?t=this.computedProgress:this.computedShowValue&&(t=Object(d.a)(a,s)),e("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":Object(u.e)(this.computedMax),"aria-valuenow":Object(d.a)(a,s)},domProps:r},t)}}),m=a.a.extend({name:n.mb,mixins:[r.a],provide:function(){return{bvProgress:this}},props:{variant:{type:String,default:function(){return Object(s.b)(n.mb,"variant")}},striped:{type:Boolean,default:!1},animated:{type:Boolean,default:!1},height:{type:String},precision:{type:[Number,String],default:0},showProgress:{type:Boolean,default:!1},showValue:{type:Boolean,default:!1},max:{type:[Number,String],default:100},value:{type:[Number,String],default:0}},computed:{progressHeight:function(){return{height:this.height||null}}},render:function(e){var t=this.normalizeSlot();return t||(t=e(p,{props:{value:this.value,max:this.max,precision:this.precision,variant:this.variant,animated:this.animated,striped:this.striped,showProgress:this.showProgress,showValue:this.showValue}})),e("div",{class:["progress"],style:this.progressHeight},[t])}}),h=i("Pyw5");const g={components:{BProgress:m}};const v=i.n(h)()({render:function(){var e=this.$createElement;return(this._self._c||e)("b-progress",this._b({},"b-progress",this.$attrs,!1))},staticRenderFns:[]},void 0,g,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=v},KAZC:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deletePipeline"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CiPipelineID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineDestroy"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:103}};i.loc.source={body:"mutation deletePipeline($id: CiPipelineID!) {\n  pipelineDestroy(input: { id: $id }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.deletePipeline=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"deletePipeline")},MOnn:function(e,t,i){"use strict";var n=i("HVP3"),a=i("Pyw5"),s=i.n(a);const r={components:{BFormRadioGroup:n.a},inheritAttrs:!1,model:{prop:"checked",event:"input"},props:{checked:{required:!0,validator:function(){return!0}},options:{type:Array,required:!0}},computed:{enabledOptions:function(){return this.options.filter((function(e){return!e.disabled}))}},watch:{checked:{handler:function(e,t){this.checkValue(e,t)}},options:{handler:function(){this.checkValue(this.checked)}}},created:function(){this.checkValue(this.checked)},methods:{checkValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isValidValue(e)&&(console.warn("Segmented button should always have valid option selected"),this.enabledOptions.length)){var i=t&&this.isValidValue(t)?t:this.enabledOptions[0].value;this.$emit("input",i)}},isValidValue:function(e){return this.enabledOptions.some((function(t){return t.value===e}))}}};const o=s()({render:function(){var e=this.$createElement;return(this._self._c||e)("b-form-radio-group",this._g(this._b({staticClass:"gl-segmented-control",attrs:{buttons:"","button-variant":"gl-segmented-button gl-button"}},"b-form-radio-group",Object.assign({},this.$attrs,{options:this.options,checked:this.checked}),!1),this.$listeners))},staticRenderFns:[]},void 0,r,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=o},OgoU:function(e,t,i){"use strict";var n={name:"CodeBlock",props:{code:{type:String,required:!0},maxHeight:{type:String,required:!1,default:"initial"}},computed:{styleObject(){const{maxHeight:e}=this;return"initial"!==e?{maxHeight:e,overflowY:"auto"}:null}}},a=i("tBpV"),s=Object(a.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("pre",{staticClass:"code-block rounded",style:this.styleObject},[t("code",{staticClass:"d-block"},[this._v(this._s(this.code))])])}),[],!1,null,null,null);t.a=s.exports},PvM2:function(e,t,i){"use strict";var n=i("MV2A"),a=i("LLbv"),s=i("HXu9"),r=i("GuZl"),o=i("/lV4"),l=i("8zNS"),c=i("71Sp"),d=i("jltb"),u=i("fn5V"),p=i("mELm"),m=i("pq95"),h={hoverClass:"gl-shadow-x0-y0-b3-s1-blue-500",components:{ActionComponent:d.a,CiIcon:l.a,JobNameComponent:u.a,GlLink:n.a},directives:{GlTooltip:a.a},mixins:[s.a],inject:{dataMethod:{default:m.h}},props:{job:{type:Object,required:!0},cssClassJobName:{type:String,required:!1,default:""},dropdownLength:{type:Number,required:!1,default:1/0},groupTooltip:{type:String,required:!1,default:""},jobHovered:{type:String,required:!1,default:""},pipelineExpanded:{type:Object,required:!1,default:function(){return{}}},pipelineId:{type:Number,required:!1,default:-1},sourceJobHovered:{type:String,required:!1,default:""},stageName:{type:String,required:!1,default:""},type:{type:String,required:!1,default:m.i}},computed:{boundary(){return 1===this.dropdownLength?"viewport":"scrollParent"},computedJobId(){return this.pipelineId>-1?"".concat(this.job.name,"-").concat(this.pipelineId):""},detailsPath(){return Object(p.a)(this.dataMethod,"detailsPath",this.status)},hasDetails(){return Object(p.a)(this.dataMethod,"hasDetails",this.status)},isSingleItem(){return this.type===m.i},nameComponent(){return this.hasDetails?"gl-link":"div"},showStageName(){return Boolean(this.stageName)},status(){return this.job&&this.job.status?this.job.status:{}},testId(){return this.hasDetails?"job-with-link":"job-without-link"},tooltipText(){if(this.groupTooltip)return this.groupTooltip;const e=[],{name:t}=this.job;t&&e.push(t);const{tooltip:i}=this.status;return t&&i&&e.push("-"),i&&(this.isDelayedJob?e.push(Object(o.f)(i,{remainingTime:this.remainingTime})):e.push(i)),e.join(" ")},hasAction(){return this.job.status&&this.job.status.action&&this.job.status.action.path},relatedDownstreamHovered(){return this.job.name===this.sourceJobHovered},relatedDownstreamExpanded(){return this.job.name===this.pipelineExpanded.jobName&&this.pipelineExpanded.expanded},jobClasses(){return this.relatedDownstreamHovered||this.relatedDownstreamExpanded?"".concat(this.$options.hoverClass," ").concat(this.cssClassJobName):this.cssClassJobName}},errorCaptured(e,t,i){Object(c.d)("job_item","error: ".concat(e,", info: ").concat(i))},methods:{hideTooltips(){this.$root.$emit(r.b)},jobItemClick(e){this.isSingleItem&&e.stopPropagation(),this.hideTooltips()},pipelineActionRequestComplete(){this.$emit("pipelineActionRequestComplete")}}},g=i("tBpV"),v=Object(g.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ci-job-component gl-display-flex gl-align-items-center gl-justify-content-space-between gl-w-full",attrs:{id:e.computedJobId,"data-qa-selector":"job_item_container"}},[i(e.nameComponent,{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{boundary:"viewport",placement:"bottom",customClass:"gl-pointer-events-none"},expression:"{\n      boundary: 'viewport',\n      placement: 'bottom',\n      customClass: 'gl-pointer-events-none',\n    }"}],tag:"component",staticClass:"js-pipeline-graph-job-link qa-job-link menu-item gl-text-gray-900 gl-active-text-decoration-none gl-focus-text-decoration-none gl-hover-text-decoration-none gl-w-full",class:e.jobClasses,attrs:{title:e.tooltipText,href:e.detailsPath,"data-testid":e.testId},on:{click:e.jobItemClick,mouseout:e.hideTooltips}},[i("div",{staticClass:"ci-job-name-component gl-display-flex gl-align-items-center"},[i("ci-icon",{staticClass:"gl-line-height-0",attrs:{size:24,status:e.job.status}}),e._v(" "),i("div",{staticClass:"gl-pl-3 gl-display-flex gl-flex-direction-column gl-w-full"},[i("div",{staticClass:"gl-text-truncate mw-70p gl-line-height-normal"},[e._v(e._s(e.job.name))]),e._v(" "),e.showStageName?i("div",{staticClass:"gl-text-truncate mw-70p gl-font-sm gl-text-gray-500 gl-line-height-normal",attrs:{"data-testid":"stage-name-in-job"}},[e._v("\n          "+e._s(e.stageName)+"\n        ")]):e._e()])],1)]),e._v(" "),e.hasAction?i("action-component",{staticClass:"gl-mr-1",attrs:{"tooltip-text":e.status.action.title,link:e.status.action.path,"action-icon":e.status.action.icon,"data-qa-selector":"action_button"},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}}):e._e()],1)}),[],!1,null,null,null);t.a=v.exports},QlUp:function(e,t,i){"use strict";var n=i("BrvI");t.a={props:{state:{type:Boolean,default:null}},computed:{computedState:function(){return Object(n.b)(this.state)?this.state:null},stateClass:function(){var e=this.computedState;return!0===e?"is-valid":!1===e?"is-invalid":null}}}},S4Ah:function(e,t,i){"use strict";var n=i("71Sp"),a=i("pq95"),s={components:{JobItem:i("PvM2").a},props:{group:{type:Object,required:!0},pipelineId:{type:Number,required:!1,default:-1},stageName:{type:String,required:!1,default:""}},jobItemTypes:{jobDropdown:a.d,singleJob:a.i},computed:{computedJobId(){return this.pipelineId>-1?"".concat(this.group.name,"-").concat(this.pipelineId):""},tooltipText(){const{name:e,status:t}=this.group;return"".concat(e," - ").concat(t.label)}},errorCaptured(e,t,i){Object(n.d)("job_group_dropdown","error: ".concat(e,", info: ").concat(i))},methods:{pipelineActionRequestComplete(){this.$emit("pipelineActionRequestComplete")}}},r=i("tBpV"),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ci-job-dropdown-container dropdown dropright",attrs:{id:e.computedJobId}},[i("button",{staticClass:"dropdown-menu-toggle build-content gl-build-content gl-pipeline-job-width! gl-pr-4!",attrs:{type:"button","data-toggle":"dropdown","data-display":"static"}},[i("div",{staticClass:"gl-display-flex gl-align-items-center gl-justify-content-space-between"},[i("job-item",{attrs:{type:e.$options.jobItemTypes.jobDropdown,"group-tooltip":e.tooltipText,job:e.group,"stage-name":e.stageName}}),e._v(" "),i("div",{staticClass:"gl-font-weight-100 gl-font-size-lg gl-ml-n4"},[e._v(e._s(e.group.size))])],1)]),e._v(" "),i("ul",{staticClass:"dropdown-menu big-pipeline-graph-dropdown-menu js-grouped-pipeline-dropdown"},[i("li",{staticClass:"scrollable-menu"},[i("ul",e._l(e.group.jobs,(function(t){return i("li",{key:t.id},[i("job-item",{attrs:{"dropdown-length":e.group.size,job:t,type:e.$options.jobItemTypes.singleJob,"css-class-job-name":"mini-pipeline-graph-dropdown-item"},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}})],1)})),0)])])])}),[],!1,null,null,null);t.a=o.exports},SGKy:function(e,t,i){"use strict";var n=i("A7+L"),a=i("rPnh"),s=i("BrvI"),r=i("7bmO"),o=i("kI/X");t.a={props:{options:{type:[Array,Object],default:function(){return[]}},valueField:{type:String,default:"value"},textField:{type:String,default:"text"},htmlField:{type:String,default:"html"},disabledField:{type:String,default:"disabled"}},computed:{formOptions:function(){return this.normalizeOptions(this.options)}},methods:{normalizeOption:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(s.i)(e)){var i=Object(n.a)(e,this.valueField),r=Object(n.a)(e,this.textField);return{value:Object(s.m)(i)?t||r:i,text:Object(a.b)(String(Object(s.m)(r)?t:r)),html:Object(n.a)(e,this.htmlField),disabled:Boolean(Object(n.a)(e,this.disabledField))}}return{value:t||e,text:Object(a.b)(String(e)),disabled:!1}},normalizeOptions:function(e){var t=this;return Object(s.a)(e)?e.map((function(e){return t.normalizeOption(e)})):Object(s.i)(e)?(Object(o.a)('Setting prop "options" to an object is deprecated. Use the array format instead.',this.$options.name),Object(r.i)(e).map((function(i){return t.normalizeOption(e[i]||{},i)}))):[]}}}},SQid:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));i("jaBk");var n=i("htNe"),a=i.n(n);const s=e=>new Promise(t=>{const i=document.createElement("img");i.addEventListener("load",()=>t(i),{once:!0}),i.src=e}),r=e=>{const t={};return Object.keys(e).forEach(i=>{Object.defineProperty(t,i,{get:()=>e[i],set(t){if(t!=e[i])return requestAnimationFrame(l.render),e[i]=t}})}),t};class o{constructor(e){this._position=r({x:0,y:0,centered:!1}),this.image=e}get position(){return this._position}set position(e){Object.assign(this._position,e)}}class l{constructor(e){throw this.image=e,new Error("THIS BLOWS UP! DONT DO IT!")}static setFaviconOverlay(e){return s(e).then(e=>{l.overlays=[new o(e)],requestAnimationFrame(l.render)})}static resetFaviconOverlay(){l.overlays=[],requestAnimationFrame(l.render)}static get isInitialized(){return Boolean(l.canvas)}static get faviconUrl(){const{faviconElement:e}=l,t=e.dataset.originalHref;return t||(e.dataset.originalHref=e.href)}static getOverlay(e){return l.overlays[e]}static initialize({faviconSelector:e='link[rel="icon"]'}={}){return l.isInitialized?Promise.resolve():(l.canvas=document.createElement("canvas"),l.faviconElement=document.querySelector(e),s(l.faviconUrl).then(e=>{l.canvas.width=e.width,l.canvas.height=e.height,l.faviconImage=e}))}static render(){const{overlays:e,faviconImage:t,faviconElement:i,canvas:n}=l;if(!e.length)return void(i.href=i.dataset.originalHref);const a=n.getContext("2d");a.clearRect(0,0,t.width,t.height),a.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),e.forEach(e=>{let{x:t,y:i}=e.position;e.position.centered&&(t-=e.image.width/2,i-=e.image.height/2),a.drawImage(e.image,0,0,e.image.width,e.image.height,t,i,e.image.width,e.image.height)}),i.href=n.toDataURL()}}l.canvas=null,l.faviconElement=null,l.faviconImage=null,l.overlays=[];const c=a()((async function(){return await l.initialize({faviconSelector:"#favicon"}),l})),d=async function(e){(await c()).setFaviconOverlay(e)},u=async function(){(await c()).resetFaviconOverlay()}},"SVV+":function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"cancelPipeline"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CiPipelineID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineCancel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:102}};i.loc.source={body:"mutation cancelPipeline($id: CiPipelineID!) {\n  pipelineCancel(input: { id: $id }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.cancelPipeline=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"cancelPipeline")},Tu1i:function(e,t,i){"use strict";var n=i("t8l0");t.a={props:{size:{type:String,default:function(){return Object(n.b)("formControls","size")}}},computed:{sizeFormClass:function(){return[this.size?"form-control-".concat(this.size):null]},sizeBtnClass:function(){return[this.size?"btn-".concat(this.size):null]}}}},Vxxt:function(e,t,i){"use strict";var n=i("o/E4");t.a={props:{name:{type:String},id:{type:String},disabled:{type:Boolean},required:{type:Boolean,default:!1},form:{type:String},autofocus:{type:Boolean,default:!1}},mounted:function(){this.handleAutofocus()},activated:function(){this.handleAutofocus()},methods:{handleAutofocus:function(){var e=this;this.$nextTick((function(){Object(n.B)((function(){var t=e.$el;e.autofocus&&Object(n.u)(t)&&(Object(n.v)(t,"input, textarea, select")||(t=Object(n.C)("input, textarea, select",t)),Object(n.d)(t))}))}))}}}},aQQL:function(e,t,i){"use strict";i.r(t);var n=i("71Sp"),a=i("tBpV"),s=Object(a.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"gl-display-flex"},[this._t("upstream"),this._v(" "),this._t("main"),this._v(" "),this._t("downstream")],2)}),[],!1,null,null,null).exports,r=i("3Nnh"),o=i("kNKy"),l=i("pq95"),c=(i("jaBk"),i("orcL"),i("A/CH")),d=i.n(c),u=i("k4Ha"),p=i("B045"),m=i("Sfue"),h={components:{LinkedPipeline:p.a,PipelineGraph:function(){return Promise.resolve().then(i.bind(null,"aQQL"))}},props:{columnTitle:{type:String,required:!0},configPaths:{type:Object,required:!0,validator:m.e},linkedPipelines:{type:Array,required:!0},showLinks:{type:Boolean,required:!0},type:{type:String,required:!0},viewType:{type:String,required:!0}},data:()=>({currentPipeline:null,loadingPipelineId:null,pipelineLayers:{},pipelineExpanded:!1}),titleClasses:["gl-font-weight-bold","gl-pipeline-job-width","gl-text-truncate","gl-line-height-36","gl-pl-3","gl-mb-5"],minWidth:"".concat(l.g,"px"),computed:{columnClass(){return"graph-position-".concat(this.graphPosition," ").concat({right:"gl-ml-6",left:"gl-mr-6"}[this.graphPosition])},computedTitleClasses(){const e=this.isUpstream?["gl-w-full","gl-text-right","gl-linked-pipeline-padding"]:[];return[...this.$options.titleClasses,...e]},graphPosition(){return this.isUpstream?"left":"right"},graphViewType(){var e;return(null===(e=this.currentPipeline)||void 0===e?void 0:e.usesNeeds)?this.viewType:l.j},isUpstream(){return this.type===l.k},minWidth(){return this.isUpstream?0:this.$options.minWidth}},methods:{getPipelineData(e){const t=e.project.fullPath;this.$apollo.addSmartQuery("currentPipeline",{query:d.a,pollInterval:1e4,context(){return Object(m.a)(this.configPaths.graphqlResourceEtag)},variables:()=>({projectPath:t,iid:e.iid}),update(e){var i;return(null==e?void 0:null===(i=e.project)||void 0===i?void 0:i.pipeline)?Object(m.d)(t,e):this.currentPipeline},result(){this.loadingPipelineId=null,this.$emit("scrollContainer")},error(e){this.$emit("error",{type:u.m,skipSentry:!0}),Object(n.d)("linked_pipelines_column","error type: ".concat(u.m,", error: ").concat(Object(m.b)(e)))}}),Object(m.c)(this.$apollo.queries.currentPipeline)},getPipelineLayers(e){return this.viewType!==l.e||this.pipelineLayers[e]||(this.pipelineLayers[e]=Object(o.d)(this.currentPipeline)),this.pipelineLayers[e]},isExpanded(e){var t;return Boolean((null===(t=this.currentPipeline)||void 0===t?void 0:t.id)&&e===this.currentPipeline.id)},isLoadingPipeline(e){return this.loadingPipelineId===e},onPipelineClick(e){var t;if((null===(t=this.currentPipeline)||void 0===t?void 0:t.id)===e.id)return this.pipelineExpanded=!1,void(this.currentPipeline=null);this.loadingPipelineId=e.id,this.pipelineExpanded=!0,this.getPipelineData(e)},onDownstreamHovered(e){this.$emit("downstreamHovered",e)},onPipelineExpandToggle(e,t){this.isUpstream||this.$emit("pipelineExpandToggle",e,t)},showContainer(e){return this.isExpanded(e)||this.isLoadingPipeline(e)}}},g=Object(a.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gl-display-flex"},[i("div",{staticClass:"linked-pipelines-column",class:e.columnClass},[i("div",{staticClass:"stage-name",class:e.computedTitleClasses,attrs:{"data-testid":"linked-column-title"}},[e._v("\n      "+e._s(e.columnTitle)+"\n    ")]),e._v(" "),i("ul",{staticClass:"gl-pl-0"},e._l(e.linkedPipelines,(function(t){return i("li",{key:t.id,staticClass:"gl-display-flex gl-mb-4",class:{"gl-flex-direction-row-reverse":e.isUpstream}},[i("linked-pipeline",{staticClass:"gl-display-inline-block",attrs:{"is-loading":e.isLoadingPipeline(t.id),pipeline:t,"column-title":e.columnTitle,type:e.type,expanded:e.isExpanded(t.id)},on:{downstreamHovered:e.onDownstreamHovered,pipelineClicked:function(i){return e.onPipelineClick(t)},pipelineExpandToggle:e.onPipelineExpandToggle}}),e._v(" "),e.showContainer(t.id)?i("div",{staticClass:"gl-display-inline-block",style:{minWidth:e.minWidth}},[e.isExpanded(t.id)?i("pipeline-graph",{staticClass:"d-inline-block gl-mt-n2",attrs:{type:e.type,"config-paths":e.configPaths,pipeline:e.currentPipeline,"pipeline-layers":e.getPipelineLayers(t.id),"show-links":e.showLinks,"is-linked-pipeline":!0,"view-type":e.graphViewType}}):e._e()],1):e._e()],1)})),0)])])}),[],!1,null,null,null).exports,v=(i("QifN"),i("Q33P")),f=i.n(v),b=i("G3fq"),y=i.n(b),k=i("8RpP"),_=i.n(k),w=i("sHIo"),S={props:{stageClasses:{type:String,required:!1,default:""},jobClasses:{type:String,required:!1,default:""}}},j=Object(a.a)(S,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"gl-display-flex gl-align-items-center gl-w-full gl-mb-5",class:this.stageClasses},[this._t("stages")],2),this._v(" "),t("div",{staticClass:"gl-display-flex gl-flex-direction-column gl-align-items-center gl-w-full",class:this.jobClasses},[this._t("jobs")],2)])}),[],!1,null,null,null).exports,P=i("jltb"),O=i("mELm"),C=i("S4Ah"),x=i("PvM2");function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){E(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function E(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var D={components:{ActionComponent:P.a,JobGroupDropdown:C.a,JobItem:x.a,MainGraphWrapper:j},mixins:[Object(w.a)()],props:{groups:{type:Array,required:!0},name:{type:String,required:!0},pipelineId:{type:Number,required:!0},action:{type:Object,required:!1,default:function(){return{}}},highlightedJobs:{type:Array,required:!1,default:function(){return[]}},jobHovered:{type:String,required:!1,default:""},pipelineExpanded:{type:Object,required:!1,default:function(){return{}}},showStageName:{type:Boolean,required:!1,default:!1},sourceJobHovered:{type:String,required:!1,default:""}},titleClasses:["gl-font-weight-bold","gl-pipeline-job-width","gl-text-truncate","gl-line-height-36","gl-pl-3"],computed:{currentGroups(){return this.glFeatures.pipelineFilterJobs?this.filteredGroups:this.groups},filteredGroups(){return this.groups.map((function(e){return T(T({},e),{},{jobs:e.jobs.filter(Boolean)})}))},formattedTitle(){return _()(y()(this.name))},hasAction(){return!f()(this.action)}},errorCaptured(e,t,i){Object(n.d)("stage_column_component","error: ".concat(e,", info: ").concat(i))},mounted(){this.$emit("updateMeasurements")},methods:{getGroupId:e=>Object(O.a)(l.b,"groupId",e),groupId:e=>"ci-badge-".concat(y()(e.name)),isFadedOut(e){return this.highlightedJobs.length>1&&!this.highlightedJobs.includes(e)},isParallel:e=>e.size>1&&e.jobs.length>1,singleJobExists(e){var t;const i=Boolean(null===(t=e.jobs)||void 0===t?void 0:t[0]);return i||Object(n.d)("stage_column_component","undefined_job_hunt"),1===e.size&&i}}},I=Object(a.a)(D,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main-graph-wrapper",{staticClass:"gl-px-6",attrs:{"data-testid":"stage-column"},scopedSlots:e._u([{key:"stages",fn:function(){return[i("div",{staticClass:"gl-display-flex gl-justify-content-space-between gl-relative",class:e.$options.titleClasses,attrs:{"data-testid":"stage-column-title"}},[i("div",[e._v(e._s(e.formattedTitle))]),e._v(" "),e.hasAction?i("action-component",{staticClass:"js-stage-action stage-action rounded",attrs:{"action-icon":e.action.icon,"tooltip-text":e.action.title,link:e.action.path},on:{pipelineActionRequestComplete:function(t){return e.$emit("refreshPipelineGraph")}}}):e._e()],1)]},proxy:!0},{key:"jobs",fn:function(){return e._l(e.currentGroups,(function(t){return i("div",{key:e.getGroupId(t),staticClass:"gl-relative gl-mb-3 gl-white-space-normal gl-pipeline-job-width",attrs:{id:e.groupId(t),"data-testid":"stage-column-group"},on:{mouseenter:function(i){return e.$emit("jobHover",t.name)},mouseleave:function(t){return e.$emit("jobHover","")}}},[e.singleJobExists(t)?i("job-item",{class:[{"gl-opacity-3":e.isFadedOut(t.name)},"gl-transition-duration-slow gl-transition-timing-function-ease"],attrs:{job:t.jobs[0],"job-hovered":e.jobHovered,"source-job-hovered":e.sourceJobHovered,"pipeline-expanded":e.pipelineExpanded,"pipeline-id":e.pipelineId,"stage-name":e.showStageName?t.stageName:"","css-class-job-name":"gl-build-content"},on:{pipelineActionRequestComplete:function(t){return e.$emit("refreshPipelineGraph")}}}):e.isParallel(t)?i("div",{class:{"gl-opacity-3":e.isFadedOut(t.name)}},[i("job-group-dropdown",{attrs:{group:t,"stage-name":e.showStageName?t.stageName:"","pipeline-id":e.pipelineId}})],1):e._e()],1)}))},proxy:!0}])})}),[],!1,null,null,null).exports,L={name:"PipelineGraph",components:{LinksLayer:r.a,LinkedGraphWrapper:s,LinkedPipelinesColumn:g,StageColumnComponent:I},props:{configPaths:{type:Object,required:!0,validator:m.e},pipeline:{type:Object,required:!0},showLinks:{type:Boolean,required:!0},viewType:{type:String,required:!0},isLinkedPipeline:{type:Boolean,required:!1,default:!1},pipelineLayers:{type:Array,required:!1,default:function(){return[]}},type:{type:String,required:!1,default:l.f}},pipelineTypeConstants:{DOWNSTREAM:l.a,UPSTREAM:l.k},CONTAINER_REF:"PIPELINE_LINKS_CONTAINER_REF",BASE_CONTAINER_ID:"pipeline-links-container",data:()=>({hoveredJobName:"",hoveredSourceJobName:"",highlightedJobs:[],measurements:{width:0,height:0},pipelineExpanded:{jobName:"",expanded:!1}}),computed:{containerId(){return"".concat(this.$options.BASE_CONTAINER_ID,"-").concat(this.pipeline.id)},downstreamPipelines(){return this.hasDownstreamPipelines?this.pipeline.downstream:[]},layout(){return this.isStageView?this.pipeline.stages:Object(o.b)(this.pipeline,this.pipelineLayers)},hasDownstreamPipelines(){var e,t;return Boolean((null===(e=this.pipeline)||void 0===e?void 0:null===(t=e.downstream)||void 0===t?void 0:t.length)>0)},hasUpstreamPipelines(){var e,t;return Boolean((null===(e=this.pipeline)||void 0===e?void 0:null===(t=e.upstream)||void 0===t?void 0:t.length)>0)},isStageView(){return this.viewType===l.j},metricsConfig(){return{path:this.configPaths.metricsPath,collectMetrics:!0}},showJobLinks(){return!this.isStageView&&this.showLinks},shouldShowStageName(){return!this.isStageView},showDownstreamPipelines(){return this.hasDownstreamPipelines&&this.type!==this.$options.pipelineTypeConstants.UPSTREAM},showUpstreamPipelines(){return this.hasUpstreamPipelines&&this.type!==this.$options.pipelineTypeConstants.DOWNSTREAM},upstreamPipelines(){return this.hasUpstreamPipelines?this.pipeline.upstream:[]}},errorCaptured(e,t,i){Object(n.d)(this.$options.name,"error: ".concat(e,", info: ").concat(i))},mounted(){this.getMeasurements()},methods:{getMeasurements(){this.measurements={width:this.$refs[this.containerId].scrollWidth,height:this.$refs[this.containerId].scrollHeight}},onError(e){this.$emit("error",e)},setJob(e){this.hoveredJobName=e},setSourceJob(e){this.hoveredSourceJobName=e},slidePipelineContainer(){this.$refs.mainPipelineContainer.scrollBy({left:l.g,top:0,behavior:"smooth"})},togglePipelineExpanded(e,t){this.pipelineExpanded={expanded:t,jobName:t?e:""}},updateHighlightedJobs(e){this.highlightedJobs=e}}},F=Object(a.a)(L,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"js-pipeline-graph"},[i("div",{ref:"mainPipelineContainer",staticClass:"gl-display-flex gl-position-relative gl-bg-gray-10 gl-white-space-nowrap gl-border-t-solid gl-border-t-1 gl-border-gray-100",class:{"gl-pipeline-min-h gl-py-5 gl-overflow-auto":!e.isLinkedPipeline}},[i("linked-graph-wrapper",{scopedSlots:e._u([{key:"upstream",fn:function(){return[e.showUpstreamPipelines?i("linked-pipelines-column",{attrs:{"config-paths":e.configPaths,"linked-pipelines":e.upstreamPipelines,"column-title":e.__("Upstream"),"show-links":e.showJobLinks,type:e.$options.pipelineTypeConstants.UPSTREAM,"view-type":e.viewType},on:{error:e.onError}}):e._e()]},proxy:!0},{key:"main",fn:function(){return[i("div",{ref:e.containerId,attrs:{id:e.containerId}},[i("links-layer",{attrs:{"pipeline-data":e.layout,"pipeline-id":e.pipeline.id,"container-id":e.containerId,"container-measurements":e.measurements,"highlighted-job":e.hoveredJobName,"metrics-config":e.metricsConfig,"show-links":e.showJobLinks,"view-type":e.viewType},on:{error:e.onError,highlightedJobsChange:e.updateHighlightedJobs}},e._l(e.layout,(function(t){return i("stage-column-component",{key:t.id||t.name,attrs:{name:t.name,groups:t.groups,action:t.status.action,"highlighted-jobs":e.highlightedJobs,"show-stage-name":e.shouldShowStageName,"job-hovered":e.hoveredJobName,"source-job-hovered":e.hoveredSourceJobName,"pipeline-expanded":e.pipelineExpanded,"pipeline-id":e.pipeline.id},on:{refreshPipelineGraph:function(t){return e.$emit("refreshPipelineGraph")},jobHover:e.setJob,updateMeasurements:e.getMeasurements}})})),1)],1)]},proxy:!0},{key:"downstream",fn:function(){return[e.showDownstreamPipelines?i("linked-pipelines-column",{staticClass:"gl-mr-6",attrs:{"config-paths":e.configPaths,"linked-pipelines":e.downstreamPipelines,"column-title":e.__("Downstream"),"show-links":e.showJobLinks,type:e.$options.pipelineTypeConstants.DOWNSTREAM,"view-type":e.viewType},on:{downstreamHovered:e.setSourceJob,pipelineExpandToggle:e.togglePipelineExpanded,scrollContainer:e.slidePipelineContainer,error:e.onError}}):e._e()]},proxy:!0}])})],1)])}),[],!1,null,null,null);t.default=F.exports},dsLq:function(e,t,i){"use strict";var n=i("4lAS"),a=i("Pyw5"),s=i.n(a);const r={components:{GlButton:n.a},props:{title:{type:String,required:!0},svgPath:{type:String,required:!1,default:null},svgHeight:{type:Number,required:!1,default:null},description:{type:String,required:!1,default:null},primaryButtonLink:{type:String,required:!1,default:null},primaryButtonText:{type:String,required:!1,default:null},secondaryButtonLink:{type:String,required:!1,default:null},secondaryButtonText:{type:String,required:!1,default:null},compact:{type:Boolean,required:!1,default:!1}},computed:{height:function(){return this.shouldPreventImageReflow?this.svgHeight:null},shouldPreventImageReflow:function(){return Boolean(this.svgHeight)},shouldRenderPrimaryButton:function(){return Boolean(this.primaryButtonLink&&this.primaryButtonText)},shouldRenderSecondaryButton:function(){return Boolean(this.secondaryButtonLink&&this.secondaryButtonText)}}};const o=s()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"row",class:{"empty-state text-center":!e.compact}},[i("div",{class:{"col-3 d-none d-sm-block":e.compact,"col-12":!e.compact}},[e.svgPath?i("div",{staticClass:"svg-250",class:{"svg-content":!e.compact}},[i("img",{staticClass:"gl-max-w-full",attrs:{src:e.svgPath,alt:"",height:e.height}})]):e._e()]),e._v(" "),i("div",{class:e.compact?"col-sm-9":"col-12"},[i("div",{staticClass:"text-content gl-mx-auto gl-my-0",class:{"gl-p-5":!e.compact}},[i("h1",{ref:"title",class:e.compact?"h5":"h4"},[e._v(e._s(e.title))]),e._v(" "),e.description||e.$scopedSlots.description?i("p",{ref:"description"},[e._t("description",[e._v("\n          "+e._s(e.description)+"\n        ")])],2):e._e(),e._v(" "),i("div",{staticClass:"gl-display-flex gl-flex-wrap",class:{"gl-justify-content-center":!e.compact}},[e._t("actions",[e.shouldRenderPrimaryButton?i("gl-button",{staticClass:"gl-mb-3",class:e.compact?"gl-mr-3":"gl-mx-2",attrs:{variant:"confirm",href:e.primaryButtonLink}},[e._v(e._s(e.primaryButtonText))]):e._e(),e._v(" "),e.shouldRenderSecondaryButton?i("gl-button",{staticClass:"gl-mb-3 gl-mr-3",class:{"gl-mx-2!":!e.compact},attrs:{href:e.secondaryButtonLink}},[e._v(e._s(e.secondaryButtonText)+"\n          ")]):e._e()])],2)])])])},staticRenderFns:[]},void 0,r,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=o},fn5V:function(e,t,i){"use strict";var n={components:{ciIcon:i("8zNS").a},props:{name:{type:String,required:!0},status:{type:Object,required:!0},iconSize:{type:Number,required:!1,default:16}}},a=i("tBpV"),s=Object(a.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"ci-job-name-component mw-100 gl-display-flex gl-align-items-center"},[t("ci-icon",{staticClass:"gl-line-height-0",attrs:{size:this.iconSize,status:this.status}}),this._v(" "),t("span",{staticClass:"gl-text-truncate mw-70p gl-pl-3 gl-display-inline-block"},[this._v("\n    "+this._s(this.name)+"\n  ")])],1)}),[],!1,null,null,null);t.a=s.exports},gMZC:function(e,t,i){var n=i("k9pk")("curry",i("a7I8"));n.placeholder=i("gkan"),e.exports=n},j00k:function(e,t,i){"use strict";var n=i("XBTk"),a=i("s1D3"),s=i("FkSe"),r=i("Pyw5"),o=i.n(r),l=0;const c={components:{GlIcon:a.a,GlLoadingIcon:s.a},model:{prop:"value",event:"change"},props:{name:{type:String,required:!1,default:null},value:{type:Boolean,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:void 0},help:{type:String,required:!1,default:void 0},labelPosition:{type:String,required:!1,default:"top",validator:function(e){return Object.values(n.B).includes(e)}}},computed:{icon:function(){return this.value?"mobile-issue-close":"close"},shouldShowLabel:function(){return this.label&&"hidden"!==this.labelPosition},helpId:function(){return this.help?"toggle-help-".concat(this.uuid):void 0}},beforeCreate:function(){this.uuid=l,l+=1},methods:{toggleFeature:function(){this.disabled||this.$emit("change",!this.value)}}};const d=o()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"gl-display-flex gl-flex-direction-column gl-mb-0 gl-w-max-content"},[i("span",{staticClass:"gl-toggle-wrapper",class:{"gl-toggle-label-inline":"left"===e.labelPosition,"is-disabled":e.disabled}},[e.shouldShowLabel?i("span",{staticClass:"gl-toggle-label",attrs:{"data-testid":"toggle-label"}},[e._t("label",[e._v(e._s(e.label))])],2):e._e(),e._v(" "),e.name?i("input",{attrs:{name:e.name,type:"hidden"},domProps:{value:e.value}}):e._e(),e._v(" "),i("button",{class:{"gl-toggle":!0,"is-checked":e.value,"is-disabled":e.disabled},attrs:{role:"switch","aria-checked":e.value,"aria-label":e.label,"aria-describedby":e.helpId,type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleFeature(t)}}},[e.isLoading?i("gl-loading-icon",{staticClass:"toggle-loading",attrs:{color:"light"}}):i("span",{class:{"toggle-icon":!0,disabled:e.disabled}},[i("gl-icon",{attrs:{name:e.icon,size:16}})],1)],1)]),e._v(" "),e.help?i("span",{staticClass:"gl-help-label",attrs:{id:e.helpId,"data-testid":"toggle-help"}},[e._t("help",[e._v(e._s(e.help))])],2):e._e()])},staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=d},jltb:function(e,t,i){"use strict";var n=i("s1D3"),a=i("4lAS"),s=i("FkSe"),r=i("LLbv"),o=i("XRO8"),l=i("2ibD"),c=i("GuZl"),d=i("0AwG"),u=i("/lV4"),p=i("71Sp"),m={components:{GlIcon:n.a,GlButton:a.a,GlLoadingIcon:s.a},directives:{GlTooltip:r.a},props:{tooltipText:{type:String,required:!0},link:{type:String,required:!0},actionIcon:{type:String,required:!0}},data:()=>({isDisabled:!1,isLoading:!1}),computed:{cssClass(){const e=Object(d.h)(this.actionIcon);return"".concat(e," js-icon-").concat(e)}},errorCaptured(e,t,i){Object(p.d)("action_component","error: ".concat(e,", info: ").concat(i))},methods:{onClickAction(){var e=this;this.$root.$emit(c.b,"js-ci-action-".concat(this.link)),this.isDisabled=!0,this.isLoading=!0,l.a.post("".concat(this.link,".json")).then((function(){e.isDisabled=!1,e.isLoading=!1,e.$emit("pipelineActionRequestComplete")})).catch((function(t){e.isDisabled=!1,e.isLoading=!1,Object(p.d)("action_component",t),Object(o.c)(Object(u.a)("An error occurred while making the request."))}))}}},h=i("tBpV"),g=Object(h.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{boundary:"viewport"},expression:"{ boundary: 'viewport' }"}],staticClass:"js-ci-action gl-ci-action-icon-container ci-action-icon-container ci-action-icon-wrapper gl-display-flex gl-align-items-center gl-justify-content-center",class:e.cssClass,attrs:{id:"js-ci-action-"+e.link,title:e.tooltipText,disabled:e.isDisabled},on:{click:function(t){return t.stopPropagation(),e.onClickAction(t)}}},[e.isLoading?i("gl-loading-icon",{staticClass:"js-action-icon-loading"}):i("gl-icon",{staticClass:"gl-mr-0!",attrs:{name:e.actionIcon,"aria-label":e.actionIcon}})],1)}),[],!1,null,null,null);t.a=g.exports},lnTC:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=function(){let{mark:e,measures:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.requestAnimationFrame((function(){e&&!performance.getEntriesByName(e).length&&performance.mark(e),t.forEach((function(e){performance.measure(e.name,e.start,e.end)}))}))}},mELm:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("B42D"),a=i.n(n),s=i("pq95");const r={[s.h]:{detailsPath:"details_path",groupId:"id",hasDetails:"has_details",pipelineStatus:["details","status"],sourceJob:["source_job","name"]},[s.b]:{detailsPath:"detailsPath",groupId:"name",hasDetails:"hasDetails",pipelineStatus:"status",sourceJob:["sourceJob","name"]}},o=function(e,t,i){return a()(i,r[e][t])}},nq4Y:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("0zRR"),a=i("/Szx"),s=i("DXSV"),r=i("Vxxt"),o=i("QlUp"),l=i("Tu1i"),c=i("lOuV"),d=i("NSGy"),u=a.a.extend({name:n.D,mixins:[s.a,c.a,r.a,l.a,o.a],inject:{bvGroup:{from:"bvRadioGroup",default:!1}},props:{checked:{default:null}},computed:{isChecked:function(){return Object(d.a)(this.value,this.computedLocalChecked)},isRadio:function(){return!0},isCheck:function(){return!1}},watch:{computedLocalChecked:function(){this.$emit("input",this.computedLocalChecked)}},methods:{handleChange:function(e){var t=e.target.checked,i=this.value;this.computedLocalChecked=i,this.$emit("change",t?i:null),this.isGroup&&this.bvGroup.$emit("change",t?i:null)}}})},qKWp:function(e,t,i){"use strict";var n=i("MV2A"),a=i("4lAS"),s=i("DZUU"),r=i("LLbv"),o=i("tDP3"),l=i("/lV4"),c=i("2Swe"),d=i("Fsq/"),u=i("+kWK"),p={components:{CiIconBadge:c.a,TimeagoTooltip:d.a,UserAvatarImage:u.a,GlLink:n.a,GlButton:a.a,GlTooltip:s.a},directives:{GlTooltip:r.a},EMOJI_REF:"EMOJI_REF",props:{status:{type:Object,required:!0},itemName:{type:String,required:!0},itemId:{type:Number,required:!0},time:{type:String,required:!0},user:{type:Object,required:!1,default:function(){return{}}},hasSidebarButton:{type:Boolean,required:!1,default:!1},shouldRenderTriggeredLabel:{type:Boolean,required:!1,default:!0}},computed:{userAvatarAltText(){return Object(l.f)(Object(l.a)("%{username}'s avatar"),{username:this.user.name})},userPath(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.webPath)||(null===(t=this.user)||void 0===t?void 0:t.path)},avatarUrl(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.avatarUrl)||(null===(t=this.user)||void 0===t?void 0:t.avatar_url)},statusTooltipHTML(){var e,t;const{emoji:i}=(null===(e=this.user)||void 0===e?void 0:e.status)||{};return(i?Object(o.glEmojiTag)(i):"")||(null===(t=this.user)||void 0===t?void 0:t.status_tooltip_html)},message(){var e,t;return null===(e=this.user)||void 0===e?void 0:null===(t=e.status)||void 0===t?void 0:t.message}},methods:{onClickSidebarButton(){this.$emit("clickedSidebarButton")}}},m=i("tBpV"),h=Object(m.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"page-content-header gl-display-flex gl-min-h-7",attrs:{"data-qa-selector":"pipeline_header","data-testid":"ci-header-content"}},[i("section",{staticClass:"header-main-content gl-mr-3"},[i("ci-icon-badge",{attrs:{status:e.status}}),e._v(" "),i("strong",{attrs:{"data-testid":"ci-header-item-text"}},[e._v(" "+e._s(e.itemName)+" #"+e._s(e.itemId)+" ")]),e._v(" "),e.shouldRenderTriggeredLabel?[e._v(e._s(e.__("triggered")))]:[e._v(e._s(e.__("created")))],e._v(" "),i("timeago-tooltip",{attrs:{time:e.time}}),e._v("\n\n    "+e._s(e.__("by"))+"\n\n    "),e.user?[i("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-user-link commit-committer-link",attrs:{href:e.userPath,title:e.user.email}},[i("user-avatar-image",{attrs:{"img-src":e.avatarUrl,"img-alt":e.userAvatarAltText,size:24}}),e._v("\n        "+e._s(e.user.name)+"\n      ")],1),e._v(" "),e.message?i("gl-tooltip",{attrs:{target:function(){return e.$refs[e.$options.EMOJI_REF]}}},[e._v("\n        "+e._s(e.message)+"\n      ")]):e._e(),e._v(" "),e.statusTooltipHTML?i("span",{ref:e.$options.EMOJI_REF,attrs:{"data-testid":e.message},domProps:{innerHTML:e._s(e.statusTooltipHTML)}}):e._e()]:e._e()],2),e._v(" "),e.$slots.default?i("section",{staticClass:"gl-display-flex gl-mr-3",attrs:{"data-testid":"ci-header-action-buttons"}},[e._t("default")],2):e._e(),e._v(" "),e.hasSidebarButton?i("gl-button",{staticClass:"gl-md-display-none gl-ml-auto gl-align-self-start js-sidebar-build-toggle",attrs:{icon:"chevron-double-lg-left","aria-label":e.__("Toggle sidebar")},on:{click:e.onClickSidebarButton}}):e._e()],1)}),[],!1,null,null,null);t.a=h.exports},r5Yj:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"callouts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"featureName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:159}};i.loc.source={body:"query getUser {\n  currentUser {\n    id\n    __typename\n    callouts {\n      __typename\n      nodes {\n        __typename\n        featureName\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getUser=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getUser")},rlkI:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"retryPipeline"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CiPipelineID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineRetry"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100}};i.loc.source={body:"mutation retryPipeline($id: CiPipelineID!) {\n  pipelineRetry(input: { id: $id }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.retryPipeline=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"retryPipeline")},sxGh:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("S26F"),i("TZoF");var n=i("EmJ/"),a=i.n(n);class s{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.defaultAction=this.options.defaultAction,this.action=this.options.action||this.defaultAction,this.hashedTabs=this.options.hashedTabs||!1,"show"===this.action&&(this.action=this.defaultAction),this.currentLocation=window.location,this.hashedTabs&&(this.action=this.currentLocation.hash||this.action);const i="".concat(this.options.parentEl,' a[data-toggle="tab"]');a()(document).off("shown.bs.tab",i).on("shown.bs.tab",i,(function(t){return e.tabShown(t)})),this.activateTab(this.action)}tabShown(e){const t=e.target.getAttribute("href");return this.setCurrentAction(t)}setCurrentAction(e){const t=e;t.replace(/\/+$/,"");const i=this.hashedTabs?t:"".concat(t).concat(this.currentLocation.search).concat(this.currentLocation.hash);return window.history.replaceState({url:i},document.title,i),i}activateTab(){return a()("".concat(this.options.parentEl," a[data-action='").concat(this.action,"']")).tab("show")}}},uwV0:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDagVisData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"jobs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"needs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:527}};i.loc.source={body:"query getDagVisData($projectPath: ID!, $iid: ID!) {\n  project(fullPath: $projectPath) {\n    pipeline(iid: $iid) {\n      id\n      stages {\n        nodes {\n          name\n          groups {\n            nodes {\n              name\n              size\n              jobs {\n                nodes {\n                  name\n                  needs {\n                    nodes {\n                      name\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getDagVisData=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=n[t]||new Set,r=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getDagVisData")}}]);
//# sourceMappingURL=commons-pages.projects.pipelines.builds-pages.projects.pipelines.dag-pages.projects.pipelines.failur-bc0d6564.292864be.chunk.js.map