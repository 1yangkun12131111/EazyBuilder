(this.webpackJsonp=this.webpackJsonp||[]).push([[336],{166:function(e,t,r){r("HVBj"),r("gjpc"),e.exports=r("plhZ")},GVjJ:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c}));r("EWC9"),r("gNBD"),r("orcL");var o=r("0AwG");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=function(e){const t=new FormData(e);return function(e){return e.reduce((function(e,t){let{name:r,value:o}=t;return Object.assign(e,{[r]:o})}),{})}(Array.from(t.keys()).map((function(e){let r=t.getAll(e);return{name:e,value:1===(r=r.filter((function(e){return e}))).length?r[0]:r}})))},c=function(e){if(!e)throw new TypeError("`mountEl` argument is required");return[...e.querySelectorAll("[name]")].reduce((function(e,t){const r=t.dataset.jsName;if(!r)return e;const n=Object(o.c)(r),{id:s,placeholder:l,name:c,value:i,type:u,checked:d}=t,p=a({name:c,id:s,value:i},l&&{placeholder:l});return["radio","checkbox"].includes(u)?a(a({},e),{},{[n]:[...e[n]||[],a(a({},p),{},{checked:d})]}):a(a({},e),{},{[n]:p})}),{})}},ZeWX:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r("QifN"),r("pBsb"),r("Ch9p"),r("+xeR"),r("orcL"),r("pETN");var o=r("EmJ/"),n=r.n(o),a=r("06tH"),s=r.n(a);var l=r("m/7A"),c=r("XRO8"),i=r("2ibD"),u=r("GVjJ"),d=r("3twG"),p=r("/lV4"),h=r("k/Fq");class b{constructor(){!function(){const e=n()("ul.clone-options-dropdown");if(e.length){const t=n()("#clone_url"),r=n()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),a=r.text().trim();a.length>0&&n()("a:contains('".concat(a,"')"),e).addClass("is-active"),n()("a",e).on("click",(function(r){const a=n()(r.currentTarget),s=a.attr("href");if(s&&(s.startsWith("vscode://")||s.startsWith("xcode://")))return;r.preventDefault();const l=a.data("cloneType");n()(".is-active",e).removeClass("is-active"),n()('a[data-clone-type="'.concat(l,'"]')).each((function(){const e=n()(this),t=e.find(".dropdown-menu-inner-title").text(),r=e.closest(".js-git-clone-holder, .js-mobile-git-clone").find(".js-clone-dropdown-label");e.toggleClass("is-active"),r.text(t)})),o?o.dataset.clipboardText=s:t.val(s),n()(".js-git-empty .js-clone").text(s)}))}}(),document.querySelector(".js-project-refs-dropdown")&&(b.initRefSwitcher(),n()(".project-refs-select").on("change",(function(){return n()(this).parents("form").trigger("submit")}))),n()(".hide-no-ssh-message").on("click",(function(e){return s.a.set("hide_no_ssh_message","false"),n()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),n()(".hide-no-password-message").on("click",(function(e){return s.a.set("hide_no_password_message","false"),n()(this).parents(".no-password-message").remove(),e.preventDefault()})),n()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){const t=n()(this).data("project-id"),r="hide_auto_devops_implicitly_enabled_banner_".concat(t);return s.a.set(r,"false"),n()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),b.projectSelectDropdown()}static projectSelectDropdown(){Object(h.a)(),n()(".project-item-select").on("click",(function(e){return b.changeProject(n()(e.currentTarget).val())}))}static changeProject(e){return window.location=e}static initRefSwitcher(){const e=document.createElement("li"),t=document.createElement("a");return t.href="#",n()(".js-project-refs-dropdown").each((function(){const r=n()(this),o=r.data("selected"),a=r.data("fieldName"),s=Boolean(r.data("visit")),h=r.closest("form"),b=h.attr("action"),m=Object(d.q)(Object(u.b)(h[0]),b);return Object(l.a)(r,{data(e,t){i.a.get(r.data("refsUrl"),{params:{ref:r.data("ref"),search:e}}).then((function(e){let{data:r}=e;return t(r)})).catch((function(){return Object(c.c)(Object(p.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:r.data("inputFieldName"),fieldName:a,renderRow(r){const n=e.cloneNode(!1),l=t.cloneNode(!1);return r===o&&(l.className="is-active"),l.textContent=r,l.dataset.ref=r,r.length>0&&s&&(l.href=Object(d.q)({[a]:r},m)),n.appendChild(l),n},id:(e,t)=>t.attr("data-ref"),toggleLabel:(e,t)=>t.text().trim(),clicked(e){const{e:t}=e;if(t.preventDefault(),s){const e=new URL(t.target.href),o=window.location.href;if(o.includes("/-/")){const t=r.data("ref"),n=o.split(t)[1];if(null==n?void 0:n.startsWith("/")){const t=null==n?void 0:n.slice(1).split("#")[0];e.searchParams.set("path",t),e.hash=window.location.hash}}t.metaKey?window.open(e.href,"_blank"):window.location.href=e.href}}})}))}}},gNBD:function(e,t,r){var o=r("ZfjD"),n=r("H81m"),a=r("b05b");o({target:"Object",stat:!0},{fromEntries:function(e){var t={};return n(e,(function(e,r){a(t,e,r)}),{AS_ENTRIES:!0}),t}})},gjpc:function(e,t,r){"use strict";r.r(t);var o=r("CX32");new(r("ZeWX").a),new o.a},"k/Fq":function(e,t,r){"use strict";r("jaBk");var o=r("EmJ/"),n=r.n(o),a=r("qPgm"),s=r("qnJZ"),l=r("/lV4"),c=(r("pBsb"),r("n7CP"));class i{constructor(e){this.projectSelectInput=n()(e),this.newItemBtn=n()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}bindEvents(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}initLocalStorage(){c.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}openDropdown(e){r.e(443).then(r.t.bind(null,"p9g0",7)).then((function(){Object(s.a)(gon.select2_css_path).then((function(){n()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))})).catch((function(){}))}selectProject(){const e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}setBtnTextFromLocalStorage(){const e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}setNewItemBtnAttributes(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}getProjectFromLocalStorage(){const e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}setProjectInLocalStorage(e){const t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}deriveTextVariants(){const e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}const u=function(){Object(s.a)(gon.select2_css_path).then((function(){n()(".ajax-project-select").each((function(e,t){var r=this;let o;const s=n()(t).data("simpleFilter")||!1,c=n()(t).data("select2");return this.groupId=n()(t).data("groupId"),this.userId=n()(t).data("userId"),this.includeGroups=n()(t).data("includeGroups"),this.allProjects=n()(t).data("allProjects")||!1,this.orderBy=n()(t).data("orderBy")||"id",this.withIssuesEnabled=n()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=n()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===n()(t).data("withShared")||n()(t).data("withShared"),this.includeProjectsInSubgroups=n()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=n()(t).data("allowClear")||!1,o=Object(l.e)("ProjectSelect|Search for project"),this.includeGroups&&(o+=Object(l.e)("ProjectSelect| or group")),n()(t).select2({placeholder:o,minimumInputLength:0,query:function(e){let t;const o=function(t){const r={results:t};return e.callback(r)};return t=r.includeGroups?function(t){return a.a.groups(e.term,{},(function(e){const r=e.concat(t);return o(r)}))}:o,r.groupId?a.a.groupProjects(r.groupId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups,order_by:"similarity",simple:!0},t):r.userId?a.a.userProjects(r.userId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},t):a.a.projects(e.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},t)},id:e=>s?e.id:JSON.stringify({name:e.name,url:e.web_url}),text:e=>e.name_with_namespace||e.name,initSelection:(e,t)=>a.a.project(e.val()).then((function(e){let{data:r}=e;return t(r)})),allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),c||s?t:new i(t)}))})).catch((function(){}))};t.a=function(){n()(".ajax-project-select").length&&r.e(443).then(r.t.bind(null,"p9g0",7)).then(u).catch((function(){}))}},plhZ:function(e,t,r){"use strict";r.r(t);var o=r("jB52"),n=r("9Z0O"),a=r("91Ub"),s=r("GuZl"),l=r("0KyK"),c=r("1cpz"),i=r("30su"),u=r("XRO8"),d=r("2ibD"),p=r("3twG"),h=r("/lV4"),b=r("7xOh"),m=Object(b.a)(),f={primaryProps:{text:Object(h.e)("Labels|Promote Label"),attributes:[{variant:"warning"},{category:"primary"}]},cancelProps:{text:Object(h.a)("Cancel")},components:{GlModal:c.a,GlSprintf:i.a},props:{url:{type:String,required:!0},labelTitle:{type:String,required:!0},labelColor:{type:String,required:!0},labelTextColor:{type:String,required:!0},groupName:{type:String,required:!0}},computed:{text(){return Object(h.f)(Object(h.e)("Labels|Promoting %{labelTitle} will make it available for all projects inside %{groupName}.\n        Existing project labels with the same title will be merged. If a group label with the same title exists,\n        it will also be merged. This action cannot be reversed."),{labelTitle:this.labelTitle,groupName:this.groupName})}},methods:{onSubmit(){var e=this;return m.$emit("promoteLabelModal.requestStarted",this.url),d.a.post(this.url,{params:{format:"json"}}).then((function(t){m.$emit("promoteLabelModal.requestFinished",{labelUrl:e.url,successful:!0}),Object(p.D)(t.data.url)})).catch((function(t){m.$emit("promoteLabelModal.requestFinished",{labelUrl:e.url,successful:!1}),Object(u.c)(t)}))}}},g=r("tBpV"),j=Object(g.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("gl-modal",{attrs:{"modal-id":"promote-label-modal","action-primary":e.$options.primaryProps,"action-cancel":e.$options.cancelProps},on:{primary:e.onSubmit}},[r("div",{staticClass:"modal-title-with-label",attrs:{slot:"modal-title"},slot:"modal-title"},[r("gl-sprintf",{attrs:{message:e.s__("Labels|%{spanStart}Promote label%{spanEnd} %{labelTitle} %{spanStart}to Group Label?%{spanEnd}")},scopedSlots:e._u([{key:"labelTitle",fn:function(){return[r("span",{staticClass:"label color-label",style:"background-color: "+e.labelColor+"; color: "+e.labelTextColor+";"},[e._v("\n          "+e._s(e.labelTitle)+"\n        ")])]},proxy:!0},{key:"span",fn:function(t){var o=t.content;return[r("span",[e._v(e._s(o))])]}}])})],1),e._v("\n\n  "+e._s(e.text)+"\n")])}),[],!1,null,null,null).exports;o.default.use(l.a);!function(){Object(a.a)(),Object(n.a)();const e=function(e){let{labelUrl:t,successful:r}=e;const o=document.querySelector('.js-promote-project-label-button[data-url="'.concat(t,'"]'));r||o.removeAttribute("disabled")},t=function(t){document.querySelector('.js-promote-project-label-button[data-url="'.concat(t,'"]')).setAttribute("disabled",""),m.$once("promoteLabelModal.requestFinished",e)},r=document.querySelectorAll(".js-promote-project-label-button");new o.default({el:"#js-promote-label-modal",data:()=>({modalProps:{labelTitle:"",labelColor:"",labelTextColor:"",url:"",groupName:""}}),mounted(){var e=this;m.$on("promoteLabelModal.props",this.setModalProps),m.$emit("promoteLabelModal.mounted"),r.forEach((function(r){r.removeAttribute("disabled"),r.addEventListener("click",(function(){e.$root.$emit(s.c,"promote-label-modal"),m.$once("promoteLabelModal.requestStarted",t),e.setModalProps({labelTitle:r.dataset.labelTitle,labelColor:r.dataset.labelColor,labelTextColor:r.dataset.labelTextColor,url:r.dataset.url,groupName:r.dataset.groupName})}))}))},beforeDestroy(){m.$off("promoteLabelModal.props",this.setModalProps)},methods:{setModalProps(e){this.modalProps=e}},render(e){return e(j,{props:this.modalProps})}})}()}},[[166,1,0,2,3,4,5,20,104]]]);
//# sourceMappingURL=pages.projects.labels.index.25f3c75d.chunk.js.map