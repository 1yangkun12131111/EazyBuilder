(this.webpackJsonp=this.webpackJsonp||[]).push([[311],{143:function(e,t,r){r("HVBj"),r("gjpc"),e.exports=r("zbxM")},zbxM:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"updateFeatureFlag",(function(){return S})),r.d(a,"requestUpdateFeatureFlag",(function(){return j})),r.d(a,"receiveUpdateFeatureFlagSuccess",(function(){return C})),r.d(a,"receiveUpdateFeatureFlagError",(function(){return U})),r.d(a,"fetchFeatureFlag",(function(){return P})),r.d(a,"requestFeatureFlag",(function(){return T})),r.d(a,"receiveFeatureFlagSuccess",(function(){return w})),r.d(a,"receiveFeatureFlagError",(function(){return y})),r.d(a,"toggleActive",(function(){return L}));var n=r("jB52"),s=r("yi8e"),i=r("NmEs"),o=r("dsWN"),c=r("FkSe"),l=r("j00k"),u=r("2ibD"),g=r("/lV4"),d=r("sHIo"),E=r("zMfw"),p=r("PaxP");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={components:{GlAlert:o.a,GlLoadingIcon:c.a,GlToggle:l.a,FeatureFlagForm:p.a},mixins:[Object(d.a)()],inject:{showUserCallout:{},userCalloutId:{default:""},userCalloutsPath:{default:""}},data(){return{userShouldSeeNewFlagAlert:this.showUserCallout}},translations:{legacyReadOnlyFlagAlert:Object(g.e)("FeatureFlags|GitLab is moving to a new way of managing feature flags. This feature flag is read-only, and it will be removed in 14.0. Please create a new feature flag.")},computed:F(F({},Object(s.f)(["path","error","name","description","scopes","strategies","isLoading","hasError","iid","active","version"])),{},{title(){return this.iid?"^".concat(this.iid," ").concat(this.name):Object(g.f)(Object(g.e)("Edit %{name}"),{name:this.name})},deprecated(){return this.version===E.f}}),created(){return this.fetchFeatureFlag()},methods:F(F({},Object(s.c)(["updateFeatureFlag","fetchFeatureFlag","toggleActive"])),{},{dismissNewVersionFlagAlert(){this.userShouldSeeNewFlagAlert=!1,u.a.post(this.userCalloutsPath,{feature_name:this.userCalloutId})}})},h=r("tBpV"),v=Object(h.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoading?r("gl-loading-icon",{staticClass:"gl-mt-7",attrs:{size:"xl"}}):e.isLoading||e.hasError?e._e():[e.deprecated?r("gl-alert",{staticClass:"gl-my-5",attrs:{variant:"warning",dismissible:!1}},[e._v(e._s(e.$options.translations.legacyReadOnlyFlagAlert))]):e._e(),e._v(" "),r("div",{staticClass:"gl-display-flex gl-align-items-center gl-mb-4 gl-mt-4"},[r("gl-toggle",{staticClass:"gl-mr-4",attrs:{value:e.active,"data-testid":"feature-flag-status-toggle","data-track-event":"click_button","data-track-label":"feature_flag_toggle",label:e.__("Feature flag status"),"label-position":"hidden"},on:{change:e.toggleActive}}),e._v(" "),r("h3",{staticClass:"page-title gl-m-0"},[e._v(e._s(e.title))])],1),e._v(" "),e.error.length?r("gl-alert",{staticClass:"gl-mb-5",attrs:{variant:"warning",dismissible:!1}},e._l(e.error,(function(t,a){return r("p",{key:a,staticClass:"gl-mb-0"},[e._v(e._s(t))])})),0):e._e(),e._v(" "),r("feature-flag-form",{attrs:{name:e.name,description:e.description,scopes:e.scopes,strategies:e.strategies,"cancel-path":e.path,"submit-text":e.__("Save changes"),active:e.active,version:e.version},on:{handleSubmit:function(t){return e.updateFeatureFlag(t)}}})]],2)}),[],!1,null,null,null).exports,b=r("ozMb"),O=r("XRO8"),R=r("3twG"),A=r("EgAm");const S=function(e,t){let{state:r,dispatch:a}=e;a("requestUpdateFeatureFlag"),u.a.put(r.endpoint,t.version===E.g?Object(A.c)(t):Object(A.b)(t)).then((function(){a("receiveUpdateFeatureFlagSuccess"),Object(R.D)(r.path)})).catch((function(e){return a("receiveUpdateFeatureFlagError",e.response.data)}))},j=function(e){let{commit:t}=e;return t("REQUEST_UPDATE_FEATURE_FLAG")},C=function(e){let{commit:t}=e;return t("RECEIVE_UPDATE_FEATURE_FLAG_SUCCESS")},U=function(e,t){let{commit:r}=e;return r("RECEIVE_UPDATE_FEATURE_FLAG_ERROR",t)},P=function(e){let{state:t,dispatch:r}=e;r("requestFeatureFlag"),u.a.get(t.endpoint).then((function(e){let{data:t}=e;return r("receiveFeatureFlagSuccess",t)})).catch((function(){return r("receiveFeatureFlagError")}))},T=function(e){let{commit:t}=e;return t("REQUEST_FEATURE_FLAG")},w=function(e,t){let{commit:r}=e;return r("RECEIVE_FEATURE_FLAG_SUCCESS",t)},y=function(e){let{commit:t}=e;t("RECEIVE_FEATURE_FLAG_ERROR"),Object(O.c)(Object(g.a)("Something went wrong on our end. Please try again!"))},L=function(e,t){let{commit:r}=e;return r("TOGGLE_ACTIVE",t)};r("z4I3");var I={REQUEST_FEATURE_FLAG(e){e.isLoading=!0},RECEIVE_FEATURE_FLAG_SUCCESS(e,t){e.isLoading=!1,e.hasError=!1,e.name=t.name,e.description=t.description,e.iid=t.iid,e.active=t.active,e.scopes=Object(A.e)(t.scopes),e.strategies=Object(A.d)(t.strategies),e.version=t.version||E.f},RECEIVE_FEATURE_FLAG_ERROR(e){e.isLoading=!1,e.hasError=!0},REQUEST_UPDATE_FEATURE_FLAG(e){e.isSendingRequest=!0,e.error=[]},RECEIVE_UPDATE_FEATURE_FLAG_SUCCESS(e){e.isSendingRequest=!1},RECEIVE_UPDATE_FEATURE_FLAG_ERROR(e,t){e.isSendingRequest=!1,e.error=t.message||[]},TOGGLE_ACTIVE(e,t){e.active=t}},G=function(e){let{path:t,endpoint:r}=e;return{endpoint:r,path:t,isSendingRequest:!1,error:[],name:null,description:null,scopes:[],isLoading:!1,hasError:!1,iid:null,active:!0,strategies:[],version:E.f}};n.default.use(s.b);!function(){const e=document.querySelector("#js-edit-feature-flag"),{environmentsScopeDocsPath:t,strategyTypeDocsPagePath:r,endpoint:o,featureFlagsPath:c,environmentsEndpoint:l,projectId:u,featureFlagIssuesEndpoint:g,userCalloutsPath:d,userCalloutId:E,showUserCallout:p}=e.dataset;return new n.default({store:(f={endpoint:o,projectId:u,path:c},new s.b.Store({actions:a,mutations:I,state:G(f),modules:{userLists:Object(b.a)(f)}})),el:e,provide:{environmentsScopeDocsPath:t,strategyTypeDocsPagePath:r,environmentsEndpoint:l,projectId:u,featureFlagIssuesEndpoint:g,userCalloutsPath:d,userCalloutId:E,showUserCallout:Object(i.K)(p)},render:e=>e(v)});var f}()}},[[143,1,0,6,2,3,4,5,9,11,13,17,20,67,94,117]]]);
//# sourceMappingURL=pages.projects.feature_flags.edit.3e676a01.chunk.js.map