(this.webpackJsonp=this.webpackJsonp||[]).push([[79],{"Ge+5":function(t,e,r){"use strict";var n=r("4lAS"),a=r("Pyw5"),i=r.n(a);const s={name:"CloseButton",components:{GlButton:n.a},props:{label:{type:String,required:!1,default:"Close"}}};const o=i()({render:function(){var t=this.$createElement;return(this._self._c||t)("gl-button",this._g(this._b({attrs:{category:"tertiary",size:"small",icon:"close","aria-label":this.label}},"gl-button",this.$attrs,!1),this.$listeners))},staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=o},LLbv:function(t,e,r){"use strict";r.d(e,"a",(function(){return D}));var n=r("0zRR"),a=r("EGUT"),i=r("qTlp"),s=r("NSGy"),o=r("TjC/"),l=r("t8l0"),c=r("EGlP"),u=r("BrvI"),d=r("Ddgg"),p=r("7bmO"),g=r("RhHz");function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v="__BV_Tooltip__",m={focus:!0,hover:!0,click:!0,blur:!0,manual:!0},y=/^html$/i,O=/^noninteractive$/i,_=/^nofade$/i,P=/^(auto|top(left|right)?|bottom(left|right)?|left(top|bottom)?|right(top|bottom)?)$/i,C=/^(window|viewport|scrollParent)$/i,j=/^d\d+$/i,k=/^ds\d+$/i,T=/^dh\d+$/i,E=/^o-?\d+$/i,S=/^v-.+$/i,I=/\s+/,A=function(t,e,r){if(c.g){var f=function(t,e){var r={title:void 0,trigger:"",placement:"top",fallbackPlacement:"flip",container:!1,animation:!0,offset:0,id:null,html:!1,interactive:!0,disabled:!1,delay:Object(l.b)(n.Eb,"delay"),boundary:String(Object(l.b)(n.Eb,"boundary")),boundaryPadding:Object(d.c)(Object(l.b)(n.Eb,"boundaryPadding"),0),variant:Object(l.b)(n.Eb,"variant"),customClass:Object(l.b)(n.Eb,"customClass")};if(Object(u.l)(t.value)||Object(u.g)(t.value)?r.title=t.value:Object(u.e)(t.value)?r.title=t.value:Object(u.i)(t.value)&&(r=b(b({},r),t.value)),Object(u.m)(r.title)){var a=e.data||{};r.title=a.attrs&&!Object(u.n)(a.attrs.title)?a.attrs.title:void 0}Object(u.i)(r.delay)||(r.delay={show:Object(d.c)(r.delay,0),hide:Object(d.c)(r.delay,0)}),t.arg&&(r.container="#".concat(t.arg)),Object(p.i)(t.modifiers).forEach((function(t){if(y.test(t))r.html=!0;else if(O.test(t))r.interactive=!1;else if(_.test(t))r.animation=!1;else if(P.test(t))r.placement=t;else if(C.test(t))t="scrollparent"===t?"scrollParent":t,r.boundary=t;else if(j.test(t)){var e=Object(d.c)(t.slice(1),0);r.delay.show=e,r.delay.hide=e}else k.test(t)?r.delay.show=Object(d.c)(t.slice(2),0):T.test(t)?r.delay.hide=Object(d.c)(t.slice(2),0):E.test(t)?r.offset=Object(d.c)(t.slice(1),0):S.test(t)&&(r.variant=t.slice(2)||null)}));var s={};return Object(o.b)(r.trigger||"").filter(i.a).join(" ").trim().toLowerCase().split(I).forEach((function(t){m[t]&&(s[t]=!0)})),Object(p.i)(t.modifiers).forEach((function(t){t=t.toLowerCase(),m[t]&&(s[t]=!0)})),r.trigger=Object(p.i)(s).join(" "),"blur"===r.trigger&&(r.trigger="focus"),r.trigger||(r.trigger="hover focus"),r}(e,r);if(!t[v]){var h=r.context;t[v]=new g.a({parent:h,_scopeId:Object(a.a)(h,void 0)}),t[v].__bv_prev_data__={},t[v].$on("show",(function(){Object(u.e)(f.title)&&t[v].updateData({title:f.title(t)})}))}var A={title:f.title,triggers:f.trigger,placement:f.placement,fallbackPlacement:f.fallbackPlacement,variant:f.variant,customClass:f.customClass,container:f.container,boundary:f.boundary,delay:f.delay,offset:f.offset,noFade:!f.animation,id:f.id,interactive:f.interactive,disabled:f.disabled,html:f.html},D=t[v].__bv_prev_data__;if(t[v].__bv_prev_data__=A,!Object(s.a)(A,D)){var x={target:t};Object(p.i)(A).forEach((function(e){A[e]!==D[e]&&(x[e]="title"===e&&Object(u.e)(A[e])?A[e](t):A[e])})),t[v].updateData(x)}}},D={bind:function(t,e,r){A(t,e,r)},componentUpdated:function(t,e,r){r.context.$nextTick((function(){A(t,e,r)}))},unbind:function(t){!function(t){t[v]&&(t[v].$destroy(),t[v]=null),delete t[v]}(t)}}},Lzak:function(t,e,r){"use strict";var n=r("0zRR"),a=r("/Szx"),i=r("lgrP"),s=r("t8l0"),o=r("7bmO"),l=r("ua/H"),c=r("U9NU"),u=r("1m+M");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=Object(o.k)(u.b,["event","routerTag"]);delete g.href.default,delete g.to.default;var f=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({tag:{type:String,default:"span"},variant:{type:String,default:function(){return Object(s.b)(n.c,"variant")}},pill:{type:Boolean,default:!1}},g),b=a.a.extend({name:n.c,functional:!0,props:f,render:function(t,e){var r=e.props,n=e.data,a=e.children,s=Object(c.d)(r),o=s?u.a:r.tag,d={staticClass:"badge",class:[r.variant?"badge-".concat(r.variant):"badge-secondary",{"badge-pill":r.pill,active:r.active,disabled:r.disabled}],props:s?Object(l.a)(g,r):{}};return t(o,Object(i.a)(n,d),a)}}),h=r("XBTk"),v=r("s1D3"),m=r("Pyw5"),y=r.n(m);const O={components:{BBadge:b,GlIcon:v.a},inheritAttrs:!1,props:{size:{type:String,default:h.h.md,validator:function(t){return void 0!==h.h[t]},required:!1},variant:{type:String,default:h.i.muted,validator:function(t){return void 0!==h.i[t]},required:!1},icon:{type:String,required:!1,default:null}},computed:{hasIconOnly:function(){return Boolean(this.icon&&0===Object.keys(this.$slots).length)},role:function(){return this.hasIconOnly?"img":void 0}}};const _=y()({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-badge",t._b({class:["gl-badge",t.size],attrs:{variant:t.variant,role:t.role,pill:""}},"b-badge",t.$attrs,!1),[t.icon?r("gl-icon",{staticClass:"gl-badge-icon",class:{"gl-mr-2":!t.hasIconOnly},attrs:{name:t.icon}}):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]},void 0,O,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=_},QwBj:function(t,e,r){"use strict";r.d(e,"b",(function(){return a}));const n={ABORTED:0,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,ALREADY_REPORTED:208,IM_USED:226,MULTIPLE_CHOICES:300,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,CONFLICT:409,GONE:410,UNPROCESSABLE_ENTITY:422,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500,SERVICE_UNAVAILABLE:503},a=[n.OK,n.CREATED,n.ACCEPTED,n.NON_AUTHORITATIVE_INFORMATION,n.NO_CONTENT,n.RESET_CONTENT,n.PARTIAL_CONTENT,n.MULTI_STATUS,n.ALREADY_REPORTED,n.IM_USED];e.a=n},TBBL:function(t,e,r){"use strict";var n=r("Pyw5");const a={props:{lines:{type:Number,required:!1,default:3,validator:function(t){return t>0&&t<4}}},computed:{lineClasses:function(){return new Array(this.lines).fill().map((function(t,e){return"skeleton-line-".concat(e+1)}))}}};const i=r.n(n)()({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"animation-container"},this._l(this.lineClasses,(function(t,r){return e("div",{key:r,class:t})})),0)},staticRenderFns:[]},void 0,a,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=i},dsWN:function(t,e,r){"use strict";var n=r("XBTk"),a=r("Ge+5"),i=r("4lAS"),s=r("s1D3"),o=r("Pyw5"),l=r.n(o);function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const p={components:{GlIcon:s.a,CloseButton:a.a,GlButton:i.a},props:{title:{type:String,required:!1,default:""},dismissible:{type:Boolean,required:!1,default:!0},dismissLabel:{type:String,required:!1,default:"Dismiss"},variant:{type:String,required:!1,default:n.c.info,validator:function(t){return Object.keys(n.c).includes(t)}},primaryButtonLink:{type:String,required:!1,default:""},primaryButtonText:{type:String,required:!1,default:""},secondaryButtonLink:{type:String,required:!1,default:""},secondaryButtonText:{type:String,required:!1,default:""},contained:{type:Boolean,required:!1,default:!1},sticky:{type:Boolean,required:!1,default:!1}},computed:{iconName:function(){return n.b[this.variant]},shouldRenderActions:function(){return Boolean(this.$slots.actions||this.actionButtons.length)},actionButtons:function(){return[{text:this.primaryButtonText,attrs:{href:this.primaryButtonLink,variant:"confirm",category:n.u.primary},listeners:{click:this.primaryButtonClicked}},{text:this.secondaryButtonText,attrs:{href:this.secondaryButtonLink,variant:"default",category:n.u.secondary},listeners:{click:this.secondaryButtonClicked}}].reduce((function(t,e){if(!e.text)return t;var r=d({},e.attrs);return r.href||delete r.href,t.push(d(d({},e),{},{attrs:r})),t}),[])},variantClass:function(){return"gl-alert-".concat(this.variant)}},methods:{primaryButtonClicked:function(t){this.$emit("primaryAction",t)},secondaryButtonClicked:function(t){this.$emit("secondaryAction",t)},onDismiss:function(){this.$emit("dismiss")}}};const g=l()({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:["gl-alert",{"gl-alert-max-content":t.contained},{"gl-alert-sticky":t.sticky},{"gl-alert-not-dismissible":!t.dismissible},t.variantClass]},[r("div",{staticClass:"gl-alert-container"},[r("gl-icon",{class:{"gl-alert-icon":!0,"gl-alert-icon-no-title":!t.title},attrs:{name:t.iconName}}),t._v(" "),t.dismissible?r("close-button",{ref:"dismiss",staticClass:"gl-dismiss-btn",attrs:{label:t.dismissLabel},on:{click:t.onDismiss}}):t._e(),t._v(" "),r("div",{staticClass:"gl-alert-content",attrs:{role:"alert"}},[t.title?r("h4",{staticClass:"gl-alert-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),r("div",{staticClass:"gl-alert-body"},[t._t("default")],2),t._v(" "),t.shouldRenderActions?r("div",{staticClass:"gl-alert-actions"},[t._t("actions",t._l(t.actionButtons,(function(e,n){return r("gl-button",t._g(t._b({key:n,staticClass:"gl-alert-action"},"gl-button",e.attrs,!1),e.listeners),[t._v("\n            "+t._s(e.text)+"\n          ")])})))],2):t._e()])],1)])},staticRenderFns:[]},void 0,p,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=g},hqF9:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("NmEs"),a=r("QwBj");class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.options.data=t.data||{},this.options.notificationCallback=t.notificationCallback||function(){},this.intervalHeader="POLL-INTERVAL",this.timeoutID=null,this.canPoll=!0}checkConditions(t){var e=this;const r=Object(n.I)(t.headers),i=parseInt(r[this.intervalHeader],10);i>0&&-1!==a.b.indexOf(t.status)&&this.canPoll&&(this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){e.makeRequest()}),i)),this.options.successCallback(t)}makeDelayedRequest(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.timeoutID=setTimeout((function(){return t.makeRequest()}),e)}makeRequest(){var t=this;const{resource:e,method:r,data:n,errorCallback:i,notificationCallback:s}=this.options;return s(!0),e[r](n).then((function(e){t.checkConditions(e),s(!1)})).catch((function(t){s(!1),t.status!==a.a.ABORTED&&i(t)}))}stop(){this.canPoll=!1,clearTimeout(this.timeoutID)}enable(t){t&&t.data&&(this.options.data=t.data),this.canPoll=!0,t&&t.response&&this.checkConditions(t.response)}restart(t){this.enable(t),this.makeRequest()}}},oznN:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"reportSentryError",(function(){return G})),r.d(n,"fetchClusters",(function(){return q})),r.d(n,"setPage",(function(){return U}));var a=r("jB52"),i=(r("MoW5"),r("AVOg"),r("Lzak")),s=r("MV2A"),o=r("FkSe"),l=r("qVG1"),c=r("TBBL"),u=r("30su"),d=r("znvU"),p=r("LLbv"),g=r("yi8e"),f=r("/lV4");const b={default:{tableText:Object(f.e)("ClusterIntegration|Unknown Error"),title:Object(f.e)("ClusterIntegration|Unknown Error"),description:Object(f.e)("ClusterIntegration|An unknown error occurred while attempting to connect to Kubernetes."),troubleshootingTips:[Object(f.e)("ClusterIntegration|Check your cluster status"),Object(f.e)("ClusterIntegration|Make sure your API endpoint is correct"),Object(f.e)("ClusterIntegration|Node calculations use the Kubernetes Metrics API. Make sure your cluster has metrics installed")]},authentication_error:{tableText:Object(f.e)("ClusterIntegration|Unable to Authenticate"),title:Object(f.e)("ClusterIntegration|Authentication Error"),description:Object(f.e)("ClusterIntegration|GitLab failed to authenticate."),troubleshootingTips:[Object(f.e)("ClusterIntegration|Check your token"),Object(f.e)("ClusterIntegration|Check your CA certificate")]},connection_error:{tableText:Object(f.e)("ClusterIntegration|Unable to Connect"),title:Object(f.e)("ClusterIntegration|Connection Error"),description:Object(f.e)("ClusterIntegration|GitLab failed to connect to the cluster."),troubleshootingTips:[Object(f.e)("ClusterIntegration|Check your cluster status"),Object(f.e)("ClusterIntegration|Make sure your API endpoint is correct")]},http_error:{tableText:Object(f.e)("ClusterIntegration|Unable to Connect"),title:Object(f.e)("ClusterIntegration|HTTP Error"),description:Object(f.e)("ClusterIntegration|There was an HTTP error when connecting to your cluster."),troubleshootingTips:[Object(f.e)("ClusterIntegration|Check your cluster status")]}},h={project_type:Object(f.a)("Project"),group_type:Object(f.a)("Group"),instance_type:Object(f.a)("Instance")},v={default:{className:"bg-white",title:Object(f.a)("Unknown")},disabled:{className:"disabled",title:Object(f.a)("Disabled")},created:{className:"bg-success",title:Object(f.a)("Connected")},unreachable:{className:"bg-danger",title:Object(f.a)("Unreachable")},authentication_failure:{className:"bg-warning",title:Object(f.a)("Authentication Failure")},deleting:{title:Object(f.a)("Deleting")},creating:{title:Object(f.a)("Creating")}};var m=r("dsWN");function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _={components:{GlLink:s.a,GlSprintf:u.a,GlAlert:m.a},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(g.f)(["ancestorHelperPath","hasAncestorClusters"]))},P=r("tBpV"),C=Object(P.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.hasAncestorClusters?r("gl-alert",{staticClass:"gl-my-4",attrs:{variant:"info",dismissible:!1}},[r("gl-sprintf",{attrs:{message:t.s__("ClusterIntegration|Clusters are utilized by selecting the nearest ancestor with a matching environment scope. For example, project clusters will override group clusters. %{linkStart}More information%{linkEnd}")},scopedSlots:t._u([{key:"link",fn:function(e){var n=e.content;return[r("gl-link",{attrs:{href:t.ancestorHelperPath}},[r("strong",[t._v(t._s(n))])])]}}],null,!1,1068668578)})],1):t._e()}),[],!1,null,null,null).exports,j=r("s1D3"),k=r("A7K0"),T={components:{GlIcon:j.a,GlPopover:k.a},props:{errorType:{type:String,required:!1,default:""},popoverId:{type:String,required:!0}},computed:{errorContent(){return b[this.errorType]||b.default}}},E=Object(P.a)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:t.popoverId}},[r("span",{staticClass:"gl-font-style-italic"},[t._v("\n    "+t._s(t.errorContent.tableText)+"\n  ")]),t._v(" "),r("gl-icon",{staticClass:"gl-p-2",attrs:{name:"status_warning",size:24}}),t._v(" "),r("gl-popover",{attrs:{container:t.popoverId,target:t.popoverId,placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[r("span",{staticClass:"gl-display-block gl-text-left"},[t._v(t._s(t.errorContent.title))])]},proxy:!0}])},[t._v(" "),r("p",{staticClass:"gl-text-left"},[t._v(t._s(t.errorContent.description))]),t._v(" "),r("p",{staticClass:"gl-text-left"},[t._v(t._s(t.s__("ClusterIntegration|Troubleshooting tips:")))]),t._v(" "),r("ul",{staticClass:"gl-text-left"},t._l(t.errorContent.troubleshootingTips,(function(e){return r("li",{key:e},[t._v("\n        "+t._s(e)+"\n      ")])})),0)])],1)}),[],!1,null,null,null).exports;function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var D={nodeMemoryText:Object(f.a)("%{totalMemory} (%{freeSpacePercentage}%{percentSymbol} free)"),nodeCpuText:Object(f.a)("%{totalCpu} (%{freeSpacePercentage}%{percentSymbol} free)"),components:{AncestorNotice:C,GlBadge:i.a,GlLink:s.a,GlLoadingIcon:o.a,GlPagination:l.a,GlSkeletonLoading:c.a,GlSprintf:u.a,GlTable:d.a,NodeErrorHelpText:E},directives:{GlTooltip:p.a},computed:I(I({},Object(g.f)(["clusters","clustersPerPage","loadingClusters","loadingNodes","page","providers","totalCulsters"])),{},{contentAlignClasses:()=>"gl-display-flex gl-align-items-center gl-justify-content-end gl-justify-content-md-start",currentPage:{get(){return this.page},set(t){this.setPage(t),this.fetchClusters()}},fields:()=>[{key:"name",label:Object(f.a)("Kubernetes cluster")},{key:"environment_scope",label:Object(f.a)("Environment scope")},{key:"node_size",label:Object(f.a)("Nodes")},{key:"total_cpu",label:Object(f.a)("Total cores (CPUs)")},{key:"total_memory",label:Object(f.a)("Total memory (GB)")},{key:"cluster_type",label:Object(f.a)("Cluster level"),formatter:function(t){return h[t]}}],hasClusters(){return this.clustersPerPage>0}}),mounted(){this.fetchClusters()},methods:I(I({},Object(g.c)(["fetchClusters","reportSentryError","setPage"])),{},{k8sQuantityToGb(t){if(!t)return 0;if(t.endsWith(Object(f.a)("Ki")))return 1024e-9*parseInt(t.substr(0,t.length-2),10);if(t.endsWith(Object(f.a)("Mi")))return.001048576*parseInt(t.substr(0,t.length-2),10);throw new Error("UnknownK8sMemoryQuantity:".concat(t))},k8sQuantityToCpu(t){if(!t)return 0;if(t.endsWith("m"))return parseInt(t.substr(0,t.length-1),10)/1e3;if(t.endsWith("n"))return parseInt(t.substr(0,t.length-1),10)/1e9;throw new Error("UnknownK8sCpuQuantity:".concat(t))},selectedProvider(t){return this.providers[t]||this.providers.default},statusTitle(t){const e=v[t]||v.default;return Object(f.f)(Object(f.a)("Status: %{title}"),{title:e.title},!1)},totalMemoryAndUsage(t){var e=this;try{if(t&&t[0].usage){let r=0,n=0;t.reduce((function(t,a){const i=a.status.allocatable.memory,s=e.k8sQuantityToGb(i);r+=s;const o=a.usage.memory,l=e.k8sQuantityToGb(o);return n+=l,null}),0);const a=100*(1-n/r);return{totalMemory:r.toFixed(2),freeSpacePercentage:Math.round(a)}}}catch(t){this.reportSentryError({error:t,tag:"totalMemoryAndUsageError"})}return{totalMemory:null,freeSpacePercentage:null}},totalCpuAndUsage(t){var e=this;try{if(t&&t[0].usage){let r=0,n=0;t.reduce((function(t,a){const i=a.status.allocatable.cpu,s=e.k8sQuantityToCpu(i);r+=s;const o=a.usage.cpu,l=e.k8sQuantityToCpu(o);return n+=l,null}),0);const a=100*(1-n/r);return{totalCpu:r.toFixed(2),freeSpacePercentage:Math.round(a)}}}catch(t){this.reportSentryError({error:t,tag:"totalCpuAndUsageError"})}return{totalCpu:null,freeSpacePercentage:null}}})},x=Object(P.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loadingClusters?r("gl-loading-icon",{staticClass:"gl-mt-3",attrs:{size:"md"}}):r("section",[r("ancestor-notice"),t._v(" "),r("gl-table",{staticClass:"qa-clusters-table",attrs:{items:t.clusters,fields:t.fields,stacked:"md","data-testid":"cluster_list_table"},scopedSlots:t._u([{key:"cell(name)",fn:function(e){var n=e.item;return[r("div",{class:[t.contentAlignClasses,"js-status"]},[r("img",{staticClass:"gl-w-6 gl-h-6 gl-display-flex gl-align-items-center",attrs:{src:t.selectedProvider(n.provider_type).path,alt:t.selectedProvider(n.provider_type).text}}),t._v(" "),r("gl-link",{staticClass:"gl-px-3",attrs:{"data-qa-selector":"cluster","data-qa-cluster-name":n.name,href:n.path}},[t._v("\n          "+t._s(n.name)+"\n        ")]),t._v(" "),"deleting"===n.status||"creating"===n.status?r("gl-loading-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{title:t.statusTitle(n.status),size:"sm"}}):t._e()],1)]}},{key:"cell(node_size)",fn:function(e){var n=e.item;return[n.nodes?r("span",[t._v(t._s(n.nodes.length))]):t.loadingNodes?r("gl-skeleton-loading",{class:t.contentAlignClasses,attrs:{lines:1}}):n.kubernetes_errors?r("NodeErrorHelpText",{class:t.contentAlignClasses,attrs:{"error-type":n.kubernetes_errors.connection_error,"popover-id":"nodeSizeError"+n.id}}):t._e()]}},{key:"cell(total_cpu)",fn:function(e){var n=e.item;return[n.nodes?r("span",[r("gl-sprintf",{attrs:{message:t.$options.nodeCpuText},scopedSlots:t._u([{key:"totalCpu",fn:function(){return[t._v(t._s(t.totalCpuAndUsage(n.nodes).totalCpu))]},proxy:!0},{key:"freeSpacePercentage",fn:function(){return[t._v(t._s(t.totalCpuAndUsage(n.nodes).freeSpacePercentage))]},proxy:!0},{key:"percentSymbol",fn:function(){return[t._v("%")]},proxy:!0}],null,!0)})],1):t.loadingNodes?r("gl-skeleton-loading",{class:t.contentAlignClasses,attrs:{lines:1}}):n.kubernetes_errors?r("NodeErrorHelpText",{class:t.contentAlignClasses,attrs:{"error-type":n.kubernetes_errors.node_connection_error,"popover-id":"nodeCpuError"+n.id}}):t._e()]}},{key:"cell(total_memory)",fn:function(e){var n=e.item;return[n.nodes?r("span",[r("gl-sprintf",{attrs:{message:t.$options.nodeMemoryText},scopedSlots:t._u([{key:"totalMemory",fn:function(){return[t._v(t._s(t.totalMemoryAndUsage(n.nodes).totalMemory))]},proxy:!0},{key:"freeSpacePercentage",fn:function(){return[t._v(t._s(t.totalMemoryAndUsage(n.nodes).freeSpacePercentage))]},proxy:!0},{key:"percentSymbol",fn:function(){return[t._v("%")]},proxy:!0}],null,!0)})],1):t.loadingNodes?r("gl-skeleton-loading",{class:t.contentAlignClasses,attrs:{lines:1}}):n.kubernetes_errors?r("NodeErrorHelpText",{class:t.contentAlignClasses,attrs:{"error-type":n.kubernetes_errors.metrics_connection_error,"popover-id":"nodeMemoryError"+n.id}}):t._e()]}},{key:"cell(cluster_type)",fn:function(e){var n=e.value;return[r("gl-badge",{attrs:{variant:"muted"}},[t._v("\n        "+t._s(n)+"\n      ")])]}}])}),t._v(" "),t.hasClusters?r("gl-pagination",{attrs:{"per-page":t.clustersPerPage,"total-items":t.totalCulsters,"prev-text":t.__("Prev"),"next-text":t.__("Next"),align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null).exports,w=r("cT/n"),N=r("XRO8"),L=r("2ibD"),B=r("NmEs"),R=r("hqF9");const G=function(t,e){let{error:r,tag:n}=e;w.d((function(t){t.setTag("javascript_clusters_list",n),w.a(r)}))},q=function(t){let{state:e,commit:r,dispatch:n}=t,a=0;r("SET_LOADING_NODES",!0);const i=new R.a({resource:{fetchClusters:function(t){return L.a.get(t)}},data:"".concat(e.endpoint,"?page=").concat(e.page),method:"fetchClusters",successCallback:function(t){let{data:e,headers:s}=t;a+=1;try{if(e.clusters){const t=Object(B.I)(s),n=Object(B.L)(t);r("SET_CLUSTERS_DATA",{data:e,paginationInformation:n}),r("SET_LOADING_CLUSTERS",!1),function(t,e){return e>3||t.every((function(t){return null!=t.nodes}))}(e.clusters,a)&&(i.stop(),r("SET_LOADING_NODES",!1))}}catch(t){i.stop(),r("SET_LOADING_CLUSTERS",!1),r("SET_LOADING_NODES",!1),n("reportSentryError",{error:t,tag:"fetchClustersSuccessCallback"})}},errorCallback:function(t){i.stop(),r("SET_LOADING_CLUSTERS",!1),r("SET_LOADING_NODES",!1),Object(N.c)(Object(f.a)("Clusters|An error occurred while loading clusters")),n("reportSentryError",{error:t,tag:"fetchClustersErrorCallback"})}});i.makeRequest()},U=function(t,e){let{commit:r}=t;r("SET_PAGE",e)};r("EWC9");var M={SET_LOADING_CLUSTERS(t,e){t.loadingClusters=e},SET_LOADING_NODES(t,e){t.loadingNodes=e},SET_CLUSTERS_DATA(t,e){let{data:r,paginationInformation:n}=e;Object.assign(t,{clusters:r.clusters,clustersPerPage:n.perPage,hasAncestorClusters:r.has_ancestor_clusters,totalCulsters:n.total})},SET_PAGE(t,e){t.page=Number(e)||1}},$=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ancestorHelperPath:t.ancestorHelpPath,endpoint:t.endpoint,hasAncestorClusters:!1,clusters:[],clustersPerPage:0,loadingClusters:!0,loadingNodes:!0,page:1,providers:{aws:{path:t.imgTagsAwsPath,text:t.imgTagsAwsText},default:{path:t.imgTagsDefaultPath,text:t.imgTagsDefaultText},gcp:{path:t.imgTagsGcpPath,text:t.imgTagsGcpText}},totalCulsters:0}};a.default.use(g.b);const F=function(t){return new g.b.Store({actions:n,mutations:M,state:$(t)})};e.a=function(){!function(t){const e=document.querySelector("#js-clusters-list-app");e&&new t({el:e,store:F(e.dataset),render:t=>t(x)})}(a.default)}},qVG1:function(t,e,r){"use strict";var n=r("Tmea"),a=r.n(n),i=r("KFC0"),s=r.n(i),o=r("j5yP"),l=r.n(o),c=r("eVUo"),u=r("XBTk"),d=r("s1D3"),p=r("MV2A"),g=r("Pyw5"),f=r.n(g);function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const m={name:"Pagination",components:{GlLink:p.a,GlIcon:d.a},model:{prop:"value",event:"input"},props:{value:{type:Number,required:!1,default:1,validator:function(t){return t>0}},perPage:{type:Number,required:!1,default:20,validator:function(t){return t>0}},totalItems:{type:Number,required:!1,default:0},limits:{type:Object,required:!1,default:function(){return{xs:0,sm:3,md:9,default:9}},validator:function(t){return 0===Object.keys(c.a).filter((function(e){return!t[e]})).length||t.default}},linkGen:{type:Function,required:!1,default:null},prevPage:{type:Number,required:!1,default:null},prevText:{type:String,required:!1,default:"Prev"},nextPage:{type:Number,required:!1,default:null},nextText:{type:String,required:!1,default:"Next"},ellipsisText:{type:String,required:!1,default:"…"},labelFirstPage:{type:String,required:!1,default:"Go to first page"},labelPrevPage:{type:String,required:!1,default:"Go to previous page"},labelNextPage:{type:String,required:!1,default:"Go to next page"},labelLastPage:{type:String,required:!1,default:"Go to last page"},labelPage:{type:Function,required:!1,default:function(t){return"Go to page ".concat(t)}},align:{type:String,required:!1,default:u.d.left,validator:function(t){return Object.keys(u.d).includes(t)}},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{breakpoint:c.b.getBreakpointSize(),minTotalPagesToCollapse:4}},computed:{isVisible:function(){return this.totalPages>1||this.isCompactPagination},isLinkBased:function(){return s()(this.linkGen)},paginationLimit:function(){return void 0!==this.limits[this.breakpoint]?this.limits[this.breakpoint]:this.limits.default},maxAdjacentPages:function(){return Math.max(Math.ceil((this.paginationLimit-1)/2),0)},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)},isFillAlign:function(){return this.align===u.d.fill},wrapperClasses:function(){var t=[];return this.align===u.d.center&&t.push("justify-content-center"),this.align===u.d.right&&t.push("justify-content-end"),this.isFillAlign&&t.push("text-center"),t},shouldCollapseLeftSide:function(){var t=this.value-this.maxAdjacentPages;return t>=this.maxAdjacentPages&&t>3&&this.totalPages>this.minTotalPagesToCollapse},shouldCollapseRightSide:function(){return this.totalPages-2-this.value>this.maxAdjacentPages&&this.totalPages>this.minTotalPagesToCollapse},visibleItems:function(){var t,e,r=this,n=[];if(!this.isCompactPagination){var a=this.shouldCollapseLeftSide?this.value-this.maxAdjacentPages:1;a=Math.min(a,this.totalPages-1);var i=this.shouldCollapseRightSide?this.value+this.maxAdjacentPages:this.totalPages;i=Math.max(i,2),n=(t=a,e=i,l()(t,e+1,1)).map((function(t){return r.getPageItem(t)})),this.shouldCollapseLeftSide&&n.splice(0,0,this.getPageItem(1,this.labelFirstPage),this.getEllipsisItem("left")),this.shouldCollapseRightSide&&n.push(this.getEllipsisItem("right"),this.getPageItem(this.totalPages,this.labelLastPage))}return n},isCompactPagination:function(){return Boolean(!this.totalItems&&(this.prevPage||this.nextPage))},prevPageIsDisabled:function(){return this.pageIsDisabled(this.value-1)},nextPageIsDisabled:function(){return this.pageIsDisabled(this.value+1)}},created:function(){window.addEventListener("resize",a()(this.setBreakpoint,u.z))},beforeDestroy:function(){window.removeEventListener("resize",a()(this.setBreakpoint,u.z))},methods:{setBreakpoint:function(){this.breakpoint=c.b.getBreakpointSize()},pageIsDisabled:function(t){return this.disabled||t<1||this.isCompactPagination&&t>this.value&&!this.nextPage||!this.isCompactPagination&&t>this.totalPages},getPageItem:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={"aria-label":r||this.labelPage(t),href:"#",class:[]},a=t===this.value,i=this.pageIsDisabled(t),s=v({},n),o={};return a&&s.class.push("active"),this.isLinkBased&&(s.href=this.linkGen(t)),o.click=function(r){return e.handleClick(r,t)},{content:t,component:i?"span":p.a,disabled:i,key:"page_".concat(t),slot:"page-number",slotData:{page:t,active:a,disabled:i},attrs:s,listeners:o}},getEllipsisItem:function(t){return{content:this.ellipsisText,key:"ellipsis_".concat(t),slot:"ellipsis-".concat(t),component:"span",disabled:!0}},handleClick:function(t,e){this.isLinkBased||(t.preventDefault(),this.$emit("input",e))}}};const y=f()({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isVisible?r("ul",{staticClass:"pagination gl-pagination text-nowrap",class:t.wrapperClasses,attrs:{role:"navigation","aria-label":"Pagination"}},[r("li",{staticClass:"page-item",class:{disabled:t.prevPageIsDisabled,"flex-fill":t.isFillAlign}},[r(t.prevPageIsDisabled?"span":"a",{tag:"component",staticClass:"gl-link page-link prev-page-item gl-display-flex",attrs:{"aria-disabled":t.prevPageIsDisabled,"aria-label":t.labelPrevPage||t.labelPage(t.value-1),href:t.isLinkBased?t.linkGen(t.value-1):"#"},on:{click:function(e){return t.handleClick(e,t.value-1)}}},[t._t("previous",[r("gl-icon",{attrs:{name:"chevron-left"}}),t._v(" "),r("span",[t._v(t._s(t.prevText))])],null,{page:t.value-1,disabled:t.prevPageIsDisabled})],2)],1),t._v(" "),t._l(t.visibleItems,(function(e){return r("li",{key:e.key,staticClass:"page-item",class:{disabled:e.disabled,"flex-fill":t.isFillAlign}},[r(e.component,t._g(t._b({tag:"component",staticClass:"page-link",attrs:{size:"md","aria-disabled":e.disabled}},"component",e.attrs,!1),e.listeners),[t._t(e.slot,[t._v(t._s(e.content))],null,e.slotData)],2)],1)})),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:t.nextPageIsDisabled,"flex-fill":t.isFillAlign}},[r(t.nextPageIsDisabled?"span":"a",{tag:"component",staticClass:"gl-link page-link next-page-item gl-display-flex",attrs:{"aria-disabled":t.nextPageIsDisabled,"aria-label":t.labelNextPage||t.labelPage(t.value+1),href:t.isLinkBased?t.linkGen(t.value+1):"#"},on:{click:function(e){return t.handleClick(e,t.value+1)}}},[t._t("next",[r("span",[t._v(t._s(t.nextText))]),t._v(" "),r("gl-icon",{attrs:{name:"chevron-right"}})],null,{page:t.value+1,disabled:t.nextPageIsDisabled})],2)],1)],2):t._e()},staticRenderFns:[]},void 0,m,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=y}}]);
//# sourceMappingURL=commons-pages.admin.clusters.index-pages.groups.clusters.index-pages.projects.clusters.index.dc1b0d60.chunk.js.map