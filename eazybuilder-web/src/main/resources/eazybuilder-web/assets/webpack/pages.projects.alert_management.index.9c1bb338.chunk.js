(this.webpackJsonp=this.webpackJsonp||[]).push([[279],{"+BSi":function(e,t,n){"use strict";n.r(t);var a=n("gr1B"),i=n("jB52"),r=n("GiFX"),s=n("5v28"),l=n("NmEs"),o=n("2+u0"),d=n("dsLq"),u=n("4lAS"),c=n("MV2A"),m=n("/lV4"),v=n("k0gs"),g=n.n(v),k={i18n:{emptyState:{title:Object(m.e)("AlertManagement|Surface alerts in GitLab"),info:Object(m.e)("AlertManagement|Display alerts from all your monitoring tools directly within GitLab. Streamline the investigation of your alerts and the escalation of alerts to incidents."),buttonText:Object(m.e)("AlertManagement|Authorize external service")},moreInformation:Object(m.e)("AlertManagement|More information")},components:{GlEmptyState:d.a,GlButton:u.a,GlLink:c.a},apollo:{alertsHelpUrl:{query:g.a}},inject:["enableAlertManagementPath","userCanEnableAlertManagement","emptyAlertSvgPath"],data:()=>({alertsHelpUrl:""})},f=n("tBpV"),p=Object(f.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("gl-empty-state",{attrs:{title:e.$options.i18n.emptyState.title,"svg-path":e.emptyAlertSvgPath},scopedSlots:e._u([{key:"description",fn:function(){return[n("div",{staticClass:"gl-display-block"},[n("span",[e._v(e._s(e.$options.i18n.emptyState.info))]),e._v(" "),n("gl-link",{attrs:{href:e.alertsHelpUrl,target:"_blank"}},[e._v("\n          "+e._s(e.$options.i18n.moreInformation)+"\n        ")])],1),e._v(" "),e.userCanEnableAlertManagement?n("div",{staticClass:"gl-display-block center gl-pt-4"},[n("gl-button",{attrs:{category:"primary",variant:"confirm",href:e.enableAlertManagementPath}},[e._v("\n          "+e._s(e.$options.i18n.emptyState.buttonText)+"\n        ")])],1):e._e()]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,h=n("dsWN"),b=n("FkSe"),S=n("znvU"),y=n("IO2v"),N=n("mFhR"),A=n("tbP8"),O=n("s1D3"),E=n("30su"),T=n("LLbv"),D=n("aQrP"),w=n.n(D),j=n("0AwG"),_=n("3twG"),P=n("yyWf"),C=n("OgzN"),M=n("6ZJc"),U=n("JWNE"),F=n("Fsq/");const V={CRITICAL:Object(m.e)("severity|Critical"),HIGH:Object(m.e)("severity|High"),MEDIUM:Object(m.e)("severity|Medium"),LOW:Object(m.e)("severity|Low"),INFO:Object(m.e)("severity|Info"),UNKNOWN:Object(m.e)("severity|Unknown")},I=[{title:Object(m.e)("AlertManagement|Open"),status:"OPEN",filters:["TRIGGERED","ACKNOWLEDGED"]},{title:Object(m.e)("AlertManagement|Triggered"),status:"TRIGGERED",filters:"TRIGGERED"},{title:Object(m.e)("AlertManagement|Acknowledged"),status:"ACKNOWLEDGED",filters:"ACKNOWLEDGED"},{title:Object(m.e)("AlertManagement|Resolved"),status:"RESOLVED",filters:"RESOLVED"},{title:Object(m.e)("AlertManagement|All alerts"),status:"ALL",filters:["TRIGGERED","ACKNOWLEDGED","RESOLVED"]}];var $=n("dqhN"),L=n.n($);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q={trackAlertListViewsOptions:{category:"Alert Management",action:"view_alerts_list"},i18n:{noAlertsMsg:Object(m.e)("AlertManagement|No alerts available to display. See %{linkStart}enabling alert management%{linkEnd} for more information on adding alerts to the list."),errorMsg:Object(m.e)("AlertManagement|There was an error displaying the alerts. Confirm your endpoint's configuration details to ensure alerts appear."),unassigned:Object(m.a)("Unassigned"),closed:Object(m.a)("closed")},fields:[{key:"severity",label:Object(m.e)("AlertManagement|Severity"),thClass:"".concat(M.f," gl-w-eighth"),thAttr:{"data-testid":"alert-management-severity-sort"},tdClass:"".concat(M.e," rounded-top text-capitalize sortable-cell"),sortable:!0},{key:"startedAt",label:Object(m.e)("AlertManagement|Start time"),thClass:"".concat(M.f," js-started-at w-15p"),tdClass:"".concat(M.e," sortable-cell"),sortable:!0},{key:"alertLabel",label:Object(m.e)("AlertManagement|Alert"),thClass:"gl-pointer-events-none",tdClass:M.e},{key:"eventCount",label:Object(m.e)("AlertManagement|Events"),thClass:"".concat(M.f," text-right gl-w-12"),tdClass:"".concat(M.e," text-md-right sortable-cell"),sortable:!0},{key:"issue",label:Object(m.e)("AlertManagement|Incident"),thClass:"gl-w-15p gl-pointer-events-none",tdClass:M.e},{key:"assignees",label:Object(m.e)("AlertManagement|Assignees"),thClass:"gl-w-eighth gl-pointer-events-none",tdClass:M.e},{key:"status",label:Object(m.e)("AlertManagement|Status"),thClass:"".concat(M.f," w-15p"),tdClass:"".concat(M.e," rounded-bottom sortable-cell"),sortable:!0}],severityLabels:V,statusTabs:I,components:{AlertsDeprecationWarning:C.a,GlAlert:h.a,GlLoadingIcon:b.a,GlTable:S.a,GlAvatarsInline:y.a,GlAvatarLink:N.a,GlAvatar:A.a,TimeAgo:F.a,GlIcon:O.a,GlLink:c.a,GlSprintf:E.a,AlertStatus:P.a,PaginatedTableWithSearchAndTabs:U.a},directives:{GlTooltip:T.a},inject:["projectPath","textQuery","assigneeUsernameQuery","populatingAlertsHelpUrl"],apollo:{alerts:{fetchPolicy:s.fetchPolicies.CACHE_AND_NETWORK,query:w.a,variables(){return{searchTerm:this.searchTerm,assigneeUsername:this.assigneeUsername,projectPath:this.projectPath,statuses:this.statusFilter,sort:this.sort,firstPageSize:this.pagination.firstPageSize,lastPageSize:this.pagination.lastPageSize,prevPageCursor:this.pagination.prevPageCursor,nextPageCursor:this.pagination.nextPageCursor}},update(e){const{alertManagementAlerts:{nodes:t=[],pageInfo:n={}}={}}=e.project||{},a=new Date;return{list:t.map((function(e){const t=new Date(e.startedAt),n=a-t;return G(G({},e),{},{isNew:n<432e5})})),pageInfo:n}},error(){this.errored=!0}},alertsCount:{fetchPolicy:s.fetchPolicies.CACHE_AND_NETWORK,query:L.a,variables(){return{searchTerm:this.searchTerm,assigneeUsername:this.assigneeUsername,projectPath:this.projectPath}},update(e){var t;return null===(t=e.project)||void 0===t?void 0:t.alertManagementAlertStatusCounts}}},data(){return{errored:!1,serverErrorMessage:"",isErrorAlertDismissed:!1,sort:"STARTED_AT_DESC",statusFilter:[],filteredByStatus:"",alerts:{},alertsCount:{},sortBy:"startedAt",sortDesc:!0,sortDirection:"desc",searchTerm:this.textQuery,assigneeUsername:this.assigneeUsernameQuery,pagination:M.d}},computed:{showErrorMsg(){return this.errored&&!this.isErrorAlertDismissed},showNoAlertsMsg(){var e;return!(this.errored||this.loading||0!==(null===(e=this.alertsCount)||void 0===e?void 0:e.all)||this.searchTerm||this.assigneeUsername||this.isErrorAlertDismissed)},loading(){return this.$apollo.queries.alerts.loading},isEmpty(){var e,t;return!(null===(e=this.alerts)||void 0===e?void 0:null===(t=e.list)||void 0===t?void 0:t.length)}},methods:{fetchSortedData(e){let{sortBy:t,sortDesc:n}=e;const a=n?"DESC":"ASC",i=Object(j.e)(t).toUpperCase();this.pagination=M.d,this.sort="".concat(i,"_").concat(a)},navigateToAlertDetails(e,t,n){let{iid:a}=e,{metaKey:i}=n;return Object(_.D)(Object(_.p)(window.location.pathname,a,"details"),i)},hasAssignees(e){var t;return Boolean(null===(t=e.nodes)||void 0===t?void 0:t.length)},getIssueMeta(e){let{issue:{iid:t,state:n}}=e;return{state:"closed"===n?"(".concat(this.$options.i18n.closed,")"):"",link:Object(_.p)("/",this.projectPath,"-","issues/incident",t)}},tbodyTrClass(e){return{[M.a]:!this.loading&&!this.isEmpty,"new-alert":null==e?void 0:e.isNew}},handleAlertError(e){this.errored=!0,this.serverErrorMessage=e},handleStatusUpdate(){this.$apollo.queries.alerts.refetch(),this.$apollo.queries.alertsCount.refetch()},pageChanged(e){this.pagination=e},statusChanged(e){let{filters:t,status:n}=e;this.statusFilter=t,this.filteredByStatus=n},filtersChanged(e){let{searchTerm:t,assigneeUsername:n}=e;this.searchTerm=t,this.assigneeUsername=n},errorAlertDismissed(){this.errored=!1,this.serverErrorMessage="",this.isErrorAlertDismissed=!0}}},H={components:{AlertManagementEmptyState:p,AlertManagementTable:Object(f.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showNoAlertsMsg?n("gl-alert",{on:{dismiss:e.errorAlertDismissed}},[n("gl-sprintf",{attrs:{message:e.$options.i18n.noAlertsMsg},scopedSlots:e._u([{key:"link",fn:function(t){var a=t.content;return[n("gl-link",{staticClass:"gl-display-inline-block",attrs:{href:e.populatingAlertsHelpUrl,target:"_blank"}},[e._v("\n          "+e._s(a)+"\n        ")])]}}],null,!1,2999367924)})],1):e._e(),e._v(" "),n("alerts-deprecation-warning"),e._v(" "),n("paginated-table-with-search-and-tabs",{attrs:{"show-error-msg":e.showErrorMsg,i18n:e.$options.i18n,items:e.alerts.list||[],"page-info":e.alerts.pageInfo,"items-count":e.alertsCount,"status-tabs":e.$options.statusTabs,"track-views-options":e.$options.trackAlertListViewsOptions,"server-error-message":e.serverErrorMessage,"filter-search-tokens":["assignee_username"],"filter-search-key":"alerts"},on:{"page-changed":e.pageChanged,"tabs-changed":e.statusChanged,"filters-changed":e.filtersChanged,"error-alert-dismissed":e.errorAlertDismissed},scopedSlots:e._u([{key:"header-actions",fn:function(){},proxy:!0},{key:"title",fn:function(){return[e._v("\n      "+e._s(e.s__("AlertManagement|Alerts"))+"\n    ")]},proxy:!0},{key:"table",fn:function(){return[n("gl-table",{staticClass:"alert-management-table",attrs:{items:e.alerts?e.alerts.list:[],fields:e.$options.fields,"show-empty":!0,busy:e.loading,stacked:"md","tbody-tr-class":e.tbodyTrClass,"no-local-sorting":!0,"sort-direction":e.sortDirection,"sort-desc":e.sortDesc,"sort-by":e.sortBy,"sort-icon-left":"",fixed:""},on:{"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"row-clicked":e.navigateToAlertDetails,"sort-changed":e.fetchSortedData},scopedSlots:e._u([{key:"cell(severity)",fn:function(t){var a=t.item;return[n("div",{staticClass:"d-inline-flex align-items-center justify-content-between",attrs:{"data-testid":"severityField"}},[n("gl-icon",{staticClass:"mr-2",class:"icon-"+a.severity.toLowerCase(),attrs:{size:12,name:"severity-"+a.severity.toLowerCase()}}),e._v("\n            "+e._s(e.$options.severityLabels[a.severity])+"\n          ")],1)]}},{key:"cell(startedAt)",fn:function(t){var a=t.item;return[a.startedAt?n("time-ago",{attrs:{time:a.startedAt}}):e._e()]}},{key:"cell(eventCount)",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.eventCount)+"\n        ")]}},{key:"cell(alertLabel)",fn:function(t){var a=t.item;return[n("div",{staticClass:"gl-max-w-full text-truncate",attrs:{title:a.iid+" - "+a.title,"data-testid":"idField"}},[e._v("\n            #"+e._s(a.iid)+" "+e._s(a.title)+"\n          ")])]}},{key:"cell(issue)",fn:function(t){var a=t.item;return[a.issue?n("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{title:a.issue.title,"data-testid":"issueField",href:e.getIssueMeta(a).link}},[e._v("\n            #"+e._s(a.issue.iid)+" "+e._s(e.getIssueMeta(a).state)+"\n          ")]):n("div",{attrs:{"data-testid":"issueField"}},[e._v(e._s(e.s__("AlertManagement|None")))])]}},{key:"cell(assignees)",fn:function(t){var a=t.item;return[n("div",{attrs:{"data-testid":"assigneesField"}},[e.hasAssignees(a.assignees)?[n("gl-avatars-inline",{attrs:{avatars:a.assignees.nodes,collapsed:!0,"max-visible":4,"avatar-size":24,"badge-tooltip-prop":"name","badge-tooltip-max-chars":100},scopedSlots:e._u([{key:"avatar",fn:function(e){var t=e.avatar;return[n("gl-avatar-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],key:t.username,attrs:{target:"_blank",href:t.webUrl,title:t.name}},[n("gl-avatar",{attrs:{src:t.avatarUrl,label:t.name,size:24}})],1)]}}],null,!0)})]:[e._v("\n              "+e._s(e.$options.i18n.unassigned)+"\n            ")]],2)]}},{key:"cell(status)",fn:function(t){var a=t.item;return[n("alert-status",{attrs:{alert:a,"project-path":e.projectPath,"is-sidebar":!1},on:{"alert-error":e.handleAlertError,"hide-dropdown":e.handleStatusUpdate}})]}},{key:"empty",fn:function(){return[e._v("\n          "+e._s(e.s__("AlertManagement|No alerts to display."))+"\n        ")]},proxy:!0},{key:"table-busy",fn:function(){return[n("gl-loading-icon",{staticClass:"mt-3",attrs:{size:"lg",color:"dark"}})]},proxy:!0}])})]},proxy:!0}])})],1)}),[],!1,null,null,null).exports},inject:["alertManagementEnabled"]},z=Object(f.a)(H,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.alertManagementEnabled?t("alert-management-table"):t("alert-management-empty-state")],1)}),[],!1,null,null,null).exports;i.default.use(r.default);!function(){const e=document.querySelector("#js-alert_management"),{projectPath:t,enableAlertManagementPath:n,emptyAlertSvgPath:d,populatingAlertsHelpUrl:u,alertsHelpUrl:c,textQuery:m,assigneeUsernameQuery:v,alertManagementEnabled:k,userCanEnableAlertManagement:f,hasManagedPrometheus:p}=e.dataset,h=new r.default({defaultClient:Object(s.default)({},{cacheConfig:{dataIdFromObject:function(e){return"AlertManagementAlert"===e.__typename?e.iid:Object(a.c)(e)}}})});h.clients.defaultClient.cache.writeQuery({query:g.a,data:{alertsHelpUrl:c}}),new i.default({el:"#js-alert_management",components:{AlertManagementList:z},provide:{projectPath:t,textQuery:m,assigneeUsernameQuery:v,enableAlertManagementPath:n,populatingAlertsHelpUrl:u,emptyAlertSvgPath:d,alertManagementEnabled:Object(l.K)(k),trackAlertStatusUpdateOptions:o.a.OPERATIONS.TRACK_ALERT_STATUS_UPDATE_OPTIONS,userCanEnableAlertManagement:Object(l.K)(f),hasManagedPrometheus:Object(l.K)(p)},apolloProvider:h,render:e=>e("alert-management-list")})}()},108:function(e,t,n){n("HVBj"),n("gjpc"),e.exports=n("+BSi")},"2+u0":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var a=n("/lV4");const i={CRITICAL:Object(a.e)("severity|Critical"),HIGH:Object(a.e)("severity|High"),MEDIUM:Object(a.e)("severity|Medium"),LOW:Object(a.e)("severity|Low"),INFO:Object(a.e)("severity|Info"),UNKNOWN:Object(a.e)("severity|Unknown")},r={OPERATIONS:{TITLE:"OPERATIONS",STATUSES:{TRIGGERED:Object(a.e)("AlertManagement|Triggered"),ACKNOWLEDGED:Object(a.e)("AlertManagement|Acknowledged"),RESOLVED:Object(a.e)("AlertManagement|Resolved")},TRACK_ALERTS_DETAILS_VIEWS_OPTIONS:{category:"Alert Management",action:"view_alert_details"},TRACK_ALERT_STATUS_UPDATE_OPTIONS:{category:"Alert Management",action:"update_alert_status",label:"Status"}},THREAT_MONITORING:{TITLE:"THREAT_MONITORING",STATUSES:{TRIGGERED:Object(a.e)("ThreatMonitoring|Unreviewed"),ACKNOWLEDGED:Object(a.e)("ThreatMonitoring|In review"),RESOLVED:Object(a.e)("ThreatMonitoring|Resolved"),IGNORED:Object(a.e)("ThreatMonitoring|Dismissed")}}}},"5JsC":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Author"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}],loc:{start:0,end:72}};n.loc.source={body:"fragment Author on User {\n  id\n  avatarUrl\n  name\n  username\n  webUrl\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Es90:function(e,t,n){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateAlertStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AlertManagementStatus"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateAlertStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}},{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alert"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AlertNote"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:379}};a.loc.source={body:'#import "../fragments/alert_note.fragment.graphql"\n\nmutation updateAlertStatus($projectPath: ID!, $status: AlertManagementStatus!, $iid: String!) {\n  updateAlertStatus(input: { iid: $iid, status: $status, projectPath: $projectPath }) {\n    errors\n    alert {\n      iid\n      status\n      endedAt\n      notes {\n        nodes {\n          ...AlertNote\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};a.definitions=a.definitions.concat(n("Mzr0").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var r={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=a,e.exports.updateAlertStatus=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,i=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){i.has(e)||(i.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return i.forEach((function(t){var a=s(e,t);a&&n.definitions.push(a)})),n}(a,"updateAlertStatus")},JjqP:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AlertListItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlertManagementAlert"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"severity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eventCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:254}};n.loc.source={body:"fragment AlertListItem on AlertManagementAlert {\n  iid\n  title\n  severity\n  status\n  startedAt\n  eventCount\n  issue {\n    iid\n    state\n    title\n    webUrl\n  }\n  assignees {\n    nodes {\n      name\n      username\n      avatarUrl\n      webUrl\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Mzr0:function(e,t,n){var a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AlertNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"systemNoteIconName"},arguments:[],directives:[]}]}}],loc:{start:0,end:196}};a.loc.source={body:'#import "./author.fragment.graphql"\n\nfragment AlertNote on Note {\n  id\n  author {\n    id\n    state\n    ...Author\n  }\n  body\n  bodyHtml\n  createdAt\n  discussion {\n    id\n  }\n  systemNoteIconName\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};a.definitions=a.definitions.concat(n("5JsC").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))),e.exports=a},aQrP:function(e,t,n){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlerts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"statuses"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AlertManagementStatus"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"AlertManagementAlertSort"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"firstPageSize"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lastPageSize"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prevPageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"StringValue",value:"",block:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"StringValue",value:"",block:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"StringValue",value:"",block:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assigneeUsername"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"StringValue",value:"",block:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"domain"}},type:{kind:"NamedType",name:{kind:"Name",value:"AlertManagementDomainFilter"}},defaultValue:{kind:"EnumValue",value:"operations"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"alertManagementAlerts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}}},{kind:"Argument",name:{kind:"Name",value:"assigneeUsername"},value:{kind:"Variable",name:{kind:"Name",value:"assigneeUsername"}}},{kind:"Argument",name:{kind:"Name",value:"statuses"},value:{kind:"Variable",name:{kind:"Name",value:"statuses"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"firstPageSize"}}},{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"lastPageSize"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}}},{kind:"Argument",name:{kind:"Name",value:"before"},value:{kind:"Variable",name:{kind:"Name",value:"prevPageCursor"}}},{kind:"Argument",name:{kind:"Name",value:"domain"},value:{kind:"Variable",name:{kind:"Name",value:"domain"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AlertListItem"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startCursor"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:875}};a.loc.source={body:'#import "~/graphql_shared/fragments/alert.fragment.graphql"\n\nquery getAlerts(\n  $projectPath: ID!\n  $statuses: [AlertManagementStatus!]\n  $sort: AlertManagementAlertSort\n  $firstPageSize: Int\n  $lastPageSize: Int\n  $prevPageCursor: String = ""\n  $nextPageCursor: String = ""\n  $searchTerm: String = ""\n  $assigneeUsername: String = ""\n  $domain: AlertManagementDomainFilter = operations\n) {\n  project(fullPath: $projectPath) {\n    alertManagementAlerts(\n      search: $searchTerm\n      assigneeUsername: $assigneeUsername\n      statuses: $statuses\n      sort: $sort\n      first: $firstPageSize\n      last: $lastPageSize\n      after: $nextPageCursor\n      before: $prevPageCursor\n      domain: $domain\n    ) {\n      nodes {\n        ...AlertListItem\n      }\n      pageInfo {\n        hasNextPage\n        endCursor\n        hasPreviousPage\n        startCursor\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};a.definitions=a.definitions.concat(n("JjqP").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var r={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=a,e.exports.getAlerts=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,i=new Set,l=new Set;for(a.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){i.has(e)||(i.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return i.forEach((function(t){var a=s(e,t);a&&n.definitions.push(a)})),n}(a,"getAlerts")},dqhN:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlertsCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assigneeUsername"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:{kind:"StringValue",value:"",block:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"alertManagementAlertStatusCounts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}}},{kind:"Argument",name:{kind:"Name",value:"assigneeUsername"},value:{kind:"Variable",name:{kind:"Name",value:"assigneeUsername"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"all"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"open"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acknowledged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggered"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:311}};n.loc.source={body:'query getAlertsCount($searchTerm: String, $projectPath: ID!, $assigneeUsername: String = "") {\n  project(fullPath: $projectPath) {\n    alertManagementAlertStatusCounts(search: $searchTerm, assigneeUsername: $assigneeUsername) {\n      all\n      open\n      acknowledged\n      resolved\n      triggered\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=n,e.exports.getAlertsCount=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,s=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(t){var a=i(e,t);a&&n.definitions.push(a)})),n}(n,"getAlertsCount")},k0gs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"alertsHelpUrl"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"alertsHelpUrl"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:48}};n.loc.source={body:"query alertsHelpUrl {\n  alertsHelpUrl @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=n,e.exports.alertsHelpUrl=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,s=new Set,l=new Set;for(r.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){s.has(e)||(s.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return s.forEach((function(t){var a=i(e,t);a&&n.definitions.push(a)})),n}(n,"alertsHelpUrl")},yyWf:function(e,t,n){"use strict";n("jaBk"),n("KcQl");var a=n("Yyc1"),i=n("wP8z"),r=n("Es90"),s=n.n(r),l=n("/lV4"),o=n("4ZIW"),d=n("2+u0"),u={i18n:{UPDATE_ALERT_STATUS_ERROR:Object(l.e)("AlertManagement|There was an error while updating the status of the alert."),UPDATE_ALERT_STATUS_INSTRUCTION:Object(l.e)("AlertManagement|Please try again.")},components:{GlDropdown:a.a,GlDropdownItem:i.a},inject:{trackAlertStatusUpdateOptions:{default:null}},props:{projectPath:{type:String,required:!0},alert:{type:Object,required:!0},isDropdownShowing:{type:Boolean,required:!1},isSidebar:{type:Boolean,required:!0},statuses:{type:Object,required:!1,default:function(){return d.a.OPERATIONS.STATUSES}}},computed:{dropdownClass(){return this.isSidebar?this.isDropdownShowing?"show":"gl-display-none":""}},methods:{updateAlertStatus(e){var t=this;this.$emit("handle-updating",!0),this.$apollo.mutate({mutation:s.a,variables:{iid:this.alert.iid,status:e,projectPath:this.projectPath}}).then((function(n){var a,i;t.trackAlertStatusUpdateOptions&&t.trackStatusUpdate(t.statuses[e]);const r=(null===(a=n.data)||void 0===a?void 0:null===(i=a.updateAlertStatus)||void 0===i?void 0:i.errors)||[];r[0]&&t.$emit("alert-error","".concat(t.$options.i18n.UPDATE_ALERT_STATUS_ERROR," ").concat(r[0])),t.$emit("hide-dropdown")})).catch((function(){t.$emit("alert-error","".concat(t.$options.i18n.UPDATE_ALERT_STATUS_ERROR," ").concat(t.$options.i18n.UPDATE_ALERT_STATUS_INSTRUCTION))})).finally((function(){t.$emit("handle-updating",!1)}))},trackStatusUpdate(e){const{category:t,action:n,label:a}=this.trackAlertStatusUpdateOptions;o.a.event(t,n,{label:a,property:e})}}},c=n("tBpV"),m=Object(c.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown dropdown-menu-selectable",class:e.dropdownClass},[n("gl-dropdown",{ref:"dropdown",staticClass:"w-100",attrs:{right:"",text:e.statuses[e.alert.status],"toggle-class":"dropdown-menu-toggle"},on:{hide:function(t){return e.$emit("hide-dropdown")}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("hide-dropdown")}}},[e.isSidebar?n("p",{staticClass:"gl-new-dropdown-header-top",attrs:{"data-testid":"dropdown-header"}},[e._v("\n      "+e._s(e.s__("AlertManagement|Assign status"))+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"dropdown-content dropdown-body"},e._l(e.statuses,(function(t,a){return n("gl-dropdown-item",{key:a,attrs:{"data-testid":"statusDropdownItem",active:a===e.alert.status,"active-class":"is-active"},on:{click:function(t){return e.updateAlertStatus(a)}}},[e._v("\n        "+e._s(t)+"\n      ")])})),1)])],1)}),[],!1,null,null,null);t.a=m.exports}},[[108,1,0,6,2,3,4,5,7,38,43,57,108]]]);
//# sourceMappingURL=pages.projects.alert_management.index.9c1bb338.chunk.js.map