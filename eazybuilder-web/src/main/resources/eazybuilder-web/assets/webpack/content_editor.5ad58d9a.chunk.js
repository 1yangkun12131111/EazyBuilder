(this.webpackJsonp=this.webpackJsonp||[]).push([[151],{"5tFN":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));const r="Escape",o="Enter",i="Backspace"},Er7F:function(t,e,n){"use strict";n.r(e);var r=n("SXvo"),o=n("OPr9"),i=n("4ZIW"),a=n("Zhdn"),c=n("tBpV"),s=Object(c.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"gl-mx-3 gl-border-r-solid gl-border-r-1 gl-border-gray-200"})}),[],!1,null,null,null).exports,u=n("4lAS"),l=n("LLbv"),d={components:{GlButton:u.a},directives:{GlTooltip:l.a},props:{iconName:{type:String,required:!0},tiptapEditor:{type:r.a,required:!0},contentType:{type:String,required:!0},label:{type:String,required:!0},editorCommand:{type:String,required:!1,default:""}},computed:{isActive(){return this.tiptapEditor.isActive(this.contentType)&&this.tiptapEditor.isFocused}},methods:{execute(){const{contentType:t}=this;this.editorCommand&&this.tiptapEditor.chain()[this.editorCommand]().focus().run(),this.$emit("execute",{contentType:t})}}};var p={components:{ToolbarButton:Object(c.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"gl-mx-2",class:{active:this.isActive},attrs:{category:"tertiary",size:"small","aria-label":this.label,title:this.label,icon:this.iconName},on:{click:this.execute}})}),[],!1,null,null,null).exports,Divider:s},mixins:[i.a.mixin({label:a.a})],props:{contentEditor:{type:o.a,required:!0}},methods:{trackToolbarControlExecution(t){let{contentType:e,value:n}=t;this.track(a.e,{property:e,value:n})}}},b=Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gl-display-flex gl-justify-content-end gl-pb-3 gl-pt-0 gl-border-b-solid gl-border-b-1 gl-border-b-gray-200"},[n("toolbar-button",{attrs:{"data-testid":"bold","content-type":"bold","icon-name":"bold","editor-command":"toggleBold",label:t.__("Bold text"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}}),t._v(" "),n("toolbar-button",{attrs:{"data-testid":"italic","content-type":"italic","icon-name":"italic","editor-command":"toggleItalic",label:t.__("Italic text"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}}),t._v(" "),n("toolbar-button",{attrs:{"data-testid":"code","content-type":"code","icon-name":"code","editor-command":"toggleCode",label:t.__("Code"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}}),t._v(" "),n("divider"),t._v(" "),n("toolbar-button",{attrs:{"data-testid":"blockquote","content-type":"blockquote","icon-name":"quote","editor-command":"toggleBlockquote",label:t.__("Insert a quote"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}}),t._v(" "),n("toolbar-button",{attrs:{"data-testid":"bullet-list","content-type":"bulletList","icon-name":"list-bulleted","editor-command":"toggleBulletList",label:t.__("Add a bullet list"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}}),t._v(" "),n("toolbar-button",{attrs:{"data-testid":"ordered-list","content-type":"orderedList","icon-name":"list-numbered","editor-command":"toggleOrderedList",label:t.__("Add a numbered list"),"tiptap-editor":t.contentEditor.tiptapEditor},on:{execute:t.trackToolbarControlExecution}})],1)}),[],!1,null,null,null).exports,f={components:{TiptapEditorContent:r.b,TopToolbar:b},props:{contentEditor:{type:o.a,required:!0}}},m=Object(c.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"md md-area",class:{"is-focused":this.contentEditor.tiptapEditor.isFocused}},[e("top-toolbar",{staticClass:"gl-mb-4",attrs:{"content-editor":this.contentEditor}}),this._v(" "),e("tiptap-editor-content",{attrs:{editor:this.contentEditor.tiptapEditor}})],1)}),[],!1,null,null,null);e.default=m.exports},OPr9:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("jaBk");class r{constructor(t){let{tiptapEditor:e,serializer:n}=t;this._tiptapEditor=e,this._serializer=n}get tiptapEditor(){return this._tiptapEditor}async setSerializedContent(t){const{_tiptapEditor:e,_serializer:n}=this;e.commands.setContent(await n.deserialize({schema:e.schema,content:t}))}getSerializedContent(){const{_tiptapEditor:t,_serializer:e}=this;return e.serialize({schema:t.schema,content:t.getJSON()})}}},Zhdn:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return s}));var r=n("/lV4");const o=Object(r.e)("ContentEditor|You have to provide a renderMarkdown function or a custom serializer"),i="content_editor",a="execute_toolbar_control",c="execute_keyboard_shortcut",s="execute_input_rule"},uIQL:function(t,e,n){"use strict";n.r(e),n.d(e,"createContentEditor",(function(){return Ft}));var r={};n.r(r),n.d(r,"tiptapExtension",(function(){return z})),n.d(r,"serializer",(function(){return C}));var o={};n.r(o),n.d(o,"tiptapExtension",(function(){return S})),n.d(o,"serializer",(function(){return T}));var i={};n.r(i),n.d(i,"tiptapExtension",(function(){return D})),n.d(i,"serializer",(function(){return q}));var a={};n.r(a),n.d(a,"tiptapExtension",(function(){return A})),n.d(a,"serializer",(function(){return F}));var c={};n.r(c),n.d(c,"tiptapExtension",(function(){return J})),n.d(c,"serializer",(function(){return W}));var s={};n.r(s),n.d(s,"tiptapExtension",(function(){return Z}));var u={};n.r(u),n.d(u,"tiptapExtension",(function(){return $}));var l={};n.r(l),n.d(l,"tiptapExtension",(function(){return G}));var d={};n.r(d),n.d(d,"tiptapExtension",(function(){return V})),n.d(d,"serializer",(function(){return Y}));var p={};n.r(p),n.d(p,"tiptapExtension",(function(){return H})),n.d(p,"serializer",(function(){return K}));var b={};n.r(b),n.d(b,"tiptapExtension",(function(){return R}));var f={};n.r(f),n.d(f,"tiptapExtension",(function(){return X})),n.d(f,"serializer",(function(){return Q}));var m={};n.r(m),n.d(m,"tiptapExtension",(function(){return U})),n.d(m,"serializer",(function(){return tt}));var v={};n.r(v),n.d(v,"tiptapExtension",(function(){return et})),n.d(v,"serializer",(function(){return nt}));var h={};n.r(h),n.d(h,"tiptapExtension",(function(){return rt})),n.d(h,"serializer",(function(){return ot}));var g={};n.r(g),n.d(g,"tiptapExtension",(function(){return it})),n.d(g,"serializer",(function(){return at}));var E={};n.r(E),n.d(E,"tiptapExtension",(function(){return ct})),n.d(E,"serializer",(function(){return st}));var y={};n.r(y),n.d(y,"tiptapExtension",(function(){return ut})),n.d(y,"serializer",(function(){return lt}));var O={};n.r(O),n.d(O,"tiptapExtension",(function(){return dt})),n.d(O,"serializer",(function(){return pt}));n("orcL");var x=n("KFC0"),j=n.n(x),_=n("SXvo"),w=n("Zhdn"),P=n("7Er8"),k=n("ugW7");const z=P.a,C=k.b.nodes.blockquote;const S=n("ToFR").a,T=k.b.marks.strong;const D=n("oXx+").a,q=k.b.nodes.bullet_list;const A=n("ry4D").a,F=k.b.marks.code;var B=n("MqEd");function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){M(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const N=function(t){var e;return null===(e=t.firstElementChild)||void 0===e?void 0:e.getAttribute("lang")},J=B.a.extend({addAttributes(){return I(I({},this.parent()),{},{params:{parseHTML:function(t){return{params:N(t)}}}})}}),W=k.b.nodes.code_block;const Z=n("jT/H").a;const $=n("YUl2").a;const G=n("0Hjf").a;const V=n("9w5/").a,Y=k.b.nodes.hard_break;const H=n("YM1G").a,K=k.b.nodes.heading;const R=n("nlV0").a;const X=n("n4pP").a,Q=k.b.nodes.horizontal_rule;const U=n("yR4P").a.extend({defaultOptions:{inline:!0}}),tt=k.b.nodes.image;const et=n("lKjk").a,nt={open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0};const rt=n("ggOY").a,ot=k.b.marks.link;const it=n("mpI9").a,at=k.b.nodes.list_item;const ct=n("CQfl").a,st=k.b.nodes.ordered_list;const ut=n("Fbad").a,lt=k.b.nodes.paragraph;const dt=n("V3lb").a,pt=k.b.nodes.text;function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(t){let{serializer:e}=t;return e})).reduce((function(t,e){let{serializer:n,tiptapExtension:{name:r,type:o}}=e;const i="".concat(o,"s");return ft(ft({},t),{},{[i]:ft(ft({},t[i]),{},{[r]:n})})}),{nodes:{},marks:{}})},ht=n("OPr9"),gt=(n("jaBk"),n("dx+x"),n("At76"));var Et=function(t){let{render:e=function(){return null},serializerConfig:n}=t;return{deserialize:async function(t){let{schema:n,content:r}=t;const o=await e(r);if(!o)return null;const i=new DOMParser,{body:{firstElementChild:a}}=i.parseFromString("<div>".concat(o,"</div>"),"text/html");return gt.DOMParser.fromSchema(n).parse(a).toJSON()},serialize:function(t){let{schema:e,content:r}=t;const o=e.nodeFromJSON(r),{nodes:i,marks:a}=n;return new k.a(i,a).serialize(o,{tightLists:!0})}}},yt=(n("l9AF"),n("r7AW")),Ot=n.n(yt),xt=n("yMGJ"),jt=n.n(xt),_t=n("6Pne"),wt=n("5tFN"),Pt=n("4ZIW");var kt=function(t){return t.extend({addKeyboardShortcuts(){var t;const e=(null===(t=this.parent)||void 0===t?void 0:t.call(this))||{},{name:n}=this,r=Ot()(e,[wt.b,wt.a]);return jt()(r,(function(t,e){return function(t,e,n){return function(){return Pt.a.event(void 0,w.c,{label:w.a,property:"".concat(t,".").concat(n)}),e()}}(n,t,e)}))},addInputRules(){var t;const e=(null===(t=this.parent)||void 0===t?void 0:t.call(this))||[],{name:n}=this;return e.map((function(t){return function(t,e){return new _t.a(e.match,(function(){const n=e.handler(...arguments);return n&&Pt.a.event(void 0,w.b,{label:w.a,property:t}),n}))}(n,t)}))}})};function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}const Dt=[r,o,i,a,c,s,u,l,d,p,b,f,m,v,h,g,E,y,O],qt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){let{tiptapExtension:e}=t;return e}))},At=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{extensions:e=[]}=t,n=Tt(t,["extensions"]);return new _.a(Ct({extensions:[...e],editorProps:{attributes:{class:"gl-outline-0!"}}},n))},Ft=function(){let{renderMarkdown:t,extensions:e=[],tiptapOptions:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!j()(t))throw new Error(w.d);const r=[...Dt,...e],o=qt(r).map(kt),i=At(Ct({extensions:o},n)),a=vt(r),c=Et({render:t,serializerConfig:a});return new ht.a({tiptapEditor:i,serializer:c})}}}]);
//# sourceMappingURL=content_editor.5ad58d9a.chunk.js.map