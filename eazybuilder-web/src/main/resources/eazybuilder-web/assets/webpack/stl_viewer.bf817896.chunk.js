(this.webpackJsonp=this.webpackJsonp||[]).push([[425],{"p/rF":function(e,t,i){"use strict";i.r(t);var s=i("r/cO"),r=i.n(s),n=i("wxKf"),a=i.n(n),h=i("5BHL");const o={default:new h.MeshLambertMaterial({color:14828329}),wireframe:new h.MeshLambertMaterial({color:14828329,wireframe:!0})};class c extends h.Mesh{constructor(e){if(super(e,o.default),this.geometry.computeBoundingSphere(),this.rotation.set(-Math.PI/2,0,0),this.geometry.boundingSphere.radius>4){const e=4/this.geometry.boundingSphere.radius;this.geometry.applyMatrix((new h.Matrix4).makeScale(e,e,e)),this.geometry.computeBoundingSphere(),this.position.x=-this.geometry.boundingSphere.center.x,this.position.z=this.geometry.boundingSphere.center.y}}changeMaterial(e){this.material=o[e]}}const d=a()(h),l=r()(h);class u{constructor(e){this.renderWrapper=this.render.bind(this),this.objects=[],this.container=e,this.width=this.container.offsetWidth,this.height=500,this.loader=new d,this.fov=45,this.camera=new h.PerspectiveCamera(this.fov,this.width/this.height,1,1e3),this.scene=new h.Scene,this.scene.add(this.camera),this.setupRenderer(),this.setupGrid(),this.setupLight(),this.controls=new l(this.camera,this.renderer.domElement),this.controls.minDistance=5,this.controls.maxDistance=30,this.controls.enableKeys=!1,this.loadFile()}setupRenderer(){this.renderer=new h.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height)}setupLight(){const e=new h.PointLight(16777215,2,0);e.castShadow=!0,this.camera.add(e);const t=new h.AmbientLight(16777215,1);this.scene.add(t)}setupGrid(){this.grid=new h.GridHelper(20,20,0,0),this.scene.add(this.grid)}loadFile(){var e=this;this.loader.load(this.container.dataset.endpoint,(function(t){const i=new c(t);e.objects.push(i),e.scene.add(i),e.start(),e.setDefaultCameraPosition()}))}start(){this.container.innerHTML="",this.container.appendChild(this.renderer.domElement),this.container.parentNode.classList.remove("is-stl-loading"),this.render()}render(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.renderWrapper)}changeObjectMaterials(e){this.objects.forEach((function(t){t.changeMaterial(e)}))}setDefaultCameraPosition(){const e=this.objects[0].geometry.boundingSphere.radius/1.5/Math.sin(this.fov*(Math.PI/180)/2);this.camera.position.set(0,e+1,e),this.camera.lookAt(this.grid),this.controls.update()}}t.default=function(){const e=new u(document.getElementById("js-stl-viewer"));[].slice.call(document.querySelectorAll(".js-material-changer")).forEach((function(t){t.addEventListener("click",(function(t){const{target:i}=t;t.preventDefault(),document.querySelector(".js-material-changer.selected").classList.remove("selected"),i.classList.add("selected"),i.blur(),e.changeObjectMaterials(i.dataset.type)}))}))}}}]);
//# sourceMappingURL=stl_viewer.bf817896.chunk.js.map