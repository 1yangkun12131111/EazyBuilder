(this.webpackJsonp=this.webpackJsonp||[]).push([[143],{"04gX":function(t,e,r){"use strict";r.r(e);var a={};r.r(a),r.d(a,"setInitialData",(function(){return p})),r.d(a,"fetchAwards",(function(){return A})),r.d(a,"toggleAward",(function(){return l}));var n=r("jB52"),c=r("yi8e"),s=r("NmEs"),i=r("NbhA"),d=(r("jaBk"),r("cT/n")),o=r("2ibD"),u=r("/lV4"),w=r("udiD");const p=function(t,e){let{commit:r}=t;return r("SET_INITIAL_DATA",e)},A=async function(t){let{commit:e,dispatch:r,state:a}=t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";try{const{data:t,headers:c}=await o.a.get(a.path,{params:{per_page:100,page:n}}),i=Object(s.I)(c)["X-NEXT-PAGE"];e("FETCH_AWARDS_SUCCESS",t),i&&r("fetchAwards",i)}catch(t){d.a(t)}},l=async function(t,e){let{commit:r,state:a}=t;const n=a.awards.find((function(t){return t.name===e&&t.user.id===a.currentUserId}));try{if(n)await o.a.delete("".concat(a.path,"/").concat(n.id)),r("REMOVE_AWARD",n.id),Object(w.a)(Object(u.a)("Award removed"));else{const{data:t}=await o.a.post(a.path,{name:e});r("ADD_NEW_AWARD",t),Object(w.a)(Object(u.a)("Award added"))}}catch(t){d.a(t)}};r("orcL");var f={SET_INITIAL_DATA(t,e){let{path:r,currentUserId:a,canAwardEmoji:n}=e;t.path=r,t.currentUserId=a,t.canAwardEmoji=n},FETCH_AWARDS_SUCCESS(t,e){t.awards.push(...e)},ADD_NEW_AWARD(t,e){t.awards.push(e)},REMOVE_AWARD(t,e){t.awards=t.awards.filter((function(t){let{id:r}=t;return r!==e}))}};n.default.use(c.b);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.default=function(t){const{dataset:{path:e}}=t,r=Object(s.K)(t.dataset.canAwardEmoji);return new n.default({el:t,store:new c.b.Store({state:{awards:[],awardPath:"",currentUserId:null,canAwardEmoji:!1},actions:a,mutations:f}),computed:h({},Object(c.f)(["currentUserId","canAwardEmoji","awards"])),created(){this.setInitialData({path:e,currentUserId:window.gon.current_user_id,canAwardEmoji:r})},mounted(){this.fetchAwards()},methods:h({},Object(c.c)(["setInitialData","fetchAwards","toggleAward"])),render(t){return t(i.a,{props:{awards:this.awards,canAwardEmoji:this.canAwardEmoji,currentUserId:this.currentUserId,defaultAwards:["thumbsup","thumbsdown"],selectedClass:"gl-bg-blue-50! is-active"},on:{award:this.toggleAward}})}})}}}]);
//# sourceMappingURL=143.5c8bd858.chunk.js.map