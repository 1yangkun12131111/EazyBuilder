(this.webpackJsonp=this.webpackJsonp||[]).push([[385],{"/GZH":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return d}));var i=40,r=35,o=13,s=27,a=36,c=37,l=39,u=32,d=38},215:function(t,e,n){n("HVBj"),n("gjpc"),t.exports=n("6xiW")},"4lAS":function(t,e,n){"use strict";var i=n("ofGl"),r=n("XBTk"),o=n("g3So"),s=n("s1D3"),a=n("FkSe"),c=n("Pyw5"),l=n.n(c);const u={components:{BButton:i.a,GlIcon:s.a,GlLoadingIcon:a.a},mixins:[o.a],props:{category:{type:String,required:!1,default:r.u.primary,validator:function(t){return Object.keys(r.u).includes(t)}},variant:{type:String,required:!1,default:r.x.default,validator:function(t){return Object.keys(r.x).includes(t)}},size:{type:String,required:!1,default:r.v.medium,validator:function(t){return Object.keys(r.v).includes(t)}},selected:{type:Boolean,required:!1,default:!1},icon:{type:String,required:!1,default:""},label:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},buttonTextClasses:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1}},computed:{hasIcon:function(){return""!==this.icon},hasIconOnly:function(){return 0===Object.keys(this.$slots).length&&this.hasIcon},isButtonDisabled:function(){return this.disabled||this.loading},buttonClasses:function(){var t=["gl-button"];return[r.x.dashed,r.x.link].includes(this.variant)||this.category===r.u.primary||t.push("btn-".concat(this.variant,"-").concat(this.category)),t.push({"btn-icon":this.hasIconOnly,"button-ellipsis-horizontal":this.hasIconOnly&&"ellipsis_h"===this.icon,selected:this.selected}),this.label&&t.push("btn","btn-label","btn-".concat(this.buttonSize)),t},buttonSize:function(){return r.w[this.size]}}};const d=l()({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.label?"span":"b-button",t._g(t._b({directives:[{name:"safe-link",rawName:"v-safe-link:[safeLinkConfig]",arg:t.safeLinkConfig}],tag:"component",class:t.buttonClasses,attrs:{target:t.target,variant:t.variant,size:t.buttonSize,disabled:t.isButtonDisabled}},"component",t.$attrs,!1),t.$listeners),[t.loading?n("gl-loading-icon",{staticClass:"gl-button-icon gl-button-loading-indicator",attrs:{inline:""}}):t._e(),t._v(" "),!t.hasIcon||t.hasIconOnly&&t.loading?t._e():n("gl-icon",{staticClass:"gl-button-icon",attrs:{name:t.icon}}),t._v(" "),t._t("emoji"),t._v(" "),t.hasIconOnly?t._e():n("span",{staticClass:"gl-button-text",class:t.buttonTextClasses},[t._t("default")],2)],2)},staticRenderFns:[]},void 0,u,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=d},"6iM1":function(t,e,n){"use strict";e.a={methods:{listenOnRoot:function(t,e){var n=this;this.$root.$on(t,e),this.$on("hook:beforeDestroy",(function(){n.$root.$off(t,e)}))},listenOnRootOnce:function(t,e){var n=this;this.$root.$once(t,e),this.$on("hook:beforeDestroy",(function(){n.$root.$off(t,e)}))},emitOnRoot:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.$root).$emit.apply(e,[t].concat(i))}}}},"6xiW":function(t,e,n){"use strict";n.r(e);var i=n("Bl6y"),r=n("jB52"),o=n("4lAS"),s=n("l5WF"),a=n("PrLL"),c=n("1cpz"),l=n("XqDB"),u=n("XRO8"),d=n("2ibD"),h=n("/lV4"),p=n("rK/1"),f={copyToClipboard:Object(h.a)("Copy"),components:{GlButton:o.a,GlFormGroup:s.a,GlFormInput:a.a,GlModal:c.a,ClipboardButton:p.a},directives:{"gl-modal":l.a},props:{initialAuthorizationKey:{type:String,required:!1,default:""},changeKeyUrl:{type:String,required:!0},notifyUrl:{type:String,required:!0},learnMoreUrl:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}},data(){return{authorizationKey:this.initialAuthorizationKey,sectionDescription:Object(h.f)(Object(h.a)("To receive alerts from manually configured Prometheus services, add the following URL and Authorization key to your Prometheus webhook config file. Learn more about %{linkStart}configuring Prometheus%{linkEnd} to send alerts to GitLab."),{linkStart:'<a href="'.concat(this.learnMoreUrl,'" target="_blank" rel="noopener noreferrer">'),linkEnd:"</a>"},!1)}},methods:{resetKey(){var t=this;d.a.post(this.changeKeyUrl).then((function(e){t.authorizationKey=e.data.token})).catch((function(){Object(u.c)(Object(h.a)("Failed to reset key. Please try again."))}))}}},m=n("tBpV"),g=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row py-4 border-top js-prometheus-alerts"},[n("div",{staticClass:"col-lg-3"},[n("h4",{staticClass:"mt-0"},[t._v("\n      "+t._s(t.__("Alerts"))+"\n    ")]),t._v(" "),n("p",[t._v("\n      "+t._s(t.__("Receive alerts from manually configured Prometheus servers."))+"\n    ")])]),t._v(" "),n("div",{staticClass:"col-lg-9"},[n("p",{domProps:{innerHTML:t._s(t.sectionDescription)}}),t._v(" "),n("gl-form-group",{attrs:{label:t.__("URL"),"label-for":"notify-url","label-class":"label-bold"}},[n("div",{staticClass:"input-group"},[n("gl-form-input",{attrs:{id:"notify-url",readonly:!0,value:t.notifyUrl}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("clipboard-button",{attrs:{text:t.notifyUrl,title:t.$options.copyToClipboard,disabled:t.disabled}})],1)],1)]),t._v(" "),n("gl-form-group",{attrs:{label:t.__("Authorization key"),"label-for":"authorization-key","label-class":"label-bold"}},[n("div",{staticClass:"input-group"},[n("gl-form-input",{attrs:{id:"authorization-key",readonly:!0,value:t.authorizationKey}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("clipboard-button",{attrs:{text:t.authorizationKey,title:t.$options.copyToClipboard,disabled:t.disabled}})],1)],1)]),t._v(" "),t.authorizationKey.length>0?[n("gl-modal",{attrs:{"modal-id":"authKeyModal",title:t.__("Reset authorization key?"),"ok-title":t.__("Reset authorization key"),"ok-variant":"danger"},on:{ok:t.resetKey}},[t._v("\n        "+t._s(t.__("Resetting the authorization key will invalidate the previous key. Existing alert configurations will need to be updated with the new key."))+"\n      ")]),t._v(" "),n("gl-button",{directives:[{name:"gl-modal",rawName:"v-gl-modal.authKeyModal",modifiers:{authKeyModal:!0}}],staticClass:"js-reset-auth-key",attrs:{disabled:t.disabled}},[t._v(t._s(t.__("Reset key")))])]:n("gl-button",{staticClass:"js-reset-auth-key",attrs:{disabled:t.disabled},on:{click:t.resetKey}},[t._v(t._s(t.__("Generate key")))])],2)])}),[],!1,null,null,null).exports,b=(n("jaBk"),n("QifN"),n("orcL"),n("TKCn")),v=n.n(b),y=n("G3fq"),j=n.n(y),w=n("EmJ/"),O=n.n(w),C=n("0AwG"),_=n("VQ4T"),M=n("jF6B");function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class x extends M.a{constructor(t){super(t),this.customMetrics=[],this.environmentsData=[],this.$els=[],this.$wrapperCustomMetrics=O()(t),this.$monitoredCustomMetricsPanel=this.$wrapperCustomMetrics.find(".js-panel-custom-monitored-metrics"),this.$monitoredCustomMetricsCount=this.$monitoredCustomMetricsPanel.find(".js-custom-monitored-count"),this.$monitoredCustomMetricsLoading=this.$monitoredCustomMetricsPanel.find(".js-loading-custom-metrics"),this.$monitoredCustomMetricsEmpty=this.$monitoredCustomMetricsPanel.find(".js-empty-custom-metrics"),this.$monitoredCustomMetricsList=this.$monitoredCustomMetricsPanel.find(".js-custom-metrics-list"),this.$monitoredCustomMetricsNoIntegrationText=this.$monitoredCustomMetricsPanel.find(".js-no-active-integration-text"),this.$newCustomMetricButton=this.$monitoredCustomMetricsPanel.find(".js-new-metric-button"),this.$newCustomMetricText=this.$monitoredCustomMetricsPanel.find(".js-new-metric-text"),this.$flashCustomMetricsContainer=this.$wrapperCustomMetrics.find(".flash-container"),this.$els=[this.$monitoredCustomMetricsLoading,this.$monitoredCustomMetricsList,this.$newCustomMetricButton,this.$newCustomMetricText,this.$monitoredCustomMetricsNoIntegrationText,this.$monitoredCustomMetricsEmpty],this.activeCustomMetricsEndpoint=this.$monitoredCustomMetricsPanel.data("active-custom-metrics"),this.environmentsDataEndpoint=this.$monitoredCustomMetricsPanel.data("environments-data-endpoint"),this.isServiceActive=this.$monitoredCustomMetricsPanel.data("service-active")}init(){this.isServiceActive?this.loadActiveCustomMetrics():this.setNoIntegrationActiveState()}setHidden(t){t.forEach((function(t){return t.addClass("hidden")}))}setVisible(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.setHidden(this.$els.filter((function(t){return!e.includes(t)}))),e.forEach((function(t){return t.removeClass("hidden")}))}showMonitoringCustomMetricsPanelState(t){switch(t){case _.a.LOADING:this.setVisible(this.$monitoredCustomMetricsLoading);break;case _.a.LIST:this.setVisible(this.$newCustomMetricButton,this.$monitoredCustomMetricsList);break;case _.a.NO_INTEGRATION:this.setVisible(this.$monitoredCustomMetricsNoIntegrationText,this.$monitoredCustomMetricsEmpty);break;default:this.setVisible(this.$monitoredCustomMetricsEmpty,this.$newCustomMetricButton,this.$newCustomMetricText)}}populateCustomMetrics(){var t=this;v()(this.customMetrics.map((function(t){return S(S({},t),{},{group:Object(C.b)(t.group)})})),["group","title"]).forEach((function(e){t.$monitoredCustomMetricsList.append(x.customMetricTemplate(e))})),this.$monitoredCustomMetricsCount.text(this.customMetrics.length),this.showMonitoringCustomMetricsPanelState(_.a.LIST),this.environmentsData||this.showFlashMessage(Object(h.e)("PrometheusService|These metrics will only be monitored after your first deployment to an environment"))}showFlashMessage(t){this.$flashCustomMetricsContainer.removeClass("hidden"),this.$flashCustomMetricsContainer.find(".flash-text").text(t)}setNoIntegrationActiveState(){this.showMonitoringCustomMetricsPanelState(_.a.NO_INTEGRATION),this.showMonitoringMetricsPanelState(_.a.EMPTY)}loadActiveCustomMetrics(){var t=this;super.loadActiveMetrics(),Promise.all([d.a.get(this.activeCustomMetricsEndpoint),d.a.get(this.environmentsDataEndpoint)]).then((function(e){let[n,i]=e;t.environmentsData=i.data.environments,n.data&&n.data.metrics?(t.customMetrics=n.data.metrics,t.populateCustomMetrics(n.data.metrics)):t.showMonitoringCustomMetricsPanelState(_.a.EMPTY)})).catch((function(e){t.showFlashMessage(e),t.showMonitoringCustomMetricsPanelState(_.a.EMPTY)}))}static customMetricTemplate(t){return'\n    <li class="custom-metric">\n      <a href="'.concat(j()(t.edit_path),'" class="custom-metric-link-bold">\n        ').concat(j()(t.group)," / ").concat(j()(t.title)," (").concat(j()(t.unit),")\n      </a>\n    </li>\n  ")}}document.addEventListener("DOMContentLoaded",(function(){new i.a(".js-integration-settings-form").init();if(document.querySelector(".js-prometheus-metrics-monitoring")){new x(".js-prometheus-metrics-monitoring").init()}!function(){const t=document.querySelector("#js-settings-prometheus-alerts");if(!t)return;const{authorizationKey:e,changeKeyUrl:n,notifyUrl:i,learnMoreUrl:o,disabled:s}=t.dataset;new r.default({el:t,render:t=>t(g,{props:{initialAuthorizationKey:e,changeKeyUrl:n,notifyUrl:i,learnMoreUrl:o,disabled:s}})})}()}))},"7Gq8":function(t,e,n){var i=n("BZxG");t.exports=function(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,a=o.length,c=n.length;++r<a;){var l=i(o[r],s[r]);if(l)return r>=c?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}},"95R8":function(t,e,n){var i=n("90g9"),r=n("aEqC"),o=n("nHTl"),s=n("QwWC"),a=n("uHqx"),c=n("wJPF"),l=n("7Gq8"),u=n("uYOL"),d=n("P/Kr");t.exports=function(t,e,n){e=e.length?i(e,(function(t){return d(t)?function(e){return r(e,1===t.length?t[0]:t)}:t})):[u];var h=-1;e=i(e,c(o));var p=s(t,(function(t,n,r){return{criteria:i(e,(function(e){return e(t)})),index:++h,value:t}}));return a(p,(function(t,e){return l(t,e,n)}))}},BZxG:function(t,e,n){var i=n("G1mR");t.exports=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,s=i(t),a=void 0!==e,c=null===e,l=e==e,u=i(e);if(!c&&!u&&!s&&t>e||s&&a&&l&&!c&&!u||r&&a&&l||!n&&l||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}},DXSV:function(t,e,n){"use strict";e.a={props:{id:{type:String}},data:function(){return{localId_:null}},computed:{safeId:function(){var t=this.id||this.localId_;return function(e){return t?(e=String(e||"").replace(/\s+/g,"_"))?t+"_"+e:t:null}}},mounted:function(){var t=this;this.$nextTick((function(){t.localId_="__BVID__".concat(t._uid)}))}}},FkSe:function(t,e,n){"use strict";var i=n("Pyw5"),r=["sm","md","lg","xl"],o={dark:"dark",light:"light"};const s={props:{label:{type:String,required:!1,default:"Loading"},size:{type:String,required:!1,default:"sm",validator:function(t){return-1!==r.indexOf(t)}},color:{type:String,required:!1,default:o.dark,validator:function(t){return Object.keys(o).includes(t)}},inline:{type:Boolean,required:!1,default:!1}},computed:{rootElementType:function(){return this.inline?"span":"div"},cssClasses:function(){return["gl-spinner","".concat("gl-spinner","-").concat(o[this.color]),"".concat("gl-spinner","-").concat(this.size)]}}};const a=n.n(i)()({render:function(){var t=this.$createElement,e=this._self._c||t;return e(this.rootElementType,{tag:"component",staticClass:"gl-spinner-container"},[e("span",{staticClass:"align-text-bottom",class:this.cssClasses,attrs:{"aria-label":this.label}})])},staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=a},GVjJ:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));n("EWC9"),n("gNBD"),n("orcL");var i=n("0AwG");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const a=function(t){const e=new FormData(t);return function(t){return t.reduce((function(t,e){let{name:n,value:i}=e;return Object.assign(t,{[n]:i})}),{})}(Array.from(e.keys()).map((function(t){let n=e.getAll(t);return{name:t,value:1===(n=n.filter((function(t){return t}))).length?n[0]:n}})))},c=function(t){if(!t)throw new TypeError("`mountEl` argument is required");return[...t.querySelectorAll("[name]")].reduce((function(t,e){const n=e.dataset.jsName;if(!n)return t;const r=Object(i.c)(n),{id:s,placeholder:a,name:c,value:l,type:u,checked:d}=e,h=o({name:c,id:s,value:l},a&&{placeholder:a});return["radio","checkbox"].includes(u)?o(o({},t),{},{[r]:[...t[r]||[],o(o({},h),{},{checked:d})]}):o(o({},t),{},{[r]:h})}),{})}},LLbv:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("0zRR"),r=n("EGUT"),o=n("qTlp"),s=n("NSGy"),a=n("TjC/"),c=n("t8l0"),l=n("EGlP"),u=n("BrvI"),d=n("Ddgg"),h=n("7bmO"),p=n("RhHz");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b="__BV_Tooltip__",v={focus:!0,hover:!0,click:!0,blur:!0,manual:!0},y=/^html$/i,j=/^noninteractive$/i,w=/^nofade$/i,O=/^(auto|top(left|right)?|bottom(left|right)?|left(top|bottom)?|right(top|bottom)?)$/i,C=/^(window|viewport|scrollParent)$/i,_=/^d\d+$/i,M=/^ds\d+$/i,P=/^dh\d+$/i,S=/^o-?\d+$/i,$=/^v-.+$/i,x=/\s+/,E=function(t,e,n){if(l.g){var f=function(t,e){var n={title:void 0,trigger:"",placement:"top",fallbackPlacement:"flip",container:!1,animation:!0,offset:0,id:null,html:!1,interactive:!0,disabled:!1,delay:Object(c.b)(i.Eb,"delay"),boundary:String(Object(c.b)(i.Eb,"boundary")),boundaryPadding:Object(d.c)(Object(c.b)(i.Eb,"boundaryPadding"),0),variant:Object(c.b)(i.Eb,"variant"),customClass:Object(c.b)(i.Eb,"customClass")};if(Object(u.l)(t.value)||Object(u.g)(t.value)?n.title=t.value:Object(u.e)(t.value)?n.title=t.value:Object(u.i)(t.value)&&(n=m(m({},n),t.value)),Object(u.m)(n.title)){var r=e.data||{};n.title=r.attrs&&!Object(u.n)(r.attrs.title)?r.attrs.title:void 0}Object(u.i)(n.delay)||(n.delay={show:Object(d.c)(n.delay,0),hide:Object(d.c)(n.delay,0)}),t.arg&&(n.container="#".concat(t.arg)),Object(h.i)(t.modifiers).forEach((function(t){if(y.test(t))n.html=!0;else if(j.test(t))n.interactive=!1;else if(w.test(t))n.animation=!1;else if(O.test(t))n.placement=t;else if(C.test(t))t="scrollparent"===t?"scrollParent":t,n.boundary=t;else if(_.test(t)){var e=Object(d.c)(t.slice(1),0);n.delay.show=e,n.delay.hide=e}else M.test(t)?n.delay.show=Object(d.c)(t.slice(2),0):P.test(t)?n.delay.hide=Object(d.c)(t.slice(2),0):S.test(t)?n.offset=Object(d.c)(t.slice(1),0):$.test(t)&&(n.variant=t.slice(2)||null)}));var s={};return Object(a.b)(n.trigger||"").filter(o.a).join(" ").trim().toLowerCase().split(x).forEach((function(t){v[t]&&(s[t]=!0)})),Object(h.i)(t.modifiers).forEach((function(t){t=t.toLowerCase(),v[t]&&(s[t]=!0)})),n.trigger=Object(h.i)(s).join(" "),"blur"===n.trigger&&(n.trigger="focus"),n.trigger||(n.trigger="hover focus"),n}(e,n);if(!t[b]){var g=n.context;t[b]=new p.a({parent:g,_scopeId:Object(r.a)(g,void 0)}),t[b].__bv_prev_data__={},t[b].$on("show",(function(){Object(u.e)(f.title)&&t[b].updateData({title:f.title(t)})}))}var E={title:f.title,triggers:f.trigger,placement:f.placement,fallbackPlacement:f.fallbackPlacement,variant:f.variant,customClass:f.customClass,container:f.container,boundary:f.boundary,delay:f.delay,offset:f.offset,noFade:!f.animation,id:f.id,interactive:f.interactive,disabled:f.disabled,html:f.html},k=t[b].__bv_prev_data__;if(t[b].__bv_prev_data__=E,!Object(s.a)(E,k)){var T={target:t};Object(h.i)(E).forEach((function(e){E[e]!==k[e]&&(T[e]="title"===e&&Object(u.e)(E[e])?E[e](t):E[e])})),t[b].updateData(T)}}},k={bind:function(t,e,n){E(t,e,n)},componentUpdated:function(t,e,n){n.context.$nextTick((function(){E(t,e,n)}))},unbind:function(t){!function(t){t[b]&&(t[b].$destroy(),t[b]=null),delete t[b]}(t)}}},QwWC:function(t,e,n){var i=n("2v8U"),r=n("20jF");t.exports=function(t,e){var n=-1,o=r(t)?Array(t.length):[];return i(t,(function(t,i,r){o[++n]=e(t,i,r)})),o}},TKCn:function(t,e,n){var i=n("4ips"),r=n("95R8"),o=n("Opi0"),s=n("etTJ"),a=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])}));t.exports=a},VQ4T:function(t,e,n){"use strict";e.a={EMPTY:"empty",LOADING:"loading",LIST:"list",NO_INTEGRATION:"no-integration"}},ZeWX:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("QifN"),n("pBsb"),n("Ch9p"),n("+xeR"),n("orcL"),n("pETN");var i=n("EmJ/"),r=n.n(i),o=n("06tH"),s=n.n(o);var a=n("m/7A"),c=n("XRO8"),l=n("2ibD"),u=n("GVjJ"),d=n("3twG"),h=n("/lV4"),p=n("k/Fq");class f{constructor(){!function(){const t=r()("ul.clone-options-dropdown");if(t.length){const e=r()("#clone_url"),n=r()(".js-git-clone-holder .js-clone-dropdown-label"),i=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),o=n.text().trim();o.length>0&&r()("a:contains('".concat(o,"')"),t).addClass("is-active"),r()("a",t).on("click",(function(n){const o=r()(n.currentTarget),s=o.attr("href");if(s&&(s.startsWith("vscode://")||s.startsWith("xcode://")))return;n.preventDefault();const a=o.data("cloneType");r()(".is-active",t).removeClass("is-active"),r()('a[data-clone-type="'.concat(a,'"]')).each((function(){const t=r()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".js-git-clone-holder, .js-mobile-git-clone").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),i?i.dataset.clipboardText=s:e.val(s),r()(".js-git-empty .js-clone").text(s)}))}}(),document.querySelector(".js-project-refs-dropdown")&&(f.initRefSwitcher(),r()(".project-refs-select").on("change",(function(){return r()(this).parents("form").trigger("submit")}))),r()(".hide-no-ssh-message").on("click",(function(t){return s.a.set("hide_no_ssh_message","false"),r()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),r()(".hide-no-password-message").on("click",(function(t){return s.a.set("hide_no_password_message","false"),r()(this).parents(".no-password-message").remove(),t.preventDefault()})),r()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){const e=r()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return s.a.set(n,"false"),r()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),f.projectSelectDropdown()}static projectSelectDropdown(){Object(p.a)(),r()(".project-item-select").on("click",(function(t){return f.changeProject(r()(t.currentTarget).val())}))}static changeProject(t){return window.location=t}static initRefSwitcher(){const t=document.createElement("li"),e=document.createElement("a");return e.href="#",r()(".js-project-refs-dropdown").each((function(){const n=r()(this),i=n.data("selected"),o=n.data("fieldName"),s=Boolean(n.data("visit")),p=n.closest("form"),f=p.attr("action"),m=Object(d.q)(Object(u.b)(p[0]),f);return Object(a.a)(n,{data(t,e){l.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:t}}).then((function(t){let{data:n}=t;return e(n)})).catch((function(){return Object(c.c)(Object(h.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:o,renderRow(n){const r=t.cloneNode(!1),a=e.cloneNode(!1);return n===i&&(a.className="is-active"),a.textContent=n,a.dataset.ref=n,n.length>0&&s&&(a.href=Object(d.q)({[o]:n},m)),r.appendChild(a),r},id:(t,e)=>e.attr("data-ref"),toggleLabel:(t,e)=>e.text().trim(),clicked(t){const{e:e}=t;if(e.preventDefault(),s){const t=new URL(e.target.href),i=window.location.href;if(i.includes("/-/")){const e=n.data("ref"),r=i.split(e)[1];if(null==r?void 0:r.startsWith("/")){const e=null==r?void 0:r.slice(1).split("#")[0];t.searchParams.set("path",e),t.hash=window.location.hash}}e.metaKey?window.open(t.href,"_blank"):window.location.href=t.href}}})}))}}},gNBD:function(t,e,n){var i=n("ZfjD"),r=n("H81m"),o=n("b05b");i({target:"Object",stat:!0},{fromEntries:function(t){var e={};return r(t,(function(t,n){o(e,t,n)}),{AS_ENTRIES:!0}),e}})},gjpc:function(t,e,n){"use strict";n.r(e);var i=n("CX32");new(n("ZeWX").a),new i.a},jF6B:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("G3fq"),r=n.n(i),o=n("EmJ/"),s=n.n(o),a=n("/lV4"),c=n("2ibD"),l=n("NmEs"),u=n("VQ4T");class d{constructor(t){var e=this;this.backOffRequestCounter=0,this.$wrapper=s()(t),this.$monitoredMetricsPanel=this.$wrapper.find(".js-panel-monitored-metrics"),this.$monitoredMetricsCount=this.$monitoredMetricsPanel.find(".js-monitored-count"),this.$monitoredMetricsLoading=this.$monitoredMetricsPanel.find(".js-loading-metrics"),this.$monitoredMetricsEmpty=this.$monitoredMetricsPanel.find(".js-empty-metrics"),this.$monitoredMetricsList=this.$monitoredMetricsPanel.find(".js-metrics-list"),this.$missingEnvVarPanel=this.$wrapper.find(".js-panel-missing-env-vars"),this.$panelToggleRight=this.$missingEnvVarPanel.find(".js-panel-toggle-right"),this.$panelToggleDown=this.$missingEnvVarPanel.find(".js-panel-toggle-down"),this.$missingEnvVarMetricCount=this.$missingEnvVarPanel.find(".js-env-var-count"),this.$missingEnvVarMetricsList=this.$missingEnvVarPanel.find(".js-missing-var-metrics-list"),this.activeMetricsEndpoint=this.$monitoredMetricsPanel.data("activeMetrics"),this.helpMetricsPath=this.$monitoredMetricsPanel.data("metrics-help-path"),this.$panelToggleRight.on("click",(function(t){return e.handlePanelToggle(t)})),this.$panelToggleDown.on("click",(function(t){return e.handlePanelToggle(t)}))}init(){this.loadActiveMetrics()}handlePanelToggle(t){const e=s()(t.currentTarget);e.closest(".card").find(".card-body").toggleClass("hidden"),e.hasClass("js-panel-toggle-right")?(e.addClass("hidden"),this.$panelToggleDown.removeClass("hidden")):e.hasClass("js-panel-toggle-down")&&(e.addClass("hidden"),this.$panelToggleRight.removeClass("hidden"))}showMonitoringMetricsPanelState(t){switch(t){case u.a.LOADING:this.$monitoredMetricsLoading.removeClass("hidden"),this.$monitoredMetricsEmpty.addClass("hidden"),this.$monitoredMetricsList.addClass("hidden");break;case u.a.LIST:this.$monitoredMetricsLoading.addClass("hidden"),this.$monitoredMetricsEmpty.addClass("hidden"),this.$monitoredMetricsList.removeClass("hidden");break;default:this.$monitoredMetricsLoading.addClass("hidden"),this.$monitoredMetricsEmpty.removeClass("hidden"),this.$monitoredMetricsList.addClass("hidden")}}populateActiveMetrics(t){var e=this;let n=0,i=0,o=0;if(t.forEach((function(t){t.active_metrics>0&&(o+=1,e.$monitoredMetricsList.append("<li>".concat(r()(t.group),'<span class="badge">').concat(r()(t.active_metrics),"</span></li>")),n+=t.active_metrics,t.metrics_missing_requirements>0&&(e.$missingEnvVarMetricsList.append("<li>".concat(r()(t.group),"</li>")),i+=1))})),0===n){const t=Object(a.f)(Object(a.e)("PrometheusService|No %{docsUrlStart}common metrics%{docsUrlEnd} were found"),{docsUrlStart:'<a href="'.concat(this.helpMetricsPath,'">'),docsUrlEnd:"</a>"},!1);this.$monitoredMetricsEmpty.empty(),this.$monitoredMetricsEmpty.append('<p class="text-tertiary">'.concat(t,"</p>")),this.showMonitoringMetricsPanelState(u.a.EMPTY)}else{const t=Object(a.f)(Object(a.e)("PrometheusService|%{exporters} with %{metrics} were found"),{exporters:Object(a.d)("%d exporter","%d exporters",o),metrics:Object(a.d)("%d metric","%d metrics",n)});this.$monitoredMetricsCount.text(t),this.showMonitoringMetricsPanelState(u.a.LIST),i>0&&(this.$missingEnvVarPanel.removeClass("hidden"),this.$missingEnvVarMetricCount.text(i))}}loadActiveMetrics(){var t=this;this.showMonitoringMetricsPanelState(u.a.LOADING),Object(l.d)((function(e,n){c.a.get(t.activeMetricsEndpoint).then((function(i){let{data:r}=i;r&&r.success?n(r):(t.backOffRequestCounter+=1,t.backOffRequestCounter<3?e():n(r))})).catch(n)})).then((function(e){e&&e.data&&e.data.length?t.populateActiveMetrics(e.data):t.showMonitoringMetricsPanelState(u.a.EMPTY)})).catch((function(){t.showMonitoringMetricsPanelState(u.a.EMPTY)}))}}},"k/Fq":function(t,e,n){"use strict";n("jaBk");var i=n("EmJ/"),r=n.n(i),o=n("qPgm"),s=n("qnJZ"),a=n("/lV4"),c=(n("pBsb"),n("n7CP"));class l{constructor(t){this.projectSelectInput=r()(t),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}bindEvents(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}initLocalStorage(){c.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}openDropdown(t){n.e(443).then(n.t.bind(null,"p9g0",7)).then((function(){Object(s.a)(gon.select2_css_path).then((function(){r()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))})).catch((function(){}))}selectProject(){const t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}setBtnTextFromLocalStorage(){const t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}setNewItemBtnAttributes(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}getProjectFromLocalStorage(){const t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}setProjectInLocalStorage(t){const e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}deriveTextVariants(){const t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}const u=function(){Object(s.a)(gon.select2_css_path).then((function(){r()(".ajax-project-select").each((function(t,e){var n=this;let i;const s=r()(e).data("simpleFilter")||!1,c=r()(e).data("select2");return this.groupId=r()(e).data("groupId"),this.userId=r()(e).data("userId"),this.includeGroups=r()(e).data("includeGroups"),this.allProjects=r()(e).data("allProjects")||!1,this.orderBy=r()(e).data("orderBy")||"id",this.withIssuesEnabled=r()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(e).data("withShared")||r()(e).data("withShared"),this.includeProjectsInSubgroups=r()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(e).data("allowClear")||!1,i=Object(a.e)("ProjectSelect|Search for project"),this.includeGroups&&(i+=Object(a.e)("ProjectSelect| or group")),r()(e).select2({placeholder:i,minimumInputLength:0,query:function(t){let e;const i=function(e){const n={results:e};return t.callback(n)};return e=n.includeGroups?function(e){return o.a.groups(t.term,{},(function(t){const n=t.concat(e);return i(n)}))}:i,n.groupId?o.a.groupProjects(n.groupId,t.term,{with_issues_enabled:n.withIssuesEnabled,with_merge_requests_enabled:n.withMergeRequestsEnabled,with_shared:n.withShared,include_subgroups:n.includeProjectsInSubgroups,order_by:"similarity",simple:!0},e):n.userId?o.a.userProjects(n.userId,t.term,{with_issues_enabled:n.withIssuesEnabled,with_merge_requests_enabled:n.withMergeRequestsEnabled,with_shared:n.withShared,include_subgroups:n.includeProjectsInSubgroups},e):o.a.projects(t.term,{order_by:n.orderBy,with_issues_enabled:n.withIssuesEnabled,with_merge_requests_enabled:n.withMergeRequestsEnabled,membership:!n.allProjects},e)},id:t=>s?t.id:JSON.stringify({name:t.name,url:t.web_url}),text:t=>t.name_with_namespace||t.name,initSelection:(t,e)=>o.a.project(t.val()).then((function(t){let{data:n}=t;return e(n)})),allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),c||s?e:new l(e)}))})).catch((function(){}))};e.a=function(){r()(".ajax-project-select").length&&n.e(443).then(n.t.bind(null,"p9g0",7)).then(u).catch((function(){}))}},ofGl:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("0zRR"),r=n("/GZH"),o=n("/Szx"),s=n("lgrP"),a=n("TjC/"),c=n("t8l0"),l=n("o/E4"),u=n("QXXq"),d=n("BrvI"),h=n("7bmO"),p=n("ua/H"),f=n("U9NU"),m=n("1m+M");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=Object(h.k)(m.b,["event","routerTag"]);delete y.href.default,delete y.to.default;var j=b(b({},{block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:function(){return Object(c.b)(i.g,"size")}},variant:{type:String,default:function(){return Object(c.b)(i.g,"variant")}},type:{type:String,default:"button"},tag:{type:String,default:"button"},pill:{type:Boolean,default:!1},squared:{type:Boolean,default:!1},pressed:{type:Boolean,default:null}}),y),w=function(t){"focusin"===t.type?Object(l.b)(t.target,"focus"):"focusout"===t.type&&Object(l.y)(t.target,"focus")},O=function(t){return Object(f.d)(t)||Object(l.t)(t.tag,"a")},C=function(t){return Object(d.b)(t.pressed)},_=function(t){return!(O(t)||t.tag&&!Object(l.t)(t.tag,"button"))},M=function(t){return!O(t)&&!_(t)},P=function(t){var e;return["btn-".concat(t.variant||Object(c.b)(i.g,"variant")),(e={},v(e,"btn-".concat(t.size),t.size),v(e,"btn-block",t.block),v(e,"rounded-pill",t.pill),v(e,"rounded-0",t.squared&&!t.pill),v(e,"disabled",t.disabled),v(e,"active",t.pressed),e)]},S=function(t){return O(t)?Object(p.a)(y,t):{}},$=function(t,e){var n=_(t),i=O(t),r=C(t),o=M(t),s=i&&"#"===t.href,a=e.attrs&&e.attrs.role?e.attrs.role:null,c=e.attrs?e.attrs.tabindex:null;return(o||s)&&(c="0"),{type:n&&!i?t.type:null,disabled:n?t.disabled:null,role:o||s?"button":a,"aria-disabled":o?String(t.disabled):null,"aria-pressed":r?String(t.pressed):null,autocomplete:r?"off":null,tabindex:t.disabled&&!n?"-1":c}},x=o.a.extend({name:i.g,functional:!0,props:j,render:function(t,e){var n=e.props,i=e.data,o=e.listeners,c=e.children,l=C(n),h=O(n),p=M(n),f=h&&"#"===n.href,g={keydown:function(t){if(!n.disabled&&(p||f)){var e=t.keyCode;if(e===r.h||e===r.c&&p){var i=t.currentTarget||t.target;Object(u.d)(t,{propagation:!1}),i.click()}}},click:function(t){n.disabled&&Object(d.d)(t)?Object(u.d)(t):l&&o&&o["update:pressed"]&&Object(a.b)(o["update:pressed"]).forEach((function(t){Object(d.e)(t)&&t(!n.pressed)}))}};l&&(g.focusin=w,g.focusout=w);var b={staticClass:"btn",class:P(n),props:S(n),attrs:$(n,i),on:g};return t(h?m.a:n.tag,Object(s.a)(i,b),c)}})},"rK/1":function(t,e,n){"use strict";var i=n("LLbv"),r=n("4lAS"),o={name:"ClipboardButton",directives:{GlTooltip:i.a},components:{GlButton:r.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},tooltipBoundary:{type:String,required:!1,default:null},cssClass:{type:String,required:!1,default:null},category:{type:String,required:!1,default:"secondary"},size:{type:String,required:!1,default:"medium"}},computed:{clipboardText(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},s=n("tBpV"),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("gl-button",t._g({directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover.blur.viewport",value:{placement:t.tooltipPlacement,container:t.tooltipContainer,boundary:t.tooltipBoundary},expression:"{\n    placement: tooltipPlacement,\n    container: tooltipContainer,\n    boundary: tooltipBoundary,\n  }",modifiers:{hover:!0,blur:!0,viewport:!0}}],class:t.cssClass,attrs:{title:t.title,"data-clipboard-text":t.clipboardText,category:t.category,size:t.size,icon:"copy-to-clipboard","aria-label":t.__("Copy this value")}},t.$listeners),[t._t("default")],2)}),[],!1,null,null,null);e.a=a.exports},rPnh:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var i=n("zlPX"),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(i.f,"")},o=function(t,e){return t?{innerHTML:t}:e?{textContent:e}:{}}},uHqx:function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}}},[[215,1,0,2,3,4,5,9,17,22,65]]]);
//# sourceMappingURL=pages.projects.services.edit.13328599.chunk.js.map